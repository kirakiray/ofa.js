{"version":3,"file":"ofa.min.js","sources":["../packages/ofa-error/main.js","../packages/stanz/public.mjs","../packages/xhear/public.mjs","../packages/stanz/watch.mjs","../packages/stanz/array.mjs","../packages/stanz/main.mjs","../packages/stanz/accessor.mjs","../packages/xhear/accessor.mjs","../packages/xhear/render/render.mjs","../packages/xhear/render/sync.mjs","../packages/xhear/event.mjs","../packages/xhear/array.mjs","../packages/stanz/base.mjs","../packages/xhear/form.mjs","../packages/xhear/css.mjs","../packages/xhear/dollar.mjs","../packages/xhear/register.mjs","../packages/xhear/render/fake-node.mjs","../packages/xhear/render/condition.mjs","../packages/xhear/render/fill.mjs","../packages/xhear/main.mjs","../packages/xhear/util.mjs","../packages/ofa/inject-host.mjs","../packages/xhear/base.mjs","../packages/drill.js/onion.mjs","../packages/drill.js/use.mjs","../packages/drill.js/config.mjs","../packages/drill.js/main.mjs","../packages/drill.js/component.mjs","../packages/drill.js/base.mjs","../packages/ofa/public.mjs","../packages/ofa/link.mjs","../packages/ofa/draw-template.mjs","../packages/ofa/page.mjs","../packages/ofa/comp.mjs","../packages/ofa/app.mjs","../packages/ofa/extend.mjs","../packages/ofa/context.mjs","../packages/ofa/match-var.mjs","../packages/ofa/if.mjs","../packages/ofa/fill.mjs","../packages/ofa/main.mjs"],"sourcesContent":["// const error_origin = \"http://127.0.0.1:5793/errors\";\nconst error_origin = \"https://ofajs.github.io/ofa-errors/errors\";\n\n// 存放错误信息的数据对象\nconst errors = {\n  load_fail: \"Load {url} failed\",\n  load_fail_status: \"Load {url} failed, status code: {status}\",\n  load_module: \"Load module failed, module address: {url}\",\n  no_alias: \"No alias found: {name}, so '{url}' request is invalid\",\n  config_alias_name_error: \"Error in setting alias, must start with '@'\",\n  alias_already: \"Alias ​​'{name}' already exists\",\n  alias_relate_name:\n    \"Alias ​​cannot be configured with relative address, '{name}': '{path}'\",\n  failed_to_set_data: \"Error in setting attribute value {key}\",\n  failed_to_get_data: \"Error in getting {key}\",\n  nexttick_thread_limit:\n    \"nextTick exceeds thread limit, may have an infinite loop, please try to repair or optimize the function\",\n  not_func: \"The callback parameter of the {name} method must be a Function\",\n  not_found_func:\n    \"The '{name}' method was not found on the target {tag}. Please define the '{name}' method on the 'proto' of the component {tag}\",\n  invalid_key:\n    \"The parameters for registering the '{compName}' component are incorrect. The '{name}' on '{targetName}' is already occupied. Please change '{name}' to another name.\",\n  xhear_wrap_no_parent:\n    \"The target element has no parent element, the warp method cannot be used\",\n  xhear_unwrap_has_siblings:\n    \"The target element contains adjacent nodes, the unwrap method cannot be used\",\n  xhear_reander_err: \"Failed to render the tag '{tag}'\",\n  xhear_register_exists:\n    \"The component '{name}' already exists, and this component cannot be registered repeatedly\",\n  xhear_register_err: \"Error in registering the '{tag}' component\",\n  xhear_validate_tag:\n    \"The registered component name '{str}' is incorrect. For the Web Components naming rules, please refer to: https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define#valid_custom_element_names \",\n  xhear_tag_noline:\n    \"The registered component name '{str}' is incorrect and contains at least one '-' character; Web Components For naming rules, please refer to: https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define#valid_custom_element_names \",\n  xhear_regster_data_noset:\n    \"Error in registering component {tag}, custom data cannot have data of type 'Set' or 'Map'\",\n  xhear_regster_data_nofunc:\n    \"Registration component {tag} error, functions cannot appear in custom data, please put the function in 'proto'; or change '{key}' to '_{key}'\",\n  xhear_fakenode_unclose:\n    \"This is an unclosed FakeNode; use the wrong attribute name: {name}\",\n  xhear_fill_tempname: \"Fill component template '{name}' not found\",\n  xhear_eval:\n    \"Template syntax '{name}' error, expression {name}:{arg0}=\\\"{arg1}\\\"\",\n  xhear_listen_already:\n    \"An old listener already exists, and this element is rendering incorrectly. \",\n  xhear_dbfill_noname:\n    \"Only fill components with the 'name' attribute can be rendered in the fill component\",\n  xhear_temp_exist: \"Template '{name}' already exists\",\n  xhear_sync_no_options:\n    \"Direct use of the 'sync' method is not allowed, it is only used for template rendering\",\n  xhear_sync_object_value:\n    \"Cannot use 'sync' to synchronize values ​​of Object type, target {targetName}\",\n  loading_nothing: \"Loading function has no return content\",\n  app_src_change:\n    \"The app element that has been initialized cannot modify the src attribute\",\n  no_cross_access_func:\n    \"To jump to a page across domains, you must set the access function\",\n  access_return_error: \"Jumping to {src} is not allowed\",\n  load_comp_module:\n    \"Error loading component module, wrong module address: {url}\",\n  comp_registered:\n    \"Component '{tag}' has been registered, and the component cannot be registered again\",\n  \"inject-link-rel\":\n    \"The rel attribute value of the link element in the inject-host component can only be 'stylesheet'\",\n  \"use-data-inject\":\n    \"Please do not use data() on the style element in the inject-host, because it will cause serious performance crisis\",\n  load_page_module: \"Loading page module {url} failed\",\n  page_no_defaults:\n    \"The current page ({src}) has been rendered and cannot be rendered again\",\n  not_page_module:\n    \"{src} is not a page module and cannot be set as the src of the page component\",\n  page_failed: \"Loading page failed: {src}\",\n  fetch_temp_err: \"Page module {url} failed to load template {tempSrc}\",\n  page_wrap_fetch: \"Page {before} failed to get the parent page ({current})\",\n  context_change_name:\n    \"Changing the 'name' of {compName} may cause performance issues, please avoid changing this property\",\n  no_provider:\n    \"The consumer named '{name}' was not captured by the corresponding provider\",\n  page_invalid_key:\n    \"The registration parameters of page {src} are incorrect. '{name}' on '{targetName}' is already taken. Please change '{name}' to another name.\",\n  root_provider_exist:\n    \"An exception occurred in the root provider named '{name}'. The root provider component can only appear once\",\n  root_provider_name_change:\n    \"An exception occurred in the root provider named '{name}'. The root provider component cannot change the 'name' attribute\",\n  change_lm_src:\n    \"{tag} element changes 'src' attribute invalid, this attribute can only be set once.\",\n  error_no_owner:\n    \"This data is incorrect, the owner has not registered this object\",\n  circular_data: \"An object with a circular reference\",\n  fill_type:\n    \"'value' of 'x-fill' must be of type Array, the current value is of type {type}\",\n  fill_key_duplicates: \"The key in the fill component is repeated\",\n  render_el_error: \"Rendering element failed, rendering error is {expr}\",\n  temp_multi_child:\n    \"The template element can only contain one child element. If multiple child elements appear, the child elements will be repackaged in a <div> element\",\n  temp_wrap_child:\n    \"The template '{tempName}' contains {len} child elements, which have been wrapped in a div element with the attribute '{wrapName}'.\",\n  app_noback:\n    \"This is already the first page, and the 'back' operation cannot be performed again\",\n  invalidated_inject_host: \"This element will be invalidated in 'inject-host'\",\n  olink_out_app: \"The element of [olink] is only allowed in o-app\",\n  app_noforward:\n    \"This is the last page, you can no longer perform the 'forward' operation\",\n  need_forwards:\n    \"The target o-app does not allow forward operations, please add the '_forwards' attribute to the target; or in the app config file, add 'export const allowForward = true' \",\n  watchuntil_timeout: \"watchUntil timed out, target value not monitored\",\n};\n\nif (globalThis.navigator && navigator.language) {\n  let langFirst = navigator.language.toLowerCase().split(\"-\")[0];\n\n  if (langFirst === \"zh\" && navigator.language.toLowerCase() !== \"zh-cn\") {\n    langFirst = \"zhft\";\n  }\n\n  // 根据用户的语言首字母加载对应的错误匹配库，匹配开发人员报错信息\n  (async () => {\n    if (!globalThis.localStorage) {\n      // 不支持 localStorage，不加载错误库\n      return;\n    }\n\n    if (globalThis.navigator && !navigator.onLine) {\n      // 网络不可用，不加载错误库\n      return;\n    }\n\n    if (localStorage[\"ofa-errors\"]) {\n      const targetLangErrors = JSON.parse(localStorage[\"ofa-errors\"]);\n      Object.assign(errors, targetLangErrors);\n    }\n\n    const errCacheTime = localStorage[\"ofa-errors-time\"];\n\n    if (!errCacheTime || Date.now() > Number(errCacheTime) + 5 * 60 * 1000) {\n      const targetLangErrors = await fetch(`${error_origin}/${langFirst}.json`)\n        .then((e) => e.json())\n        .catch(() => null);\n\n      if (targetLangErrors) {\n        localStorage[\"ofa-errors\"] = JSON.stringify(targetLangErrors);\n        localStorage[\"ofa-errors-time\"] = Date.now();\n      } else {\n        targetLangErrors = await fetch(`${error_origin}/en.json`)\n          .then((e) => e.json())\n          .catch((error) => {\n            return null;\n          });\n      }\n\n      Object.assign(errors, targetLangErrors);\n    }\n  })();\n}\n\nlet isSafari = false;\nif (globalThis.navigator) {\n  isSafari =\n    navigator.userAgent.includes(\"Safari\") &&\n    !navigator.userAgent.includes(\"Chrome\");\n}\n\n/**\n * 根据键、选项和错误对象生成错误对象。\n *\n * @param {string} key - 错误描述的键。\n * @param {Object} [options] - 映射相关值的选项对象。\n * @param {Error} [error] - 原始错误对象。\n * @returns {Error} 生成的错误对象。\n */\nexport const getErr = (key, options, error) => {\n  let desc = getErrDesc(key, options);\n\n  let errObj;\n  if (error) {\n    if (isSafari) {\n      desc += `\\nCaused by: ${error.toString()}\\n`;\n\n      if (error.stack) {\n        desc += `  ${error.stack.replace(/\\n/g, \"\\n    \")}`;\n      }\n    }\n    errObj = new Error(desc, { cause: error });\n  } else {\n    errObj = new Error(desc);\n  }\n  errObj.code = key;\n  return errObj;\n};\n\n/**\n * 根据键、选项生成错误描述\n *\n * @param {string} key - 错误描述的键。\n * @param {Object} [options] - 映射相关值的选项对象。\n * @returns {string} 生成的错误描述。\n */\nexport const getErrDesc = (key, options) => {\n  if (!errors[key]) {\n    return `Error code: \"${key}\", please go to https://github.com/ofajs/ofa-errors to view the corresponding error information`;\n  }\n\n  let desc = errors[key];\n\n  // 映射相关值\n  if (options) {\n    for (let k in options) {\n      desc = desc.replace(new RegExp(`{${k}}`, \"g\"), options[k]);\n    }\n  }\n\n  return desc;\n};\n","import { getErr, getErrDesc } from \"../ofa-error/main.js\";\n\nexport const getRandomId = () => Math.random().toString(32).slice(2);\n\nconst objectToString = Object.prototype.toString;\nexport const getType = (value) =>\n  objectToString\n    .call(value)\n    .toLowerCase()\n    .replace(/(\\[object )|(])/g, \"\");\n\nexport const isObject = (obj) => {\n  const type = getType(obj);\n  return type === \"array\" || type === \"object\";\n};\n\n// export const isDebug = {\n//   value: null,\n// };\n\n// try {\n//   const fileUrl = import.meta.url;\n//   isDebug.value = fileUrl.includes(\"#debug\");\n// } catch (err) {\n//   isDebug.value = false;\n// }\n\n// const TICKERR = \"nexttick_thread_limit\";\n\nlet asyncsCounter = 0;\nlet afterTimer;\nconst tickSets = new Set();\nexport function nextTick(callback) {\n  clearTimeout(afterTimer);\n  afterTimer = setTimeout(() => {\n    asyncsCounter = 0;\n  });\n\n  // if (isDebug.value) {\n  Promise.resolve().then(() => {\n    asyncsCounter++;\n    if (asyncsCounter > 100000) {\n      const err = getErr(\"nexttick_thread_limit\");\n      console.warn(err, \"lastCall => \", callback);\n      throw err;\n    }\n\n    callback();\n  });\n  return;\n  // }\n\n  // const tickId = `t-${getRandomId()}`;\n  // tickSets.add(tickId);\n  // Promise.resolve().then(() => {\n  //   asyncsCounter++;\n  //   // console.log(\"asyncsCounter => \", asyncsCounter);\n  //   if (asyncsCounter > 50000) {\n  //     tickSets.clear();\n\n  //     const err = getErr(TICKERR);\n  //     console.warn(err, \"lastCall => \", callback);\n  //     throw err;\n  //   }\n  //   if (tickSets.has(tickId)) {\n  //     callback();\n  //     tickSets.delete(tickId);\n  //   }\n  // });\n  // return tickId;\n}\n\n// export const clearTick = (id) => tickSets.delete(id);\n\nexport function debounce(func, wait = 0) {\n  let timeout = null;\n  let hisArgs = [];\n\n  return function (...args) {\n    hisArgs.push(...args);\n\n    if (wait > 0) {\n      clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        func.call(this, hisArgs);\n        hisArgs = [];\n        timeout = null;\n      }, wait);\n    } else {\n      if (timeout === null) {\n        timeout = 1;\n        nextTick(() => {\n          timeout = null;\n          const args = hisArgs.slice();\n          hisArgs = [];\n          func.call(this, args);\n        });\n      }\n    }\n  };\n}\n\n// Enhanced methods for extending objects\nexport const extend = (_this, proto, descriptor = {}) => {\n  [\n    ...Object.getOwnPropertyNames(proto),\n    ...Object.getOwnPropertySymbols(proto),\n  ].forEach((k) => {\n    const result = Object.getOwnPropertyDescriptor(proto, k);\n    const { configurable, enumerable, writable, get, set, value } = result;\n\n    if (\"value\" in result) {\n      if (_this.hasOwnProperty(k)) {\n        _this[k] = value;\n      } else {\n        Object.defineProperty(_this, k, {\n          enumerable,\n          configurable,\n          writable,\n          ...descriptor,\n          value,\n        });\n      }\n    } else {\n      Object.defineProperty(_this, k, {\n        enumerable,\n        configurable,\n        ...descriptor,\n        get,\n        set,\n      });\n    }\n  });\n\n  return _this;\n};\n\n// 检测 Proxy 是否被撤销的函数\nexport function dataRevoked(proxyToCheck) {\n  try {\n    // 尝试对 Proxy 做一个无害的操作，例如获取原型\n    Object.getPrototypeOf(proxyToCheck);\n    return false; // 如果没有抛出错误，则 Proxy 没有被撤销\n  } catch (error) {\n    if (error instanceof TypeError) {\n      return true; // 如果抛出了 TypeError，则 Proxy 已经被撤销\n    }\n    // throw error; // 抛出其他类型的错误\n    return false;\n  }\n}\n","import { getErr } from \"../ofa-error/main.js\";\nimport { getType } from \"../stanz/public.mjs\";\n\nexport const isFunction = (val) => getType(val).includes(\"function\");\n\nexport const hyphenToUpperCase = (str) =>\n  str.replace(/-([a-z])/g, (match, p1) => {\n    return p1.toUpperCase();\n  });\n\nexport function capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport const isArrayEqual = (arr1, arr2) => {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, len = arr1.length; i < len; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const toDashCase = (str) => {\n  return str.replace(/[A-Z]/g, function (match) {\n    return \"-\" + match.toLowerCase();\n  });\n};\n\n// Determine if an element is eligible\nexport const meetsEle = (ele, expr) => {\n  const temp = document.createElement(\"template\");\n  temp.content.append(ele.cloneNode());\n  return !!temp.content.querySelector(expr);\n};\n\nexport function isEmptyObject(obj) {\n  if (!obj) {\n    return false;\n  }\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport const removeArrayValue = (arr, target) => {\n  const index = arr.indexOf(target);\n  if (index > -1) {\n    arr.splice(index, 1);\n  }\n};\n\nexport const searchEle = (el, expr) => {\n  if (el instanceof HTMLTemplateElement) {\n    return Array.from(el.content.querySelectorAll(expr));\n  }\n  return Array.from(el.querySelectorAll(expr));\n};\n\nexport function mergeObjects(obj1, obj2) {\n  for (let key of Object.keys(obj1)) {\n    if (!obj2.hasOwnProperty(key)) {\n      delete obj1[key];\n    }\n  }\n\n  for (let [key, value] of Object.entries(obj2)) {\n    obj1[key] = value;\n  }\n}\n\nexport const isSafariBrowser = () =>\n  /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n","import { getRandomId, debounce, dataRevoked } from \"./public.mjs\";\nimport { WATCHS } from \"./main.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\nconst { assign, freeze } = Object;\n\nclass Watcher {\n  constructor(opts) {\n    assign(this, opts);\n    freeze(this);\n  }\n\n  hasModified(k) {\n    if (this.type === \"array\") {\n      return this.path.includes(this.currentTarget.get(k));\n    }\n\n    const keys = k.split(\".\");\n\n    if (this.currentTarget === this.target && this.name === keys[0]) {\n      return true;\n    }\n\n    const modifieds = getModifieds(this, keys);\n\n    const positionIndex = modifieds.indexOf(this.target);\n    if (positionIndex > -1) {\n      const currentKeys = keys.slice(positionIndex + 1);\n\n      if (!currentKeys.length) {\n        // This is listening for changes in the child object itself\n        return true;\n      }\n\n      return this.name === currentKeys[0];\n    }\n\n    // Data belonging to the chain of change\n    return this.path.includes(this.currentTarget[k]);\n  }\n\n  hasReplaced(k) {\n    if (this.type !== \"set\") {\n      return false;\n    }\n\n    const keys = k.split(\".\");\n\n    if (this.target === this.currentTarget && this.name === keys[0]) {\n      return true;\n    }\n\n    const modifieds = getModifieds(this, keys);\n\n    const positionIndex = modifieds.indexOf(this.target);\n\n    if (positionIndex > -1) {\n      const currentKeys = keys.slice(positionIndex + 1);\n\n      return currentKeys[0] === this.name;\n    }\n\n    return false;\n  }\n}\n\nconst getModifieds = (_this, keys) => {\n  const modifieds = [];\n\n  const cloneKeys = keys.slice();\n  let target = _this.currentTarget;\n  while (cloneKeys.length) {\n    const targetKey = cloneKeys.shift();\n    if (target) {\n      target = target[targetKey];\n    }\n\n    modifieds.push(target);\n  }\n\n  return modifieds;\n};\n\nclass Watchers extends Array {\n  constructor(arr) {\n    super(...arr);\n  }\n\n  hasModified(key) {\n    return this.some((e) => e.hasModified(key));\n  }\n\n  hasReplaced(key) {\n    return this.some((e) => e.hasReplaced(key));\n  }\n}\n\nexport const emitUpdate = ({\n  type,\n  currentTarget,\n  target,\n  name,\n  value,\n  oldValue,\n  args,\n  path = [],\n}) => {\n  if (path && path.includes(currentTarget)) {\n    const err = getErr(\"circular_data\");\n\n    console.warn(err, {\n      currentTarget,\n      target,\n      path,\n    });\n\n    return;\n  }\n\n  let options = {\n    type,\n    target,\n    name,\n    oldValue,\n    value,\n  };\n\n  if (type === \"array\") {\n    delete options.value;\n    options.args = args;\n  }\n\n  if (currentTarget._hasWatchs) {\n    const watcher = new Watcher({\n      currentTarget,\n      ...options,\n      path: [...path],\n    });\n\n    currentTarget[WATCHS].forEach((func) => {\n      func(watcher);\n    });\n  }\n\n  currentTarget._update &&\n    currentTarget.owner.forEach((parent) => {\n      emitUpdate({\n        currentTarget: parent,\n        ...options,\n        path: [currentTarget, ...path],\n      });\n    });\n};\n\nexport default {\n  watch(callback) {\n    if (!(callback instanceof Function)) {\n      throw getErr(\"not_func\", { name: \"watch\" });\n    }\n\n    const wid = \"w-\" + getRandomId();\n\n    this[WATCHS].set(wid, callback);\n\n    return wid;\n  },\n\n  unwatch(wid) {\n    return this[WATCHS].delete(wid);\n  },\n\n  watchTick(callback, wait) {\n    if (!(callback instanceof Function)) {\n      throw getErr(\"not_func\", { name: \"watchTick\" });\n    }\n\n    return this.watch(\n      debounce((arr) => {\n        if (dataRevoked(this)) {\n          // console.warn(`The revoked object cannot use watchTick : `, this);\n          return;\n        }\n        arr = arr.filter((e) => {\n          try {\n            e.path.forEach((item) => item.xid);\n          } catch (err) {\n            return false;\n          }\n\n          return true;\n        });\n\n        callback(new Watchers(arr));\n      }, wait || 0)\n    );\n  },\n  // For manual use of emitUpdate\n  refresh(opts) {\n    const options = {\n      ...opts,\n      type: \"refresh\",\n      target: this,\n      currentTarget: this,\n    };\n    emitUpdate(options);\n  },\n  watchUntil(func, outTime = 30000) {\n    return new Promise((resolve, reject) => {\n      let f;\n      let timer;\n      const tid = this.watch(\n        (f = () => {\n          const bool = func();\n          if (bool) {\n            clearTimeout(timer);\n            this.unwatch(tid);\n            resolve(this);\n          }\n        })\n      );\n\n      timer = setTimeout(() => {\n        this.unwatch(tid);\n        const err = getErr(\"watchuntil_timeout\");\n        console.warn(err, func, this);\n        reject(err);\n      }, outTime);\n\n      f();\n    });\n  },\n};\n","import { clearOwner } from \"./accessor.mjs\";\nimport { SELF, PROXY, isxdata } from \"./main.mjs\";\nimport { isObject } from \"./public.mjs\";\nimport { emitUpdate } from \"./watch.mjs\";\n\nconst mutatingMethods = [\n  \"push\",\n  \"pop\",\n  \"shift\",\n  \"unshift\",\n  \"splice\",\n  \"reverse\",\n  \"sort\",\n  \"fill\",\n  \"copyWithin\",\n];\n\nconst holder = Symbol(\"placeholder\");\n\nfunction compareArrays(oldArray, newArray) {\n  const backupNewArray = Array.from(newArray);\n  const backupOldArray = Array.from(oldArray);\n  const deletedItems = [];\n  const addedItems = new Map();\n\n  const oldLen = oldArray.length;\n  for (let i = 0; i < oldLen; i++) {\n    const oldItem = oldArray[i];\n    const newIndex = backupNewArray.indexOf(oldItem);\n    if (newIndex > -1) {\n      backupNewArray[newIndex] = holder;\n    } else {\n      deletedItems.push(oldItem);\n    }\n  }\n\n  const newLen = newArray.length;\n  for (let i = 0; i < newLen; i++) {\n    const newItem = newArray[i];\n    const oldIndex = backupOldArray.indexOf(newItem);\n    if (oldIndex > -1) {\n      backupOldArray[oldIndex] = holder;\n    } else {\n      addedItems.set(i, newItem);\n    }\n  }\n\n  return { deletedItems, addedItems };\n}\n\nconst fn = {};\n\nconst arrayFn = Array.prototype;\n\nmutatingMethods.forEach((methodName) => {\n  if (arrayFn[methodName]) {\n    fn[methodName] = function (...args) {\n      const backupArr = Array.from(this);\n\n      const reval = arrayFn[methodName].apply(this[SELF], args);\n\n      const { deletedItems, addedItems } = compareArrays(backupArr, this);\n\n      // Refactoring objects as proxy instances\n      for (let [key, value] of addedItems) {\n        if (isxdata(value)) {\n          value._owner.push(this);\n        } else if (isObject(value)) {\n          this.__unupdate = 1;\n          this[key] = value;\n          delete this.__unupdate;\n        }\n      }\n\n      for (let item of deletedItems) {\n        clearOwner(item, this);\n      }\n\n      emitUpdate({\n        type: \"array\",\n        currentTarget: this,\n        target: this,\n        args,\n        name: methodName,\n        oldValue: backupArr,\n      });\n\n      if (reval === this[SELF]) {\n        return this[PROXY];\n      }\n\n      return reval;\n    };\n  }\n});\n\n// Object.getOwnPropertyNames(Array.prototype).forEach((methodName) => {\n[\"concat\", \"filter\", \"slice\", \"flatMap\", \"map\"].forEach((methodName) => {\n  if (methodName === \"constructor\" || mutatingMethods.includes(methodName)) {\n    return;\n  }\n\n  const oldFunc = Array.prototype[methodName];\n  if (oldFunc instanceof Function) {\n    fn[methodName] = function (...args) {\n      return oldFunc.call(Array.from(this), ...args);\n    };\n  }\n});\n\nexport default fn;\n","import { extend, getRandomId } from \"./public.mjs\";\nimport { handler as stanzHandler } from \"./accessor.mjs\";\nimport arrayFn from \"./array.mjs\";\nimport watchFn from \"./watch.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\nconst { defineProperties, getOwnPropertyDescriptor, entries } = Object;\n\nexport const SELF = Symbol(\"self\");\nexport const PROXY = Symbol(\"proxy\");\nexport const WATCHS = Symbol(\"watchs\");\nexport const ISXDATA = Symbol(\"isxdata\");\n\nexport const isxdata = (val) => val && !!val[ISXDATA];\n\nexport function constructor(data, handler = stanzHandler) {\n  // const proxySelf = new Proxy(this, handler);\n  let { proxy: proxySelf, revoke } = Proxy.revocable(this, handler);\n\n  // Determines the properties of the listener bubble\n  proxySelf._update = 1;\n\n  let watchs;\n\n  defineProperties(this, {\n    xid: { value: data.xid || getRandomId() },\n    // Save all parent objects\n    _owner: {\n      value: [],\n    },\n    owner: {\n      configurable: true,\n      get() {\n        return new Set(this._owner);\n      },\n    },\n    [ISXDATA]: {\n      value: true,\n    },\n    [SELF]: {\n      configurable: true,\n      get: () => this,\n    },\n    [PROXY]: {\n      configurable: true,\n      get: () => proxySelf,\n    },\n    // Save the object of the listener function\n    [WATCHS]: {\n      get: () => watchs || (watchs = new Map()),\n    },\n    _hasWatchs: {\n      get: () => !!watchs,\n    },\n    _revoke: {\n      value: revoke,\n    },\n    __init_is_array: {\n      value: Array.isArray(data),\n    },\n  });\n\n  Object.keys(data).forEach((key) => {\n    const descObj = getOwnPropertyDescriptor(data, key);\n    let { value, get, set } = descObj;\n\n    if (get || set) {\n      defineProperties(this, {\n        [key]: descObj,\n      });\n    } else {\n      // Set the function directly\n      proxySelf[key] = value;\n    }\n  });\n\n  return proxySelf;\n}\n\nexport default class Stanz extends Array {\n  constructor(data, options) {\n    // options是被继承的类库使用的参数，当前stanz不需要使用\n    super();\n\n    return constructor.call(this, data);\n  }\n\n  // This method is still in the experimental period\n  revoke() {\n    const self = this[SELF];\n\n    if (self._onrevokes) {\n      self._onrevokes.forEach((f) => f());\n      self._onrevokes.length = 0;\n    }\n\n    self.__unupdate = 1;\n\n    self[WATCHS].clear();\n\n    entries(this).forEach(([name, value]) => {\n      if (isxdata(value)) {\n        this[name] = null;\n      }\n    });\n\n    self._owner.forEach((parent) => {\n      entries(parent).forEach(([name, value]) => {\n        if (value === this) {\n          parent[name] = null;\n        }\n      });\n    });\n\n    delete self[SELF];\n    delete self[PROXY];\n    self._revoke();\n  }\n\n  toJSON() {\n    let obj = {};\n\n    let isPureArray = true;\n    let maxId = -1;\n\n    const initIsArray = this.__init_is_array;\n\n    Object.keys(this).forEach((k) => {\n      let val = this[k];\n\n      if (!/\\D/.test(k)) {\n        k = parseInt(k);\n        if (k > maxId) {\n          maxId = k;\n        }\n      } else {\n        isPureArray = false;\n      }\n\n      if (isxdata(val)) {\n        val = val.toJSON();\n      }\n\n      obj[k] = val;\n    });\n\n    if (isPureArray) {\n      obj.length = maxId + 1;\n      obj = Array.from(obj);\n\n      if (!obj.length && !initIsArray) {\n        // 初始化不是数组，就是对象\n        obj = {};\n      }\n    }\n    const xid = this.xid;\n    defineProperties(obj, {\n      xid: {\n        get: () => xid,\n      },\n    });\n\n    return obj;\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n\n  extend(obj, desc) {\n    return extend(this, obj, desc);\n  }\n\n  get(key) {\n    if (/\\./.test(key)) {\n      const keys = key.split(\".\");\n      let target = this;\n      for (let i = 0, len = keys.length; i < len; i++) {\n        try {\n          target = target[keys[i]];\n        } catch (error) {\n          const err = getErr(\n            \"failed_to_get_data\",\n            {\n              key: keys.slice(0, i).join(\".\"),\n            },\n            error\n          );\n\n          console.warn(err, {\n            key,\n            self: this,\n          });\n\n          throw err;\n        }\n      }\n\n      return target;\n    }\n\n    return this[key];\n  }\n  set(key, value) {\n    if (/\\./.test(key)) {\n      const keys = key.split(\".\");\n      const lastKey = keys.pop();\n      let target = this;\n      for (let i = 0, len = keys.length; i < len; i++) {\n        try {\n          target = target[keys[i]];\n        } catch (error) {\n          const err = getErr(\n            \"failed_to_get_data\",\n            {\n              key: keys.slice(0, i).join(\".\"),\n            },\n            error\n          );\n\n          console.warn(err, {\n            key,\n            self: this,\n          });\n\n          throw err;\n        }\n      }\n\n      return (target[lastKey] = value);\n    }\n\n    return (this[key] = value);\n  }\n}\n\nStanz.prototype.extend(\n  { ...watchFn, ...arrayFn },\n  {\n    enumerable: false,\n  }\n);\n","import { isObject } from \"./public.mjs\";\nimport Stanz, { PROXY, isxdata } from \"./main.mjs\";\nimport { emitUpdate } from \"./watch.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\n\nconst { defineProperties } = Object;\n\nexport const setData = ({ target, key, value, receiver, type, succeed }) => {\n  const oldValue = receiver[key];\n\n  let data = value;\n  if (isxdata(data)) {\n    if (oldValue === value) {\n      return true;\n    }\n    data._owner.push(receiver);\n  } else if (isObject(value)) {\n    const desc = Object.getOwnPropertyDescriptor(target, key);\n    if (!desc || desc.hasOwnProperty(\"value\")) {\n      data = new (target.__OriginStanz || Stanz)(value, {\n        owner: receiver,\n      });\n\n      data._owner.push(receiver);\n    }\n  }\n\n  const isSame = oldValue === value;\n\n  if (!isSame && isxdata(oldValue)) {\n    clearOwner(oldValue, receiver);\n  }\n\n  const reval = succeed(data);\n\n  !isSame &&\n    // __unupdate: Let the system not trigger an upgrade, system self-use attribute\n    !target.__unupdate &&\n    emitUpdate({\n      type: type || \"set\",\n      target: receiver,\n      currentTarget: receiver,\n      name: key,\n      value,\n      oldValue,\n    });\n\n  return reval;\n};\n\n// 当数据被移除时，清除 owner 数据\nexport const clearOwner = (targetData, owner) => {\n  if (isxdata(targetData)) {\n    const index = targetData._owner.indexOf(owner);\n    if (index > -1) {\n      targetData._owner.splice(index, 1);\n    } else {\n      const err = getErr(\"error_no_owner\");\n      console.warn(err, {\n        owner,\n        mismatch: targetData,\n      });\n      console.error(err);\n    }\n  }\n};\n\nexport const handler = {\n  set(target, key, value, receiver) {\n    if (typeof key === \"symbol\") {\n      return Reflect.set(target, key, value, receiver);\n    }\n\n    // Set properties with _ prefix directly\n    if (/^_/.test(key)) {\n      if (!target.hasOwnProperty(key)) {\n        defineProperties(target, {\n          [key]: {\n            writable: true,\n            configurable: true,\n            value,\n          },\n        });\n      } else {\n        Reflect.set(target, key, value, receiver);\n      }\n      return true;\n    }\n\n    try {\n      return setData({\n        target,\n        key,\n        value,\n        receiver,\n        succeed(data) {\n          return Reflect.set(target, key, data, receiver);\n        },\n      });\n    } catch (error) {\n      const err = getErr(\n        \"failed_to_set_data\",\n        {\n          key,\n        },\n        error\n      );\n\n      console.warn(err, { target, value });\n\n      throw err;\n    }\n  },\n  deleteProperty(target, key) {\n    if (/^_/.test(key) || typeof key === \"symbol\") {\n      return Reflect.deleteProperty(target, key);\n    }\n\n    return setData({\n      target,\n      key,\n      value: undefined,\n      receiver: target[PROXY],\n      type: \"delete\",\n      succeed() {\n        return Reflect.deleteProperty(target, key);\n      },\n    });\n  },\n};\n","import { eleX } from \"./util.mjs\";\nimport { handler as stanzHandler } from \"../stanz/accessor.mjs\";\n\n// const tempEl = document.createElement(\"template\");\n\nexport const handler = {\n  set(target, key, value, receiver) {\n    if (!/\\D/.test(String(key))) {\n      return Reflect.set(target, key, value, receiver);\n    }\n\n    if (target[key] === value) {\n      // Optimise performance;\n      // fix focus remapping caused by 'text' being reset\n      return true;\n    }\n\n    if (key === \"html\") {\n      // When setting HTML values that contain single quotes, they become double quotes when set, leading to an infinite loop of updates.\n      // tempEl.innerHTML = value;\n      // value = tempEl.innerHTML;\n\n      // If custom elements are stuffed, the html values may remain inconsistent\n      return Reflect.set(target, key, value, receiver);\n    }\n\n    return stanzHandler.set(target, key, value, receiver);\n  },\n  get(target, key, receiver) {\n    if (!/\\D/.test(String(key))) {\n      return eleX(target.ele.children[key]);\n    }\n\n    return Reflect.get(target, key, receiver);\n  },\n  ownKeys(target) {\n    let keys = Reflect.ownKeys(target);\n    let len = target.ele.children.length;\n    for (let i = 0; i < len; i++) {\n      keys.push(String(i));\n    }\n    return keys;\n  },\n  getOwnPropertyDescriptor(target, key) {\n    if (typeof key === \"string\" && !/\\D/.test(key)) {\n      return {\n        enumerable: true,\n        configurable: true,\n      };\n    }\n    return Reflect.getOwnPropertyDescriptor(target, key);\n  },\n};\n","import { getErr, getErrDesc } from \"../../ofa-error/main.js\";\nimport { getRandomId, dataRevoked } from \"../../stanz/public.mjs\";\nimport stanzProto from \"../../stanz/watch.mjs\";\nimport { isxdata } from \"../../stanz/main.mjs\";\n\nimport {\n  isFunction,\n  hyphenToUpperCase,\n  meetsEle,\n  isEmptyObject,\n  searchEle,\n  removeArrayValue as remove,\n} from \"../public.mjs\";\nimport { eleX } from \"../util.mjs\";\n\nexport const renderExtends = {\n  beforeConvert() {},\n  afterConvert() {},\n  beforeRender() {},\n  render() {},\n};\n\nconst getRevokes = (target) => target.__revokes || (target.__revokes = []);\nconst addRevoke = (target, revoke) => getRevokes(target).push(revoke);\n\nconst convertToFunc = (expr, data, opts) => {\n  const funcStr = `\nconst dataRevoked = ${dataRevoked.toString()};\nconst [$event] = $args;\nconst {data, errCall} = this;\nif(dataRevoked(data)){\n  return;\n}\ntry{\n  with(data){\n    return ${expr};\n  }\n}catch(error){\n  if(data.ele && !data.ele.isConnected){\n    return;\n  }\n  if(errCall){\n    const result = errCall(error);\n    if(result !== false){\n      console.error(error);\n    }\n  }else{\n    console.error(error);\n  }\n}\n`;\n  return new Function(\"...$args\", funcStr).bind({ data, ...opts });\n};\n\nexport function render({\n  data,\n  target,\n  template,\n  temps,\n  isRenderSelf, // 是否将当前target元素也渲染处理\n  ...otherOpts\n}) {\n  const content = template && template.innerHTML;\n\n  if (content) {\n    target.innerHTML = content;\n  }\n\n  renderExtends.beforeRender({\n    target,\n  });\n\n  const texts = searchEle(target, \"xtext\");\n\n  const tasks = [];\n  const revokes = getRevokes(target);\n\n  // Styles with data() function to monitor and correct rendering\n  searchEle(target, \"style\").forEach((el) => {\n    const originStyle = el.innerHTML;\n\n    if (/data\\(.+\\)/.test(originStyle)) {\n      const matchs = Array.from(new Set(originStyle.match(/data\\(.+?\\)/g))).map(\n        (dataExpr) => {\n          const expr = dataExpr.replace(/data\\((.+)\\)/, \"$1\");\n          const func = convertToFunc(expr, data);\n\n          return {\n            dataExpr,\n            func,\n          };\n        }\n      );\n\n      const renderStyle = () => {\n        let afterStyle = originStyle;\n\n        matchs.forEach(({ dataExpr, func }) => {\n          afterStyle = afterStyle.replace(dataExpr, func());\n        });\n\n        if (el.innerHTML !== afterStyle) {\n          el.innerHTML = afterStyle;\n        }\n      };\n      tasks.push(renderStyle);\n\n      const revokeStyle = () => {\n        matchs.length = 0;\n        remove(tasks, renderStyle);\n        remove(getRevokes(el), revokeStyle);\n        remove(revokes, revokeStyle);\n      };\n\n      addRevoke(el, revokeStyle);\n      revokes.push(revokeStyle);\n    }\n  });\n\n  // Render text nodes\n  texts.forEach((el) => {\n    const textEl = document.createTextNode(\"\");\n    const { parentNode } = el;\n    parentNode.insertBefore(textEl, el);\n    parentNode.removeChild(el);\n\n    const func = convertToFunc(el.getAttribute(\"expr\"), data);\n    const renderFunc = () => {\n      const content = func();\n      if (textEl.textContent !== String(content)) {\n        textEl.textContent = content;\n      }\n    };\n    tasks.push(renderFunc);\n\n    const textRevoke = () => {\n      remove(revokes, textRevoke);\n      remove(tasks, renderFunc);\n      remove(getRevokes(textEl), textRevoke);\n    };\n    revokes.push(textRevoke);\n    addRevoke(textEl, textRevoke);\n  });\n\n  const eles = searchEle(target, `[x-bind-data]`);\n\n  if (isRenderSelf && meetsEle(target, `[x-bind-data]`)) {\n    eles.unshift(target);\n  }\n\n  // Render properties based on expressions\n  eles.forEach((el) => {\n    const bindData = JSON.parse(el.getAttribute(\"x-bind-data\"));\n\n    const $el = eleX(el);\n\n    for (let [actionName, arr] of Object.entries(bindData)) {\n      arr.forEach((args) => {\n        try {\n          const { always } = $el[actionName];\n          let afterArgs = [];\n\n          let workResult;\n\n          const work = () => {\n            const [key, expr] = args;\n\n            const func = convertToFunc(expr, data, {\n              errCall: (error) => {\n                const errorExpr = `:${key}=\"${expr}\"`;\n                const err = getErr(\n                  \"render_el_error\",\n                  {\n                    expr: errorExpr,\n                  },\n                  error\n                );\n\n                console.warn(err, {\n                  target: $el.ele,\n                  errorExpr,\n                });\n                console.error(err);\n\n                return false;\n              },\n            });\n\n            afterArgs = [key, func];\n\n            const reval = $el[actionName](...afterArgs, {\n              actionName,\n              target: $el,\n              data,\n              beforeArgs: args,\n              args: afterArgs,\n            });\n\n            renderExtends.render({\n              step: \"refresh\",\n              args,\n              name: actionName,\n              target: $el,\n            });\n\n            return reval;\n          };\n\n          let clearRevs = () => {\n            const { revoke: methodRevoke } = $el[actionName];\n\n            if (methodRevoke) {\n              methodRevoke({\n                actionName,\n                target: $el,\n                data,\n                beforeArgs: args,\n                args: afterArgs,\n                result: workResult,\n              });\n            }\n\n            remove(revokes, clearRevs);\n            remove(getRevokes(el), clearRevs);\n            remove(tasks, work);\n            clearRevs = null;\n          };\n\n          if (always) {\n            // Run every data update\n            tasks.push(work);\n          } else {\n            workResult = work();\n          }\n\n          revokes.push(clearRevs);\n          if (el !== target) {\n            addRevoke(el, clearRevs);\n          }\n        } catch (error) {\n          const err = getErr(\n            \"xhear_eval\",\n            {\n              name: actionName,\n              arg0: args[0],\n              arg1: args[1],\n            },\n            error\n          );\n          console.warn(err, el);\n          throw err;\n        }\n      });\n    }\n\n    el.removeAttribute(\"x-bind-data\");\n\n    el._bindingRendered = true;\n    el.dispatchEvent(new Event(\"binding-rendered\"));\n  });\n\n  if (!target.__render_temps && !isEmptyObject(temps)) {\n    target.__render_temps = temps;\n  }\n\n  if (target.__render_data && target.__render_data !== data) {\n    const err = getErr(\"xhear_listen_already\");\n\n    console.warn(err, {\n      element: target,\n      old: target.__render_data,\n      new: data,\n    });\n\n    throw err;\n  }\n\n  target.__render_data = data;\n\n  if (tasks.length) {\n    tasks.forEach((f) => f());\n\n    // After the data changes, traverse the rendering tasks\n    const wid = data.watchTick((e) => {\n      if (tasks.length) {\n        tasks.forEach((f) => f());\n      } else {\n        data.unwatch(wid);\n      }\n    });\n  }\n\n  renderExtends.render({ step: \"init\", target });\n}\n\nconst convertEl = (el) => {\n  const { tagName } = el;\n\n  if (tagName === \"TEMPLATE\") {\n    return;\n  }\n\n  if (tagName) {\n    // Converting elements\n    const obj = {};\n\n    Array.from(el.attributes).forEach((attr) => {\n      const matchData = /(.*):(.+)/.exec(attr.name);\n\n      if (!matchData) {\n        return;\n      }\n\n      let [, actionName, param0] = matchData;\n\n      if (!actionName) {\n        actionName = \"prop\";\n      }\n\n      const targetActions = obj[actionName] || (obj[actionName] = []);\n\n      targetActions.push([param0, attr.value]);\n\n      el.removeAttribute(attr.name);\n    });\n\n    const keys = Object.keys(obj);\n\n    if (keys.length) {\n      el.setAttribute(\"x-bind-data\", JSON.stringify(obj));\n    }\n  }\n\n  Array.from(el.children).forEach(convertEl);\n};\n\nconst searchTemp = (template, expr, func) => {\n  const rearr = Array.from(template.content.querySelectorAll(expr));\n\n  if (func) {\n    rearr.forEach(func);\n  }\n\n  return rearr;\n};\n\nlet isWarned;\n\nexport const convert = (template) => {\n  let temps = {};\n  const codeEls = {};\n\n  renderExtends.beforeConvert({\n    template,\n  });\n\n  searchTemp(template, \"code\", (code) => {\n    const cid = getRandomId();\n    code.setAttribute(\"code-id\", cid);\n\n    codeEls[cid] = code.innerHTML;\n    code.innerHTML = \"\";\n  });\n\n  template.innerHTML = template.innerHTML.replace(\n    /{{(.+?)}}/g,\n    (str, match) => {\n      return `<xtext expr=\"${match}\"></xtext>`;\n    }\n  );\n\n  const tempName = template.getAttribute(\"name\");\n\n  if (tempName) {\n    const tempChilds = template.content.children;\n    if (tempChilds.length > 1) {\n      if (!isWarned) {\n        const err = getErr(\"temp_multi_child\");\n        console.warn(err, {\n          content: template.content,\n        });\n        isWarned = 1;\n      }\n\n      const wrapName = `wrapper-${tempName}`;\n      template.innerHTML = `<div ${wrapName} style=\"display:contents\">${template.innerHTML}</div>`;\n      console.warn(\n        getErr(\"temp_wrap_child\", {\n          tempName,\n          len: tempChilds.length,\n          wrapName,\n        })\n      );\n    }\n    temps[tempName] = template;\n    template.remove();\n  }\n\n  searchTemp(template, \"x-fill:not([name])\", (fillEl) => {\n    if (fillEl.querySelector(\"x-fill:not([name])\")) {\n      throw getErr(\"xhear_dbfill_noname\");\n    }\n\n    if (fillEl.innerHTML.trim()) {\n      const tid = `t${getRandomId()}`;\n      fillEl.setAttribute(\"name\", tid);\n\n      const temp = document.createElement(\"template\");\n      temp.setAttribute(\"name\", tid);\n      temp.innerHTML = fillEl.innerHTML;\n      fillEl.innerHTML = \"\";\n      fillEl.appendChild(temp);\n    }\n  });\n\n  searchTemp(template, \"x-if,x-else-if,x-else\", (condiEl) => {\n    const firstChild = condiEl.children[0];\n    if (!firstChild || firstChild.tagName !== \"TEMPLATE\") {\n      condiEl.innerHTML = `<template condition>${condiEl.innerHTML}</template>`;\n    }\n  });\n\n  searchTemp(template, \"template\", (e) => {\n    const newTemps = convert(e);\n\n    Object.keys(newTemps).forEach((tempName) => {\n      if (temps[tempName]) {\n        throw getErr(\"xhear_temp_exist\", {\n          name: tempName,\n        });\n      }\n    });\n\n    temps = { ...temps, ...newTemps };\n  });\n\n  Array.from(template.content.children).forEach((el) => convertEl(el));\n\n  // Restore the contents of the code\n  for (let [key, value] of Object.entries(codeEls)) {\n    searchTemp(template, `[code-id=\"${key}\"]`, (el) => {\n      el.removeAttribute(\"code-id\");\n      // el.innerHTML = htmlEncode(value);\n      el.innerHTML = value;\n    });\n  }\n\n  renderExtends.afterConvert({\n    template,\n    temps,\n  });\n\n  return temps;\n};\n\nconst getVal = (val) => {\n  if (isFunction(val)) {\n    return val();\n  }\n\n  return val;\n};\n\nconst defaultData = {\n  prop(...args) {\n    let [name, value] = args;\n\n    if (args.length === 1) {\n      return this[name];\n    }\n\n    value = getVal(value);\n    name = hyphenToUpperCase(name);\n\n    this.set(name, value);\n  },\n  attr(...args) {\n    let [name, value] = args;\n\n    const { ele } = this;\n\n    if (args.length === 1) {\n      return ele.getAttribute(name);\n    }\n\n    value = getVal(value);\n\n    if (value === false) {\n      value = null;\n    } else if (value === true) {\n      value = \"\";\n    }\n\n    if (value === null || value === undefined) {\n      ele.removeAttribute(name);\n    } else if (ele.getAttribute(name) != value) {\n      ele.setAttribute(name, value);\n    }\n  },\n  class(...args) {\n    let [name, value] = args;\n\n    if (args.length === 1) {\n      return this.ele.classList.contains(name);\n    }\n\n    value = getVal(value);\n\n    if (value) {\n      this.ele.classList.add(name);\n    } else {\n      this.ele.classList.remove(name);\n    }\n  },\n  watch(...args) {\n    if (args.length < 3) {\n      return stanzProto.watch.apply(this, args);\n    }\n\n    const options = args[2];\n    const { beforeArgs, data: target } = options;\n    const [selfPropName, targetPropName] = beforeArgs;\n    const propName = hyphenToUpperCase(selfPropName);\n\n    const setData = () => {\n      let val = this.get(propName);\n      target.set(targetPropName, val);\n    };\n\n    const wid = this.watch((e) => {\n      if (e.hasModified(propName)) {\n        setData();\n      }\n    });\n\n    // Initialize once\n    setData();\n\n    return () => {\n      this.unwatch(wid);\n    };\n  },\n};\n\ndefaultData.prop.always = true;\ndefaultData.attr.always = true;\ndefaultData.class.always = true;\n\ndefaultData.prop.revoke = ({ target, args, $ele, data }) => {\n  const propName = args[0];\n\n  const oldVal = target.get(propName);\n  if (isxdata(oldVal)) {\n    target.set(propName, {});\n  }\n};\n\ndefaultData.watch.revoke = (e) => {\n  e.result();\n  const propName = e.beforeArgs[1];\n\n  const oldVal = e.data.get(propName);\n  if (isxdata(oldVal)) {\n    e.data.set(propName, {});\n  }\n};\n\nexport default defaultData;\n","import { hyphenToUpperCase } from \"../public.mjs\";\nimport { dataRevoked } from \"../../stanz/public.mjs\";\nimport { getErr } from \"../../ofa-error/main.js\";\n\nconst syncFn = {\n  sync(propName, targetName, options) {\n    if (!options) {\n      throw getErr(\"xhear_sync_no_options\");\n    }\n\n    [propName, targetName] = options.beforeArgs;\n\n    propName = hyphenToUpperCase(propName);\n    targetName = hyphenToUpperCase(targetName);\n\n    const { data } = options;\n\n    const val = data.get(targetName);\n\n    if (val instanceof Object) {\n      const err = getErr(\"xhear_sync_object_value\", { targetName });\n      console.warn(err, data);\n      throw err;\n    }\n\n    this[propName] = data.get(targetName);\n\n    const wid1 = this.watch((e) => {\n      if (e.hasModified(propName)) {\n        try {\n          const value = this.get(propName);\n          data.set(targetName, value);\n        } catch (err) {\n          // Errors are reported when a proxy is revoked.\n          // console.warn(err);\n        }\n      }\n    });\n\n    const wid2 = data.watch((e) => {\n      if (e.hasModified(targetName)) {\n        try {\n          const value = data.get(targetName);\n          this.set(propName, value);\n        } catch (err) {\n          // Errors are reported when a proxy is revoked.\n          // console.warn(err);\n        }\n      }\n    });\n\n    return () => {\n      this.unwatch(wid1);\n      if (!dataRevoked(data)) {\n        data.unwatch(wid2);\n      }\n    };\n  },\n};\n\nsyncFn.sync.revoke = (e) => {\n  e.result();\n};\n\nexport default syncFn;\n","import { getErr } from \"../ofa-error/main.js\";\n\nfunction getBindOptions(name, func, options) {\n  let revoker;\n  if (options) {\n    const beforeValue = options.beforeArgs[1];\n\n    if (!/[^\\d\\w_\\$\\.]/.test(beforeValue)) {\n      func = options.data.get(beforeValue);\n      if (!func) {\n        const tag = options.data.tag;\n        const err = getErr(\"not_found_func\", {\n          name: beforeValue,\n          tag: tag ? `\"${tag}\"` : \"\",\n        });\n        console.warn(err, \" target =>\", options.data);\n        throw err;\n      }\n      func = func.bind(options.data);\n    }\n\n    revoker = () => this.ele.removeEventListener(name, func);\n  }\n\n  return { revoker, name, func };\n}\n\nconst eventFn = {\n  on(...args) {\n    const { revoker, name, func } = getBindOptions.call(this, ...args);\n\n    this.ele.addEventListener(name, func);\n\n    if (revoker) {\n      return revoker;\n    }\n\n    return this;\n  },\n  one(...args) {\n    const { revoker, name, func } = getBindOptions.call(this, ...args);\n\n    let callback = (e) => {\n      this.off(name, callback);\n      func(e);\n    };\n\n    this.ele.addEventListener(name, callback);\n\n    if (revoker) {\n      return revoker;\n    }\n\n    return this;\n  },\n  off(name, func) {\n    this.ele.removeEventListener(name, func);\n    return this;\n  },\n  emit(name, opts) {\n    const options = { ...opts };\n\n    let data;\n    if (options.hasOwnProperty(\"data\")) {\n      data = options.data;\n      delete options.data;\n    }\n\n    let event;\n\n    if (name instanceof Event) {\n      event = name;\n    } else if (name) {\n      event = new Event(name, { bubbles: true, ...options });\n    }\n\n    event.data = data;\n\n    this.ele.dispatchEvent(event);\n\n    return this;\n  },\n};\n\neventFn.on.revoke = (e) => {\n  e.result();\n};\n\neventFn.one.revoke = (e) => {\n  e.result();\n};\n\nexport default eventFn;\n","import { isFunction } from \"./public.mjs\";\nimport { createXEle, eleX } from \"./util.mjs\";\nimport { emitUpdate } from \"../stanz/watch.mjs\";\n\nconst originSplice = (ele, start, count, ...items) => {\n  const { children } = ele;\n  if (start < 0) {\n    start += ele.children.length;\n  }\n\n  if (count === undefined) {\n    count = ele.children.length - start;\n  }\n\n  const removes = [];\n  for (let i = start, len = start + count; i < len; i++) {\n    const target = children[i];\n    removes.push(target);\n  }\n\n  removes.forEach((el) => el && el.remove());\n\n  if (items.length) {\n    const frag = document.createDocumentFragment();\n    items.forEach((e) => frag.append(createXEle(e).ele));\n\n    const positionEle = children[start];\n    if (positionEle) {\n      ele.insertBefore(frag, positionEle);\n    } else {\n      ele.appendChild(frag);\n    }\n  }\n\n  return removes;\n};\n\nconst mutatingMethods = [\n  \"push\",\n  \"pop\",\n  \"shift\",\n  \"unshift\",\n  \"splice\",\n  \"reverse\",\n  \"sort\",\n  \"fill\",\n  \"copyWithin\",\n];\n\nconst likeArrayFn = {\n  push(...args) {\n    const { ele } = this;\n\n    originSplice(ele, ele.children.length, 0, ...args);\n\n    emitUpdate({\n      type: \"array\",\n      currentTarget: this,\n      target: this,\n      args,\n      name: \"push\",\n    });\n\n    return ele.children.length;\n  },\n\n  pop(...args) {\n    const { ele } = this;\n\n    const targets = originSplice(ele, ele.children.length - 1, 1, ...args);\n\n    emitUpdate({\n      type: \"array\",\n      currentTarget: this,\n      target: this,\n      args,\n      name: \"pop\",\n    });\n\n    return eleX(targets[0]);\n  },\n\n  shift(...args) {\n    const { ele } = this;\n\n    const targets = originSplice(ele, 0, 1, ...args);\n\n    emitUpdate({\n      type: \"array\",\n      currentTarget: this,\n      target: this,\n      args,\n      name: \"shift\",\n    });\n\n    return eleX(targets[0]);\n  },\n\n  unshift(...args) {\n    const { ele } = this;\n\n    originSplice(ele, 0, 0, ...args);\n\n    emitUpdate({\n      type: \"array\",\n      currentTarget: this,\n      target: this,\n      args,\n      name: \"unshift\",\n    });\n\n    return ele.children.length;\n  },\n  splice(...args) {\n    const reVal = originSplice(this.ele, ...args);\n\n    emitUpdate({\n      type: \"array\",\n      currentTarget: this,\n      target: this,\n      args,\n      name: \"splice\",\n    });\n\n    return reVal.map(eleX);\n  },\n  reverse(...args) {\n    const childs = Array.from(this.ele.childNodes);\n\n    arrayFn.reverse.call(childs, ...args);\n\n    const frag = document.createDocumentFragment();\n\n    childs.forEach((ele) => {\n      // Identify internal operations to prevent detached corrections\n      ele.__internal = 1;\n      frag.append(ele);\n    });\n\n    this.ele.append(frag);\n\n    childs.forEach((ele) => {\n      delete ele.__internal;\n    });\n\n    emitUpdate({\n      type: \"array\",\n      currentTarget: this,\n      target: this,\n      args,\n      name: \"reverse\",\n    });\n\n    return this;\n  },\n  sort(...args) {\n    const childs = Array.from(this.ele.children).map(eleX);\n\n    arrayFn.sort.call(childs, ...args);\n\n    const frag = document.createDocumentFragment();\n\n    childs.forEach((e) => {\n      e.ele.__internal = 1;\n      frag.append(e.ele);\n    });\n\n    this.ele.append(frag);\n\n    childs.forEach((e) => {\n      delete e.ele.__internal;\n    });\n\n    emitUpdate({\n      type: \"array\",\n      currentTarget: this,\n      target: this,\n      args,\n      name: \"sort\",\n    });\n\n    return this;\n  },\n};\n\nconst arrayFn = Array.prototype;\n\nObject.keys(Object.getOwnPropertyDescriptors(arrayFn)).forEach((key) => {\n  if (\n    key === \"constructor\" ||\n    key === \"length\" ||\n    mutatingMethods.includes(key)\n  ) {\n    return;\n  }\n\n  const targetFunc = arrayFn[key];\n\n  if (isFunction(targetFunc)) {\n    likeArrayFn[key] = function (...args) {\n      return targetFunc.apply(Array.from(this.ele.children).map(eleX), args);\n    };\n  }\n});\n\nexport default class LikeArray {}\n\nfor (let [name, value] of Object.entries(likeArrayFn)) {\n  Object.defineProperty(LikeArray.prototype, name, {\n    value,\n  });\n}\n","import Stanz, { isxdata } from \"./main.mjs\";\n\nconst stanz = (data) => {\n  return new Stanz(data);\n};\n\nObject.assign(stanz, { is: isxdata });\n\nexport default stanz;\n\nexport { stanz, Stanz };\n","import stanz from \"../stanz/base.mjs\";\nimport { emitUpdate } from \"../stanz/watch.mjs\";\nimport { mergeObjects, searchEle } from \"./public.mjs\";\n\nconst { defineProperty, assign } = Object;\n\nconst hasValueEleNames = [\"input\", \"textarea\", \"select\"];\n\nconst setKeys = (keys, $ele) => {\n  const { ele } = $ele;\n\n  keys.forEach((k) => {\n    if (k in ele) {\n      let isNum = false;\n      defineProperty($ele, k, {\n        enumerable: true,\n        get: () => {\n          let val = ele[k];\n          if (isNum) {\n            if (/\\D/.test(val)) {\n              isNum = false;\n            } else {\n              val = Number(val);\n            }\n          }\n          return val;\n        },\n        set: (val) => {\n          isNum = typeof val === \"number\";\n          ele[k] = val;\n        },\n      });\n    }\n  });\n};\n\nconst formEleNames = new Set([\n  ...hasValueEleNames,\n  \"option\",\n  \"button\",\n  \"label\",\n  \"fieldset\",\n  \"legend\",\n  \"form\",\n]);\n\nconst bindProp = ($ele, opts = {}) => {\n  const { name: keyName, type } = opts;\n\n  const { ele } = $ele;\n  let old = ele[keyName];\n\n  $ele.on(type, () => {\n    emitUpdate({\n      type: \"set\",\n      target: $ele,\n      currentTarget: $ele,\n      name: keyName,\n      value: ele[keyName],\n      oldValue: old,\n    });\n\n    old = ele[keyName];\n  });\n};\n\nexport const initFormEle = ($ele) => {\n  const { tag } = $ele;\n\n  if (!formEleNames.has(tag)) {\n    return;\n  }\n\n  setKeys([\"type\", \"name\", \"disabled\"], $ele);\n\n  switch (tag) {\n    case \"input\":\n      initInput($ele);\n      break;\n    case \"textarea\":\n      setKeys([\"value\"], $ele);\n      bindProp($ele, { name: \"value\", type: \"input\" });\n      break;\n    case \"option\":\n      setKeys([\"selected\", \"value\"], $ele);\n      break;\n    case \"select\":\n      {\n        const { ele } = $ele;\n        $ele.__unupdate = 1;\n        $ele.value = ele.value;\n        delete $ele.__unupdate;\n\n        $ele.watch(() => {\n          ele.value = $ele.value;\n        });\n        $ele.on(\"change\", () => {\n          $ele.value = ele.value;\n        });\n      }\n      break;\n  }\n};\n\nconst initInput = ($ele) => {\n  const type = $ele.attr(\"type\");\n\n  switch (type) {\n    case \"file\":\n      setKeys([\"multiple\", \"files\"], $ele);\n      bindProp($ele, { name: \"files\", type: \"change\" });\n      break;\n    case \"checkbox\":\n      setKeys([\"checked\", \"multiple\", \"value\"], $ele);\n      bindProp($ele, { name: \"checked\", type: \"change\" });\n      break;\n    case \"radio\":\n      setKeys([\"checked\", \"value\"], $ele);\n      bindProp($ele, { name: \"checked\", type: \"change\" });\n      break;\n    case \"text\":\n    default:\n      setKeys([\"placeholder\", \"value\"], $ele);\n      bindProp($ele, { name: \"value\", type: \"input\" });\n      break;\n  }\n};\n\nconst getFormData = (target, expr) => {\n  const data = {};\n\n  target.all(expr).forEach(($el) => {\n    const { name, tag, ele } = $el;\n\n    if (tag === \"input\") {\n      switch ($el.type) {\n        case \"checkbox\":\n          if (!(name in data)) {\n            data[name] = [];\n          }\n\n          if (ele.checked) {\n            data[name].push(ele.value);\n          }\n          break;\n        case \"radio\":\n          if (ele.checked) {\n            data[name] = ele.value;\n          }\n          break;\n        case \"file\":\n          data[name] = ele.files;\n          break;\n        default:\n          data[name] = ele.value;\n      }\n    } else if (tag === \"textarea\") {\n      data[name] = ele.value;\n    } else if (tag === \"select\") {\n      const selectedsOpt = searchEle(ele, `option:checked`);\n\n      if (ele.multiple) {\n        data[name] = selectedsOpt.map((e) => e.value || e.textContent);\n      } else {\n        const [e] = selectedsOpt;\n        data[name] = e.value || e.textContent;\n      }\n    } else {\n      // custom element\n      data[name] = $el.value;\n    }\n  });\n\n  return data;\n};\n\nexport default {\n  // This method is still being tested\n  formData(expr, opts = { wait: 200 }) {\n    const data = stanz({});\n\n    assign(data, getFormData(this, expr || \"input,select,textarea\"));\n\n    const wid1 = this.watchTick((e) => {\n      const newData = getFormData(this, expr || \"input,select,textarea\");\n      mergeObjects(data, newData);\n    }, opts.wait);\n\n    const wid2 = data.watchTick((e) => {\n      resetValue(this, expr || \"input,select,textarea\", data);\n    });\n\n    const _this = this;\n\n    const oldRevoke = data.revoke;\n    data.extend({\n      revoke() {\n        _this.unwatch(wid1);\n        data.unwatch(wid2);\n        oldRevoke.call(this);\n      },\n    });\n\n    return data;\n  },\n};\n\nfunction resetValue(el, expr, data) {\n  const eles = el.all(expr);\n\n  Object.keys(data).forEach((name) => {\n    const targets = eles.filter((e) => e.attr(\"name\") === name);\n\n    if (targets.length === 0) {\n      return;\n    }\n\n    const val = data[name];\n    const target = targets[0];\n    const type = target.attr(\"type\");\n    if (targets.length === 1) {\n      let isUseValue = true;\n\n      if (target.tag === \"input\" && (type === \"radio\" || type === \"checkbox\")) {\n        isUseValue = false;\n      }\n\n      if (isUseValue) {\n        if (target.value !== val) {\n          target.value = val;\n        }\n        return;\n      }\n    }\n\n    // checkbox or radio\n    targets.forEach((e) => {\n      switch (e.attr(\"type\")) {\n        case \"radio\":\n          if (e.value === val) {\n            e.checked = true;\n          } else {\n            e.checked = false;\n          }\n          break;\n        case \"checkbox\":\n          e.checked = val.includes(e.value);\n          break;\n      }\n    });\n  });\n}\n","import { getType } from \"../stanz/public.mjs\";\n\nconst cssHandler = {\n  set(target, key, value, receiver) {\n    target._ele.style[key] = value;\n    Reflect.set(target, key, value, receiver);\n    return true;\n  },\n  get(target, key, receiver) {\n    if (key === \"length\") {\n      return 0;\n    }\n\n    if (key.startsWith && key.startsWith(\"--\")) {\n      return getComputedStyle(target._ele).getPropertyValue(key);\n    }\n\n    const { style } = target._ele;\n    if (Array.from(style).includes(key)) {\n      return style[key];\n    }\n\n    return getComputedStyle(target._ele)[key];\n  },\n};\n\nclass XhearCSS {\n  constructor($el) {\n    const obj = {};\n\n    Object.defineProperty(obj, \"_ele\", {\n      enumerable: false,\n      get: () => $el.ele,\n    });\n\n    const { style } = $el.ele;\n\n    Array.from(style).forEach((key) => {\n      obj[key] = style[key];\n    });\n\n    return ($el._css = new Proxy(obj, cssHandler));\n  }\n}\n\nexport default {\n  get css() {\n    return new XhearCSS(this);\n  },\n  set css(d) {\n    if (getType(d) == \"string\") {\n      this.ele.style = d;\n      return;\n    }\n\n    let { style } = this;\n\n    // Covering the old style\n    let nextKeys = Object.keys(d);\n\n    // Clear the unused key\n    Array.from(style).forEach((k) => {\n      if (!nextKeys.includes(k)) {\n        style[k] = \"\";\n      }\n    });\n\n    Object.assign(style, d);\n  },\n};\n","import { eleX, createXEle } from \"./util.mjs\";\nimport { getType } from \"../stanz/public.mjs\";\n\nexport default function $(expr) {\n  if (getType(expr) === \"string\" && !/<.+>/.test(expr)) {\n    const ele = document.querySelector(expr);\n\n    return eleX(ele);\n  }\n\n  return createXEle(expr);\n}\n\nObject.defineProperties($, {\n  // Convenient objects for use as extensions\n  extensions: {\n    value: {},\n  },\n});\n","import { getErr, getErrDesc } from \"../ofa-error/main.js\";\nimport { getType } from \"../stanz/public.mjs\";\nimport {\n  hyphenToUpperCase,\n  capitalizeFirstLetter,\n  toDashCase,\n} from \"./public.mjs\";\nimport { convert, render } from \"./render/render.mjs\";\nimport { eleX } from \"./util.mjs\";\nimport $ from \"./dollar.mjs\";\n\nconst COMPS = {};\n\nexport const renderElement = ({ defaults, ele, template, temps }) => {\n  let $ele;\n\n  try {\n    const data = {\n      ...deepCopyData(defaults.data, defaults.tag),\n      ...defaults.attrs,\n    };\n\n    defaults.attrs &&\n      Object.keys(defaults.attrs).forEach((name) => {\n        const value = ele.getAttribute(toDashCase(name));\n        if (value !== null && value !== undefined) {\n          data[name] = value;\n        }\n      });\n\n    $ele = eleX(ele);\n\n    defaults.proto && $ele.extend(defaults.proto, { enumerable: false });\n\n    for (let [key, value] of Object.entries(data)) {\n      if (!$ele.hasOwnProperty(key)) {\n        $ele[key] = value;\n      }\n    }\n\n    if (defaults.temp) {\n      const root = ele.attachShadow({ mode: \"open\" });\n\n      root.innerHTML = template.innerHTML;\n\n      render({\n        target: root,\n        data: $ele,\n        temps,\n      });\n    }\n\n    defaults.ready && defaults.ready.call($ele);\n  } catch (error) {\n    throw getErr(\n      \"xhear_reander_err\",\n      {\n        tag: ele.tagName.toLowerCase(),\n      },\n      error\n    );\n  }\n\n  if (defaults.watch) {\n    const wen = Object.entries(defaults.watch);\n\n    $ele.watchTick((e) => {\n      for (let [name, func] of wen) {\n        const names = name.split(\",\");\n\n        if (names.length >= 2) {\n          if (names.some((name) => e.hasModified(name))) {\n            func.call(\n              $ele,\n              names.map((name) => $ele[name]),\n              {\n                watchers: e,\n              }\n            );\n          }\n        } else {\n          if (e.hasModified(name)) {\n            func.call($ele, $ele[name], {\n              watchers: e,\n            });\n          }\n        }\n      }\n    });\n\n    for (let [name, func] of wen) {\n      const names = name.split(\",\");\n      if (names.length >= 2) {\n        func.call(\n          $ele,\n          names.map((name) => $ele[name]),\n          {}\n        );\n      } else {\n        func.call($ele, $ele[name], {});\n      }\n    }\n  }\n};\n\nexport const register = (opts = {}) => {\n  const defaults = {\n    // Registered component name\n    tag: \"\",\n    // Body content string\n    temp: \"\",\n    // Initialization data after element creation\n    data: {},\n    // Values that will not be traversed\n    proto: {},\n    // Keys bound to attributes\n    // attrs: {},\n    // The listener function for the element\n    // watch: {},\n    // Function triggered when the component is created (data initialization complete)\n    // created() { },\n    // Function triggered after component data initialization is complete (initial rendering completed)\n    // ready() { },\n    // Functions that are added to the document trigger\n    // attached() { },\n    // Functions triggered by moving out of the document\n    // detached() { },\n    // The container element is changed\n    // slotchange() { }\n    ...opts,\n  };\n\n  const { fn, extensions } = $;\n  if (fn) {\n    // 检查 proto 和 data 上的key，是否和fn上的key冲突\n    Object.keys(defaults.data).forEach((name) => {\n      if (fn.hasOwnProperty(name)) {\n        throw getErr(\"invalid_key\", {\n          compName: defaults.tag,\n          targetName: \"data\",\n          name,\n        });\n      }\n    });\n    Object.keys(defaults.proto).forEach((name) => {\n      if (fn.hasOwnProperty(name)) {\n        console.warn(\n          getErrDesc(\"invalid_key\", {\n            compName: defaults.tag,\n            targetName: \"proto\",\n            name,\n          }),\n          opts\n        );\n      }\n    });\n  }\n\n  let template, temps, name;\n\n  try {\n    validateTagName(defaults.tag);\n\n    defaults.data = deepCopyData(defaults.data, defaults.tag);\n\n    name = capitalizeFirstLetter(hyphenToUpperCase(defaults.tag));\n\n    if (COMPS[name]) {\n      throw getErr(\"xhear_register_exists\", { name });\n    }\n\n    template = document.createElement(\"template\");\n    template.innerHTML = defaults.temp;\n    temps = convert(template);\n  } catch (error) {\n    throw getErr(\"xhear_register_err\", { tag: defaults.tag }, error);\n  }\n\n  const getAttrKeys = (attrs) => {\n    let attrKeys;\n\n    if (attrs instanceof Array) {\n      attrKeys = [...attrs];\n    } else {\n      attrKeys = Object.keys(attrs);\n    }\n\n    return attrKeys;\n  };\n\n  const XElement = (COMPS[name] = class extends HTMLElement {\n    constructor(...args) {\n      super(...args);\n\n      const $ele = eleX(this);\n\n      defaults.created && defaults.created.call($ele);\n\n      if (defaults.attrs) {\n        const attrKeys = getAttrKeys(defaults.attrs);\n\n        // fix self attribule value\n        $ele.watchTick((e) => {\n          attrKeys.forEach((key) => {\n            if (e.hasModified(key)) {\n              const val = $ele[key];\n              const attrName = toDashCase(key);\n              const oldVal = this.getAttribute(attrName);\n              if (val === null || val === undefined) {\n                this.removeAttribute(attrName);\n              } else if (oldVal !== val) {\n                let reval = val;\n\n                const valType = getType(val);\n\n                if (valType === \"number\" && oldVal === String(val)) {\n                  // Setting the number will cause an infinite loop\n                  return;\n                }\n                if (valType === \"object\") {\n                  // Setting the object will cause an infinite loop\n                  reval = JSON.stringify(reval);\n                  if (reval === oldVal) {\n                    return;\n                  }\n                }\n\n                this.setAttribute(attrName, reval);\n              }\n            }\n          });\n        });\n\n        // The data set before initialization needs to be reflected in attrs\n        attrKeys.forEach((key) => {\n          if (\n            $ele[key] !== null &&\n            $ele[key] !== undefined &&\n            $ele[key] !== defaults.attrs[key]\n          ) {\n            this.setAttribute(toDashCase(key), $ele[key]);\n          }\n        });\n      }\n\n      renderElement({\n        defaults,\n        ele: this,\n        template,\n        temps,\n      });\n    }\n\n    connectedCallback() {\n      if (isInternal(this)) {\n        return;\n      }\n\n      defaults.attached && defaults.attached.call(eleX(this));\n      extensions.afterAttached && extensions.afterAttached(eleX(this));\n    }\n\n    disconnectedCallback() {\n      if (isInternal(this)) {\n        return;\n      }\n\n      defaults.detached && defaults.detached.call(eleX(this));\n      extensions.afterDetached && extensions.afterDetached(eleX(this));\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      const $ele = eleX(this);\n\n      if (!/[^\\d.]/.test(newValue) && typeof $ele[name] === \"number\") {\n        newValue = Number(newValue);\n      }\n\n      $ele[hyphenToUpperCase(name)] = newValue;\n    }\n\n    static get observedAttributes() {\n      return getAttrKeys(defaults.attrs || {}).map((e) => toDashCase(e));\n    }\n  });\n\n  if (document.readyState !== \"loading\") {\n    customElements.define(defaults.tag, XElement);\n  } else {\n    const READYSTATE = \"readystatechange\";\n    let f;\n    document.addEventListener(\n      READYSTATE,\n      (f = () => {\n        customElements.define(defaults.tag, XElement);\n        document.removeEventListener(READYSTATE, f);\n      })\n    );\n  }\n};\n\n// 判断元素是否临时脱离节点，防止数组操作导致元素触发detached问题\nfunction isInternal(ele) {\n  let target = ele;\n\n  while (target) {\n    if (target.__internal) {\n      return true;\n    }\n\n    target = target.parentNode || target.host;\n\n    if (!target || (target.tagName && target.tagName === \"BODY\")) {\n      break;\n    }\n  }\n\n  return false;\n}\n\nfunction validateTagName(str) {\n  // Check if the string has at least one '-' character\n  if (!str.includes(\"-\")) {\n    throw getErr(\"xhear_tag_noline\", { str });\n  }\n\n  // Check if the string starts or ends with '-'\n  if (str.charAt(0) === \"-\" || str.charAt(str.length - 1) === \"-\") {\n    throw getErr(\"xhear_validate_tag\", { str });\n  }\n\n  // Check if the string has consecutive '-' characters\n  for (let i = 0; i < str.length - 1; i++) {\n    if (str.charAt(i) === \"-\" && str.charAt(i + 1) === \"-\") {\n      throw getErr(\"xhear_validate_tag\", { str });\n    }\n  }\n\n  return true;\n}\n\nfunction deepCopyData(obj, tag = \"\", keyName) {\n  if (obj instanceof Set || obj instanceof Map) {\n    throw getErr(\"xhear_regster_data_noset\", { tag });\n  }\n\n  if (obj instanceof Function) {\n    throw getErr(\"xhear_regster_data_nofunc\", { tag, key: keyName });\n  }\n\n  if (typeof obj !== \"object\" || obj === null) {\n    return obj;\n  }\n\n  const copy = Array.isArray(obj) ? [] : {};\n\n  for (let key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      if (/^_/.test(key) && obj[key] instanceof Function) {\n        // 直接赋值私有属性\n        copy[key] = obj[key];\n      } else {\n        copy[key] = deepCopyData(obj[key], tag, key);\n      }\n    }\n  }\n\n  return copy;\n}\n","import { renderExtends, render } from \"./render.mjs\";\nimport { isSafariBrowser } from \"../public.mjs\";\nimport { getErr } from \"../../ofa-error/main.js\";\nimport { getRenderData } from \"./condition.mjs\";\nexport class FakeNode extends Comment {\n  constructor(markname) {\n    const tagText = `Fake Node${markname ? \": \" + markname : \"\"}`;\n\n    super(` ${tagText} --end `);\n\n    this._mark = markname;\n    this._inited = false;\n\n    const startCom = new Comment(` ${tagText} --start `);\n    startCom.__fake_end = this;\n\n    Object.defineProperty(this, \"_start\", {\n      value: startCom,\n    });\n  }\n\n  init() {\n    if (this._inited) {\n      return;\n    }\n\n    this.parentNode.insertBefore(this._start, this);\n    this._inited = true;\n  }\n\n  querySelector(expr) {\n    return this.__searchEl(expr, \"find\");\n  }\n\n  querySelectorAll(expr) {\n    return this.__searchEl(expr);\n  }\n\n  __searchEl(expr, funcName = \"filter\") {\n    const startParent = this.parentNode;\n    if (!startParent) return [];\n\n    const childs = this.children;\n\n    return Array.from(startParent.querySelectorAll(expr))[funcName]((e) => {\n      let par = e;\n      while (true) {\n        if (childs.includes(par)) {\n          return true;\n        }\n\n        par = par.parentNode;\n\n        if (!par) {\n          break;\n        }\n      }\n    });\n  }\n\n  insertBefore(newEle, target) {\n    const { parentNode } = this;\n\n    if (Array.from(parentNode.children).includes(target)) {\n      parentNode.insertBefore(newEle, target);\n    } else {\n      parentNode.insertBefore(newEle, this);\n    }\n  }\n\n  appendChild(newEle) {\n    this.parentNode.insertBefore(newEle, this);\n  }\n\n  get children() {\n    const childs = [];\n\n    let prev = this;\n    while (true) {\n      prev = prev.previousSibling;\n\n      if (prev) {\n        if (prev instanceof HTMLElement) {\n          childs.unshift(prev);\n        } else if (prev === this._start) {\n          break;\n        }\n      } else if (this.isConnected) {\n        throw getErr(\"xhear_fakenode_unclose\", { name: \"children\" });\n      } else {\n        break;\n      }\n    }\n\n    return childs;\n  }\n\n  get childNodes() {\n    const childs = [];\n\n    let prev = this;\n    while (true) {\n      prev = prev.previousSibling;\n\n      if (prev) {\n        if (prev === this._start) {\n          break;\n        }\n        childs.unshift(prev);\n      } else {\n        if (!this.isConnected) {\n          break;\n        }\n        throw getErr(\"xhear_fakenode_unclose\", { name: \"childNodes\" });\n      }\n    }\n\n    return childs;\n  }\n\n  set innerHTML(val) {\n    this.childNodes.forEach((e) => {\n      e.remove();\n    });\n\n    const temp = document.createElement(\"template\");\n    temp.innerHTML = val;\n\n    Array.from(temp.content.childNodes).forEach((e) => {\n      this.appendChild(e);\n    });\n  }\n\n  get innerHTML() {\n    const { children } = this;\n    let content = \"\";\n\n    children.forEach((e) => {\n      content += e.outerHTML + \"\\n\";\n    });\n\n    return content;\n  }\n\n  get nextElementSibling() {\n    let next = this.nextSibling;\n\n    if (!next) {\n      return null;\n    }\n\n    if (next.__fake_end) {\n      return next.__fake_end;\n    }\n\n    if (next && !(next instanceof Element)) {\n      next = next.nextElementSibling;\n    }\n\n    return next;\n  }\n\n  get previousElementSibling() {\n    const { _start } = this;\n    let prev = _start.previousSibling;\n\n    if (!prev) {\n      return null;\n    }\n\n    if (prev instanceof FakeNode) {\n      return prev;\n    }\n\n    return _start.previousElementSibling;\n  }\n}\n\n// 将temp元素替换到原来的位置上\nconst replaceTempInit = (_this) => {\n  const parent = _this.parentNode;\n  if (parent) {\n    const parent = _this.parentNode;\n    const children = Array.from(_this.content.children);\n    children.forEach((e) => {\n      parent.insertBefore(e, _this);\n    });\n\n    _this.remove();\n\n    if (parent.querySelector(\"[x-bind-data]\")) {\n      const regData = getRenderData(parent);\n\n      if (regData) {\n        // 重新渲染未绑定元素\n        render({\n          data: regData.data,\n          target: regData.target,\n          temps: regData.temps,\n        });\n      }\n    }\n  }\n};\n\nif (isSafariBrowser()) {\n  renderExtends.beforeRender = ({ target }) => {\n    let replaces = [];\n\n    while (true) {\n      replaces = Array.from(\n        target.querySelectorAll('template[is=\"replace-temp\"]')\n      );\n\n      if (!replaces.length) {\n        break;\n      }\n\n      replaces.forEach((temp) => {\n        replaceTempInit(temp);\n      });\n    }\n  };\n} else {\n  class ReplaceTemp extends HTMLTemplateElement {\n    constructor() {\n      super();\n      this.init();\n    }\n\n    init() {\n      replaceTempInit(this);\n    }\n\n    connectedCallback() {\n      this.init();\n    }\n  }\n\n  customElements.define(\"replace-temp\", ReplaceTemp, {\n    extends: \"template\",\n  });\n}\n","/**\n * `x-if` first replaces all neighboring conditional elements with token elements and triggers the rendering process once; the rendering process is triggered again after each `value` change.\n * The rendering process is as follows:\n * 1. First, collect all conditional elements adjacent to `x-if`.\n * 2. Mark these elements and wait for the `value` of each conditional element to be set successfully before proceeding to the next step.\n * 3. Based on the marking, perform a judgment operation asynchronously, the element that satisfies the condition first will be rendered; after successful rendering, the subsequent conditional elements will clear the rendered content.\n */\n\nimport { dataRevoked } from \"../../stanz/public.mjs\";\nimport { register } from \"../register.mjs\";\nimport { eleX, revokeAll } from \"../util.mjs\";\nimport { FakeNode } from \"./fake-node.mjs\";\nimport { render } from \"./render.mjs\";\n\nconst regOptions = {\n  data: {\n    value: null,\n    __rendered: false,\n  },\n  watch: {\n    value() {\n      if (!this._bindend) {\n        return;\n      }\n\n      this.refreshValue();\n    },\n  },\n  proto: {\n    refreshValue() {\n      clearTimeout(this._timer);\n      this._timer = setTimeout(() => {\n        const conditions = [this, ...this._others];\n\n        let isOK = false;\n\n        conditions.forEach((conditionEl) => {\n          if (isOK) {\n            // A success condition has preceded it, and any subsequent conditional elements should be clear\n            conditionEl._clearContent();\n            return;\n          }\n\n          if (conditionEl.value || conditionEl.tag === \"x-else\") {\n            isOK = true;\n            conditionEl._renderContent();\n          } else {\n            conditionEl._clearContent();\n          }\n        });\n        if (this._fake.parentNode) {\n          eleX(this._fake.parentNode).refresh();\n        }\n\n        // const fakeParent = eleX(this._fake.parentNode);\n        // fakeParent.refresh();\n        // fakeParent.host && fakeParent.host.refresh({ unupdate: 1 });\n      }, 0);\n    },\n    _renderContent() {\n      if (this.__rendered) {\n        return;\n      }\n      this.__rendered = true;\n\n      const result = getRenderData(this._fake);\n\n      if (!result) {\n        return;\n      }\n\n      const { target, data, temps } = result;\n\n      if (dataRevoked(data)) {\n        return;\n      }\n\n      this._fake.innerHTML = this.__originHTML;\n\n      render({ target, data, temps });\n\n      this.emit(\"rendered\", {\n        bubbles: false,\n      });\n    },\n    _clearContent() {\n      if (!this.__rendered) {\n        return;\n      }\n\n      this.__rendered = false;\n\n      // revokeAll(this._fake);\n      this._fake?.childNodes?.forEach((el) => revokeAll(el));\n      this._fake.innerHTML = \"\";\n\n      this.emit(\"clear\", {\n        bubbles: false,\n      });\n    },\n    init() {\n      if (this._bindend) {\n        return;\n      }\n\n      this._bindend = true;\n      const fake = (this._fake = new FakeNode(this.tag));\n      fake.__revokes = this.ele.__revokes;\n      this.before(fake);\n      fake.init();\n      this.remove();\n\n      // 给 else-if 添加 _xif，给 else 初始化\n      if (this.tag === \"x-if\") {\n        const others = (this._others = []);\n\n        let next = fake;\n        while (true) {\n          next = next.nextElementSibling;\n\n          if (!next || next.tagName == \"X-IF\") {\n            // 下一个还是if的话，就直接跳过遍历的逻辑，因为下一个if后面可能有它们的else\n            break;\n          }\n\n          switch (next.tagName) {\n            case \"X-ELSE\": {\n              const $el = eleX(next);\n              if ($el.init) {\n                $el.init();\n              } else {\n                $el._if_ready = 1;\n              }\n\n              others.push($el);\n              return;\n            }\n            case \"X-ELSE-IF\": {\n              const $el = eleX(next);\n\n              $el._xif = this;\n\n              others.push($el);\n              break;\n            }\n            default:\n              break;\n          }\n        }\n      }\n    },\n  },\n  created() {\n    this.__originHTML = this.$(\"template[condition]\").html;\n    this.html = \"\";\n  },\n  ready() {\n    if (this.ele._bindingRendered) {\n      this.init();\n    } else {\n      this.one(\"binding-rendered\", () => this.init());\n    }\n  },\n};\n\nregister({\n  tag: \"x-if\",\n  ...regOptions,\n});\n\nregister({\n  tag: \"x-else-if\",\n  ...regOptions,\n  watch: {\n    value() {\n      if (!this._bindend) {\n        return;\n      }\n\n      if (this._xif) {\n        this._xif.refreshValue();\n      }\n    },\n  },\n});\n\nregister({\n  tag: \"x-else\",\n  ...regOptions,\n  watch: {},\n  ready() {\n    if (this._if_ready) {\n      this.init();\n    }\n  },\n});\n\nexport const getRenderData = (target) => {\n  while (target && !target.__render_data) {\n    target = target.parentNode;\n  }\n\n  if (target) {\n    return {\n      target,\n      data: target.__render_data,\n      temps: target.__render_temps,\n    };\n  }\n\n  return null;\n};\n","import { register } from \"../register.mjs\";\nimport { render } from \"./render.mjs\";\nimport { FakeNode } from \"./fake-node.mjs\";\nimport Stanz from \"../../stanz/main.mjs\";\nimport { createXEle, eleX, revokeAll } from \"../util.mjs\";\nimport { removeArrayValue } from \"../public.mjs\";\nimport { getRenderData } from \"./condition.mjs\";\nimport { getErr } from \"../../ofa-error/main.js\";\nimport { getType } from \"../../stanz/public.mjs\";\n\nregister({\n  tag: \"x-fill\",\n  data: {\n    value: null,\n  },\n  watch: {\n    value(value, t) {\n      this.refreshValue(t?.watchers);\n    },\n  },\n  proto: {\n    refreshValue(watchers) {\n      const arrayData = this.value;\n\n      if (!this._bindend) {\n        return;\n      }\n\n      const childs = this._fake.children;\n\n      if (!arrayData) {\n        childs.forEach((e) => revokeAll(e));\n        this._fake.innerHTML = \"\";\n        return;\n      }\n\n      if (!(arrayData instanceof Array)) {\n        console.warn(\n          getErr(\"fill_type\", {\n            type: getType(arrayData),\n          })\n        );\n\n        childs &&\n          childs.forEach((el) => {\n            revokeAll(el);\n            el.remove();\n          });\n        return;\n      }\n\n      const regData = getRenderData(this._fake);\n\n      if (!regData) {\n        return;\n      }\n\n      const { data, temps } = regData;\n\n      const targetTemp = temps[this._name];\n\n      const keyName = this.attr(\"fill-key\") || \"xid\";\n\n      if (!childs.length) {\n        const frag = document.createDocumentFragment();\n\n        arrayData.forEach((e, i) => {\n          const $ele = createItem(\n            e,\n            temps,\n            targetTemp,\n            data.$host || data,\n            i,\n            keyName\n          );\n          frag.appendChild($ele.ele);\n        });\n\n        this._fake.appendChild(frag);\n      } else {\n        if (watchers) {\n          const isReplaced = watchers.some((e) => e.path.length <= 1);\n\n          if (!isReplaced) {\n            // It is not a replacement, it can be corrected by binding the item internally.\n            return;\n          }\n        }\n\n        const vals = arrayData.slice();\n        const valsKeys = new Set(\n          vals.map((e) => {\n            if (!e) {\n              return;\n            }\n\n            const val = e[keyName];\n            return val === undefined ? e : val;\n          })\n        );\n\n        const { parentNode } = this._fake;\n\n        if (keyName !== \"xid\" && vals.length !== valsKeys.size) {\n          const err = getErr(\"fill_key_duplicates\");\n          console.error(err);\n          console.warn(err, {\n            parentNode,\n            host: eleX(parentNode)?.host?.ele,\n          });\n        }\n\n        // const positionKeys = childs.map((e) => e._data_xid || e);\n        // Delete non-existing projects in advance (used to improve performance, this step can be removed and the above comment is turned on)\n        const positionKeys = [];\n        for (let i = 0, len = childs.length; i < len; i++) {\n          const e = childs[i];\n          const key = e._data_xid || e;\n\n          if (!valsKeys.has(key)) {\n            // If it no longer exists, delete it in advance.\n            revokeAll(e);\n            e.remove();\n            childs.splice(i, 1);\n            len--;\n            i--;\n          } else {\n            positionKeys.push(key);\n          }\n        }\n\n        let target = this._fake._start;\n\n        const needRemoves = [];\n\n        let count = 0;\n\n        while (target) {\n          if (target === this._fake) {\n            if (vals.length) {\n              // We have reached the end, add all elements directly to the front\n              vals.forEach((item) => {\n                const $ele = createItem(\n                  item,\n                  temps,\n                  targetTemp,\n                  data.$host || data,\n                  count,\n                  keyName\n                );\n\n                count++;\n\n                // target.parentNode.insertBefore($ele.ele, target);\n                parentNode.insertBefore($ele.ele, target);\n              });\n            }\n            break;\n          }\n          if (!(target instanceof Element)) {\n            target = target.nextSibling;\n            continue;\n          }\n          const currentVal = vals.shift();\n          const isObj = currentVal instanceof Object;\n          const $tar = eleX(target);\n          const item = $tar.__item;\n\n          if (currentVal === undefined && !vals.length) {\n            // There will be no follow-up, just delete it directly\n            needRemoves.push(target);\n            target = target.nextSibling;\n            continue;\n          }\n\n          const oldId = positionKeys.indexOf(\n            isObj ? currentVal[keyName] : currentVal\n          );\n          if (oldId > -1) {\n            // If the key originally exists, perform key displacement.\n            const oldItem = childs[oldId];\n            if (\n              isObj\n                ? currentVal[keyName] !== item.$data[keyName]\n                : currentVal !== item.$data\n            ) {\n              // Adjust position\n              oldItem.__internal = 1;\n              // target.parentNode.insertBefore(oldItem, target);\n              parentNode.insertBefore(oldItem, target);\n              delete oldItem.__internal;\n              target = oldItem;\n            }\n\n            // Update object\n            const $old = eleX(oldItem);\n            if ($old.__item.$data !== currentVal) {\n              $old.__item.$data = currentVal;\n            }\n            $old.__item.$index = count;\n          } else {\n            // Add new element\n            const $ele = createItem(\n              currentVal,\n              temps,\n              targetTemp,\n              data.$host || data,\n              count,\n              keyName\n            );\n\n            // target.parentNode.insertBefore($ele.ele, target);\n            parentNode.insertBefore($ele.ele, target);\n            target = $ele.ele;\n          }\n\n          count++;\n          target = target.nextSibling;\n        }\n\n        if (needRemoves.length) {\n          needRemoves.forEach((e) => {\n            revokeAll(e);\n            e.remove();\n          });\n        }\n      }\n\n      if (this._fake.parentNode) {\n        eleX(this._fake.parentNode).refresh();\n      }\n\n      this.emit(\"rendered\", {\n        bubbles: false,\n      });\n    },\n    init() {\n      if (this._bindend) {\n        return;\n      }\n\n      this._bindend = true;\n      const fake = (this._fake = new FakeNode(\"x-fill\"));\n\n      // 搬动 revokes\n      fake.__revokes = this.ele.__revokes;\n\n      this.before(fake);\n      fake.init();\n      this.remove();\n\n      this.refreshValue();\n    },\n  },\n  ready() {\n    this._name = this.attr(\"name\");\n\n    if (!this._name) {\n      const err = getErr(\"xhear_fill_tempname\", { name: this._name });\n      console.warn(err, this.ele);\n      throw err;\n    }\n\n    if (this.ele._bindingRendered) {\n      this.init();\n    } else {\n      this.one(\"binding-rendered\", () => this.init());\n    }\n  },\n});\n\nexport const createItem = ($data, temps, targetTemp, $host, $index, keyName) => {\n  const $ele = createXEle(targetTemp.innerHTML);\n\n  const itemData = new Stanz({\n    $data,\n    // $ele,\n    $host,\n    $index,\n  });\n\n  // tips: 如果$ele被设置为item的子属性，$ele内出现自定义组件，进一步导致改动冒泡，会出现xfill内元素不停渲染的死循环\n  Object.defineProperties(itemData, {\n    $ele: {\n      get() {\n        return $ele;\n      },\n    },\n  });\n\n  render({\n    target: $ele.ele,\n    data: itemData,\n    temps,\n    // $host,\n    isRenderSelf: true,\n  });\n\n  const revokes = $ele.ele.__revokes;\n\n  const revoke = () => {\n    removeArrayValue(revokes, revoke);\n    itemData.revoke();\n  };\n\n  revokes.push(revoke);\n\n  $ele.__item = itemData;\n  $ele.ele._data_xid = $data?.[keyName] || $data;\n\n  return $ele;\n};\n","import { createXEle, eleX } from \"./util.mjs\";\nimport { meetsEle, searchEle } from \"./public.mjs\";\nimport { handler } from \"./accessor.mjs\";\nimport renderFn from \"./render/render.mjs\";\nimport syncFn from \"./render/sync.mjs\";\nimport eventFn from \"./event.mjs\";\nimport LikeArray from \"./array.mjs\";\nimport formFn, { initFormEle } from \"./form.mjs\";\nimport cssFn from \"./css.mjs\";\nimport { extend } from \"../stanz/public.mjs\";\nimport Stanz, { constructor } from \"../stanz/main.mjs\";\nimport watchFn from \"../stanz/watch.mjs\";\nimport \"./render/condition.mjs\";\nimport \"./render/fill.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\nconst { defineProperties } = Object;\n\nconst GET_COMPOSE_PATH = `get-${Math.random()}`;\n\nconst init = ({ _this, ele, proxySelf }) => {\n  const descs = {\n    owner: {\n      get() {\n        const { parentNode } = ele;\n        const { _owner } = _this;\n        const arr = parentNode ? [eleX(parentNode), ..._owner] : [..._owner];\n        return new Set(arr);\n      },\n    },\n    ele: {\n      get: () => ele,\n    },\n  };\n\n  const tag = ele.tagName && ele.tagName.toLowerCase();\n\n  if (tag) {\n    descs.tag = {\n      enumerable: true,\n      value: tag,\n    };\n  }\n\n  defineProperties(_this, descs);\n\n  initFormEle(proxySelf);\n};\n\nexport default class Xhear extends LikeArray {\n  constructor({ ele }) {\n    super();\n\n    const proxySelf = constructor.call(this, {}, handler);\n\n    init({\n      _this: this,\n      ele,\n      proxySelf,\n    });\n\n    ele.__xhear__ = proxySelf;\n\n    return proxySelf;\n  }\n\n  get length() {\n    return this.ele && this.ele.children.length;\n  }\n\n  $(expr) {\n    let { ele } = this;\n    if (ele instanceof HTMLTemplateElement) {\n      ele = ele.content;\n    }\n\n    const target = ele.querySelector(expr);\n    return target ? eleX(target) : null;\n  }\n\n  all(expr) {\n    return searchEle(this.ele, expr).map(eleX);\n  }\n\n  extend(obj, desc) {\n    return extend(this, obj, desc);\n  }\n\n  get text() {\n    return this.ele.textContent;\n  }\n\n  set text(val) {\n    this.ele.textContent = val;\n  }\n\n  get html() {\n    return this.ele.innerHTML;\n  }\n\n  set html(val) {\n    this.ele.innerHTML = val;\n  }\n\n  get classList() {\n    return this.ele.classList;\n  }\n\n  get data() {\n    return this.ele.dataset;\n  }\n\n  get shadow() {\n    return eleX(this.ele.shadowRoot);\n  }\n\n  get root() {\n    const rootNode = this.ele.getRootNode();\n    return rootNode ? eleX(rootNode) : null;\n  }\n  get host() {\n    let root = this.ele.getRootNode();\n    let { host } = root;\n    return host instanceof Node ? eleX(host) : null;\n  }\n\n  get parent() {\n    let { parentNode } = this.ele;\n    return !parentNode || parentNode === document ? null : eleX(parentNode);\n  }\n\n  get parents() {\n    const parents = [];\n    let target = this;\n    while (target.parent) {\n      target = target.parent;\n      parents.push(target);\n    }\n    return parents;\n  }\n\n  parentsUntil(expr) {\n    const allParents = this.parents;\n    const parents = [];\n\n    const exprIsObj = typeof expr === \"object\";\n\n    while (allParents.length) {\n      const target = allParents.shift();\n\n      if (exprIsObj) {\n        if (target === expr || target.ele === expr) {\n          break;\n        }\n      } else if (meetsEle(target.ele, expr)) {\n        break;\n      }\n\n      parents.push(target);\n    }\n\n    return parents;\n  }\n\n  get hosts() {\n    const hosts = [];\n    let target = this;\n    while (target.host) {\n      target = target.host;\n      hosts.push(target);\n    }\n    return hosts;\n  }\n\n  composedPath() {\n    let paths = [];\n    this.one(GET_COMPOSE_PATH, (e) => {\n      paths = e.composedPath();\n      e.stopPropagation();\n    });\n    this.emit(GET_COMPOSE_PATH, {\n      composed: true,\n    });\n    return paths;\n  }\n\n  get next() {\n    const nextEle = this.ele.nextElementSibling;\n    return nextEle ? eleX(nextEle) : null;\n  }\n\n  after(val) {\n    const { next: nextEl } = this;\n\n    if (nextEl) {\n      nextEl.before(val);\n    } else {\n      this.parent.push(val);\n    }\n  }\n\n  get nexts() {\n    const { parent } = this;\n    const selfIndex = this.index;\n    return parent.filter((e, i) => i > selfIndex);\n  }\n\n  get prev() {\n    const prevEle = this.ele.previousElementSibling;\n    return prevEle ? eleX(prevEle) : null;\n  }\n\n  before(val) {\n    const $el = createXEle(val);\n    this.parent.ele.insertBefore($el.ele, this.ele);\n  }\n\n  get prevs() {\n    const { parent } = this;\n    const selfIndex = this.index;\n    return parent.filter((e, i) => i < selfIndex);\n  }\n\n  get siblings() {\n    return this.parent.filter((e) => e !== this);\n  }\n\n  get index() {\n    let { parentNode } = this.ele;\n\n    if (!parentNode) {\n      return null;\n    }\n\n    return Array.prototype.indexOf.call(parentNode.children, this.ele);\n  }\n\n  get style() {\n    return this.ele.style;\n  }\n\n  get width() {\n    return parseInt(getComputedStyle(this.ele).width) || 0;\n  }\n\n  get height() {\n    return parseInt(getComputedStyle(this.ele).height) || 0;\n  }\n\n  get clientWidth() {\n    return this.ele.clientWidth;\n  }\n\n  get clientHeight() {\n    return this.ele.clientHeight;\n  }\n\n  get offsetWidth() {\n    return this.ele.offsetWidth;\n  }\n\n  get offsetHeight() {\n    return this.ele.offsetHeight;\n  }\n\n  get outerWidth() {\n    let computedStyle = getComputedStyle(this.ele);\n    return (\n      this.ele.offsetWidth +\n      parseInt(computedStyle[\"margin-left\"]) +\n      parseInt(computedStyle[\"margin-right\"])\n    );\n  }\n\n  get outerHeight() {\n    let computedStyle = getComputedStyle(this.ele);\n    return (\n      this.ele.offsetHeight +\n      parseInt(computedStyle[\"margin-top\"]) +\n      parseInt(computedStyle[\"margin-bottom\"])\n    );\n  }\n\n  is(expr) {\n    return meetsEle(this.ele, expr);\n  }\n\n  remove() {\n    const { parent } = this;\n    if (parent) {\n      parent.splice(parent.indexOf(this), 1);\n    }\n    // this.ele.remove();\n  }\n\n  clone(bool = true) {\n    return eleX(this.ele.cloneNode(bool));\n  }\n\n  wrap(content) {\n    const $el = createXEle(content);\n\n    const { ele } = this;\n\n    if (!ele.parentNode) {\n      throw getErr(\"xhear_wrap_no_parent\");\n    }\n\n    ele.parentNode.insertBefore($el.ele, ele);\n\n    ele.__internal = 1;\n\n    $el.ele.appendChild(ele);\n\n    delete ele.__internal;\n\n    return this;\n  }\n\n  unwrap() {\n    const { ele } = this;\n\n    const target = ele.parentNode;\n\n    if (target.children.length > 1) {\n      throw getErr(\"xhear_unwrap_has_siblings\");\n    }\n\n    ele.__internal = 1;\n\n    target.parentNode.insertBefore(ele, target);\n\n    target.remove();\n\n    delete ele.__internal;\n\n    return this;\n  }\n}\n\nconst sfn = Stanz.prototype;\nconst fn = Xhear.prototype;\n\nfn.extend(\n  {\n    get: sfn.get,\n    set: sfn.set,\n    toJSON: sfn.toJSON,\n    toString: sfn.toString,\n    ...watchFn,\n    ...eventFn,\n    ...renderFn,\n    ...syncFn,\n    ...formFn,\n  },\n  {\n    enumerable: false,\n  }\n);\n\nfn.extend(cssFn);\n","import Xhear from \"./main.mjs\";\nimport { getType } from \"../stanz/public.mjs\";\n\nexport const eleX = (ele) => {\n  if (!ele) return null;\n\n  if (ele.__xhear__) {\n    return ele.__xhear__;\n  }\n\n  return new Xhear({ ele });\n};\n\nexport const objToXEle = (obj) => {\n  const data = { ...obj };\n\n  if (!obj.tag) {\n    return null;\n  }\n\n  const ele = document.createElement(obj.tag);\n  delete data.tag;\n  const $ele = eleX(ele);\n\n  Object.assign($ele, data);\n\n  return $ele;\n};\n\nconst temp = document.createElement(\"template\");\n\nexport const strToXEle = (str) => {\n  temp.innerHTML = str;\n  const ele = temp.content.children[0] || temp.content.childNodes[0];\n  temp.innerHTML = \"\";\n\n  return eleX(ele);\n};\n\nexport const createXEle = (expr, exprType) => {\n  if (expr instanceof Xhear) {\n    return expr;\n  }\n\n  if (expr instanceof Node || expr === window) {\n    return eleX(expr);\n  }\n\n  const type = getType(expr);\n\n  switch (type) {\n    case \"object\":\n      return objToXEle(expr);\n    case \"string\":\n      return strToXEle(expr);\n  }\n};\n\nexport const revokeAll = (target) => {\n  if (target.__revokes) {\n    Array.from(target.__revokes).forEach((f) => f && f());\n  }\n  target.childNodes &&\n    Array.from(target.childNodes).forEach((el) => {\n      revokeAll(el);\n    });\n\n  const revokes = target?.shadowRoot?.__revokes;\n\n  if (revokes) {\n    [...revokes].forEach((f) => f());\n  }\n};\n","import { getErr } from \"../ofa-error/main.js\";\nimport $ from \"../xhear/base.mjs\";\nimport { eleX } from \"../xhear/util.mjs\";\n\n$.register({\n  tag: \"inject-host\",\n  temp: `<slot></slot>`,\n  data: {},\n  proto: {\n    init() {\n      if (!this.ele.isConnected) {\n        return;\n      }\n\n      this.forEach((e) => this._init(e));\n    },\n\n    _init(e) {\n      if (e.ele.__inited) {\n        return;\n      }\n\n      switch (e.tag) {\n        case \"link\":\n          this._initLink(e);\n          break;\n        case \"style\":\n          this._initStyle(e);\n          break;\n        case \"x-if\":\n        case \"x-else-if\":\n        case \"x-else\":\n        case \"x-fill\":\n          // Components of a rendered nature do not need to be alerted\n          break;\n        default:\n          const err = getErr(\"invalidated_inject_host\");\n          console.warn(err, e);\n      }\n    },\n\n    _initLink(e) {\n      const href = e.attr(\"href\");\n\n      const rel = e.attr(\"rel\");\n\n      if (rel !== \"stylesheet\" && rel !== \"host\") {\n        throw getErr(\"inject-link-rel\");\n      }\n\n      let { ele } = e;\n\n      if (rel !== \"host\") {\n        e.attr(\"rel\", \"host\");\n        // It needs to be reset or it will contaminate itself\n        e.attr(\"href\", href);\n      }\n\n      ele.__inited = true;\n\n      ele._revoke = () => {\n        revokeLink(ele);\n        ele._revoke = null;\n      };\n\n      initInjectEle(\n        this,\n        href,\n        () => {\n          const newEl = e.clone();\n          newEl.attr(\"rel\", \"stylesheet\");\n          return newEl;\n        },\n        ele\n      );\n    },\n    async _initStyle(e) {\n      if (/data\\(.+?\\)/.test(e.html)) {\n        const err = getErr(\"use-data-inject\");\n        console.warn(err, e.ele);\n        throw err;\n      }\n\n      // Use only the text inside the style to prevent contaminating yourself\n      const com = new Comment(e.html);\n      com.__inited = true;\n\n      com._revoke = () => {\n        revokeLink(e.ele);\n        delete com.__inited;\n        delete e.ele.__inited;\n        com._revoke = null;\n        e.ele._revoke = null;\n      };\n\n      e.html = \"\";\n      e.push(com);\n      e.ele.__inited = true;\n      e.ele._revoke = com._revoke;\n\n      // const hash = await getHash(com.data);\n      const hash = getStringHash(com.data);\n\n      initInjectEle(this, hash, () => $(`<style>${com.data}</style>`), e.ele);\n    },\n  },\n  attached() {\n    const observer = (this._obs = new MutationObserver((mutationsList) => {\n      for (let mutation of mutationsList) {\n        if (mutation.type === \"attributes\") {\n          if (mutation.attributeName === \"x-bind-data\") {\n            // x component render\n            continue;\n          }\n\n          // Logic for handling attribute changes\n          const { target } = mutation;\n\n          if (target.__inited) {\n            target._revoke();\n            this._init(eleX(target));\n          }\n        } else if (mutation.type === \"childList\") {\n          mutation.removedNodes.forEach((e) => {\n            if (e.__inited) {\n              e._revoke();\n            }\n          });\n\n          mutation.addedNodes.forEach((e) => {\n            if (!e.__inited) {\n              if (e instanceof Text) {\n                if (e.parentElement.tagName === \"STYLE\") {\n                  // change style text\n                  this.init(e.parentNode);\n                }\n              }\n\n              if (e.__inited) {\n                // Don't get involved if you've been initialized.\n                return;\n              }\n\n              if (e instanceof Text || e instanceof Comment) {\n                // Invalid content\n                return;\n              }\n\n              this._init(eleX(e));\n            }\n          });\n        }\n      }\n    }));\n\n    const config = { attributes: true, childList: true, subtree: true };\n\n    observer.observe(this.ele, config);\n\n    this.init();\n  },\n  detached() {\n    this.forEach((e) => revokeLink(e.ele));\n\n    this._obs.disconnect();\n  },\n});\n\nfunction getStringHash(str) {\n  let hash = 0;\n  let len = str.length;\n  for (let i = 0; i < len; i++) {\n    const charCode = str.charCodeAt(i);\n    hash = ((hash << 5) - hash) ^ charCode;\n    hash = (hash << 13) | (hash >>> 19);\n    hash = hash * 7 - hash * 3;\n  }\n  return hash.toString(36) + \"--\" + len;\n}\n\nfunction initInjectEle(injectEl, mark, cloneFunc, item) {\n  const hostRoot = injectEl.host.root;\n\n  let clink = hostRoot.$(`[inject-host=\"${mark}\"]`);\n\n  if (clink) {\n    clink.ele.__items.add(item);\n    item.__host_link = clink;\n    return;\n  }\n\n  clink = cloneFunc();\n\n  clink.attr(\"inject-host\", mark);\n\n  clink.ele.__items = new Set([item]);\n  item.__host_link = clink;\n\n  const { root } = injectEl.host;\n  if (root.ele === document) {\n    document.head.appendChild(clink.ele);\n  } else {\n    root.root.push(clink);\n  }\n}\n\nfunction revokeLink(item) {\n  if (item.__inited && item.__host_link) {\n    const items = item.__host_link.ele.__items;\n    items.delete(item);\n\n    if (!items.size) {\n      item.__host_link.remove();\n    }\n\n    delete item.__inited;\n  }\n}\n","import { eleX } from \"./util.mjs\";\nimport { render, convert } from \"./render/render.mjs\";\nimport Xhear from \"./main.mjs\";\nimport stanz from \"../stanz/base.mjs\";\nimport Stanz from \"../stanz/main.mjs\";\nimport { register } from \"./register.mjs\";\nimport { searchEle } from \"./public.mjs\";\nimport $ from \"./dollar.mjs\";\nimport { nextTick } from \"../stanz/public.mjs\";\n\nObject.assign($, {\n  stanz,\n  Stanz,\n  render,\n  convert,\n  register,\n  nextTick,\n  fn: Xhear.prototype,\n  all: (expr) => searchEle(document, expr).map(eleX),\n  frag: () => $(document.createDocumentFragment()),\n});\n\nexport default $;\n","const getOid = () => Math.random().toString(32).slice(2);\n\nexport default class Onion {\n  constructor() {\n    this._middlewares = new Map();\n  }\n\n  use(middleware) {\n    const oid = getOid();\n    this._middlewares.set(oid, middleware);\n    return oid;\n  }\n\n  unuse(oid) {\n    return this._middlewares.delete(oid);\n  }\n\n  async run(context) {\n    let index = -1;\n\n    const middlewares = Array.from(this._middlewares.values());\n\n    const next = async () => {\n      index++;\n      if (index < middlewares.length) {\n        await middlewares[index](context, next);\n      }\n    };\n\n    await next();\n  }\n}\n","import { getErr } from \"../ofa-error/main.js\";\nimport Onion from \"./onion.mjs\";\n\nconst getNotHttp = (url) => /^blob:/.test(url) || /^data:/.test(url);\n\nexport const caches = new Map();\nexport const wrapFetch = async (url, params) => {\n  let reUrl = url;\n\n  if (!getNotHttp(url)) {\n    const d = new URL(url);\n    reUrl = params.includes(\"-direct\") ? url : `${d.origin}${d.pathname}`;\n  }\n\n  let fetchObj = caches.get(reUrl);\n\n  if (!fetchObj) {\n    fetchObj = fetch(reUrl);\n    caches.set(reUrl, fetchObj);\n  }\n\n  const resp = await fetchObj;\n\n  return resp.clone();\n};\n\nexport const processor = {};\n\nconst addHandler = (name, handler) => {\n  const oni = processor[name] || (processor[name] = new Onion());\n  oni.use(handler);\n};\n\nexport const use = (name, handler) => {\n  if (name instanceof Function) {\n    handler = name;\n    name = [\"js\", \"mjs\"];\n  }\n\n  if (name instanceof Array) {\n    name.forEach((name) => {\n      addHandler(name, handler);\n    });\n    return;\n  }\n\n  addHandler(name, handler);\n};\n\nuse([\"mjs\", \"js\"], async (ctx, next) => {\n  if (!ctx.result) {\n    const { url, params } = ctx;\n    const d = new URL(url);\n\n    const notHttp = getNotHttp(url);\n    try {\n      if (notHttp || params.includes(\"-direct\")) {\n        ctx.result = await import(url);\n      } else {\n        ctx.result = await import(`${d.origin}${d.pathname}`);\n      }\n    } catch (error) {\n      const err = getErr(\n        \"load_module\",\n        {\n          url: ctx.realUrl || url,\n        },\n        error\n      );\n\n      if (notHttp) {\n        console.warn(err, ctx);\n      }\n\n      throw err;\n    }\n  }\n\n  await next();\n});\n\nuse([\"txt\", \"html\", \"htm\"], async (ctx, next) => {\n  if (!ctx.result) {\n    const { url, params } = ctx;\n\n    let resp;\n    try {\n      resp = await wrapFetch(url, params);\n    } catch (error) {\n      throw getErr(\"load_fail\", { url }, error);\n    }\n\n    if (!/^2.{2}$/.test(resp.status)) {\n      throw getErr(\"load_fail_status\", {\n        url,\n        status: resp.status,\n      });\n    }\n\n    ctx.result = await resp.text();\n  }\n\n  await next();\n});\n\nuse(\"json\", async (ctx, next) => {\n  if (!ctx.result) {\n    const { url, params } = ctx;\n\n    ctx.result = await wrapFetch(url, params).then((e) => e.json());\n  }\n\n  await next();\n});\n\nuse(\"wasm\", async (ctx, next) => {\n  if (!ctx.result) {\n    const { url, params } = ctx;\n\n    const data = await wrapFetch(url, params).then((e) => e.arrayBuffer());\n\n    const module = await WebAssembly.compile(data);\n    const instance = new WebAssembly.Instance(module);\n\n    ctx.result = instance.exports;\n  }\n\n  await next();\n});\n\nuse(\"css\", async (ctx, next) => {\n  if (!ctx.result) {\n    const { url, element, params } = ctx;\n\n    if (element) {\n      const link = document.createElement(\"link\");\n      link.rel = \"stylesheet\";\n      link.href = url;\n\n      const root = element.getRootNode();\n\n      if (root === document) {\n        root.head.append(link);\n      } else {\n        root.appendChild(link);\n      }\n\n      let f;\n      element.addEventListener(\n        \"disconnected\",\n        (f = (e) => {\n          link.remove();\n          element.removeEventListener(\"disconnected\", f);\n        })\n      );\n    } else {\n      ctx.result = await wrapFetch(url, params).then((e) => e.text());\n    }\n  }\n\n  await next();\n});\n","import { getErr } from \"../ofa-error/main.js\";\n\nexport const aliasMap = {};\n\nexport default async function config(opts) {\n  const { alias } = opts;\n\n  if (alias) {\n    Object.entries(alias).forEach(([name, path]) => {\n      if (!/^@.+/.test(name)) {\n        throw getErr(\"config_alias_name_error\", {\n          name,\n        });\n      }\n\n      if (!aliasMap[name]) {\n        if (!/^\\./.test(path)) {\n          aliasMap[name] = path;\n        } else {\n          throw getErr(\"alias_relate_name\", {\n            name,\n            path,\n          });\n        }\n      } else {\n        throw getErr(\"alias_already\", {\n          name,\n        });\n      }\n    });\n  }\n  return true;\n}\n\nexport const path = (moduleName, baseURI) => {\n  if (moduleName.startsWith(\"http://\") || moduleName.startsWith(\"https://\")) {\n    return moduleName;\n  }\n\n  const [url, ...params] = moduleName.split(\" \");\n\n  let lastUrl = url;\n\n  if (/^@/.test(url)) {\n    const [first, ...args] = url.split(\"/\");\n\n    if (aliasMap[first]) {\n      lastUrl = [aliasMap[first].replace(/\\/$/, \"\"), ...args].join(\"/\");\n    } else {\n      throw getErr(\"no_alias\", {\n        name: first,\n        url: moduleName,\n      });\n    }\n  }\n\n  if (typeof location !== \"undefined\") {\n    const base = baseURI ? new URL(baseURI, location.href) : location.href;\n\n    const moduleURL = new URL(lastUrl, base);\n\n    lastUrl = moduleURL.href;\n  }\n\n  if (params.length) {\n    return `${lastUrl} ${params.join(\" \")}`;\n  }\n\n  return lastUrl;\n};\n","import { processor, use } from \"./use.mjs\";\nimport { aliasMap, path } from \"./config.mjs\";\nexport const LOADED = Symbol(\"loaded\");\n\nconst createLoad = (meta, opts) => {\n  if (!meta) {\n    meta = {\n      url: document.location.href,\n    };\n  }\n  const load = (ourl) => {\n    let [url, ...params] = ourl.split(\" \");\n\n    const reurl = path(url, meta.url);\n\n    return agent(reurl, { params, ...opts });\n  };\n  return load;\n};\n\nexport const agent = async (url, opts) => {\n  const urldata = new URL(url);\n  const { pathname } = urldata;\n\n  let type;\n  let realUrl = null;\n\n  opts.params &&\n    opts.params.forEach((e) => {\n      if (/^\\..+/.test(e)) {\n        type = e.replace(/^\\.(.+)/, \"$1\");\n      } else if (/^\\-\\-real/.test(e)) {\n        realUrl = e.replace(/^\\-\\-real\\:/, \"\");\n      }\n    });\n\n  if (!type) {\n    type = pathname.slice(((pathname.lastIndexOf(\".\") - 1) >>> 0) + 2);\n  }\n\n  const ctx = {\n    url,\n    result: null,\n    realUrl,\n    ...opts,\n  };\n\n  const oni = processor[type];\n\n  if (oni) {\n    await oni.run(ctx);\n  } else {\n    const result = await fetch(url);\n    const contentType = result.headers.get(\"Content-Type\");\n\n    const targetMapObject = [\n      [\"application/javascript\", \"js\"],\n      [\"application/json\", \"json\"],\n      [\"text/html\", \"html\"],\n      [\"text/xml\", \"xml\"],\n    ].find((e) => contentType.includes(e[0]));\n\n    let newOni;\n    if (targetMapObject) {\n      newOni = processor[targetMapObject[1]];\n    }\n\n    if (newOni) {\n      await newOni.run(ctx);\n    } else {\n      ctx.result = result;\n    }\n  }\n\n  if (opts && opts.element) {\n    const { element } = opts;\n    element[LOADED] = true;\n    const event = new Event(\"load\");\n    element.dispatchEvent(event);\n  }\n\n  if (opts.params && opts.params.includes(\"-ctx\")) {\n    return ctx;\n  }\n\n  return ctx.result;\n};\n\nexport default function lm(meta, opts) {\n  return createLoad(meta, opts);\n}\n\nObject.defineProperties(lm, {\n  use: {\n    value: use,\n  },\n  alias: {\n    get() {\n      return { ...aliasMap };\n    },\n  },\n});\n","import { getErr } from \"../ofa-error/main.js\";\nimport { agent, LOADED } from \"./main.mjs\";\n\nclass LoadModule extends HTMLElement {\n  constructor(...args) {\n    super(...args);\n\n    this[LOADED] = false;\n\n    Object.defineProperties(this, {\n      loaded: {\n        get: () => this[LOADED],\n      },\n    });\n\n    this._init();\n  }\n\n  _init() {\n    if (this.__initSrc || this.attributes.hasOwnProperty(\"pause\")) {\n      return;\n    }\n\n    let src = this.getAttribute(\"src\");\n\n    if (!src) {\n      return;\n      // throw `The ${this.tagName.toLowerCase()} element requires the src attribut `;\n    }\n    this.__initSrc = src;\n\n    const load = lm(undefined, {\n      element: this,\n    });\n\n    load(src);\n\n    Object.defineProperties(this, {\n      src: {\n        configurable: true,\n        value: src,\n      },\n    });\n  }\n\n  connectedCallback() {\n    const event = new CustomEvent(\"connected\");\n    event.root = this._root = this.getRootNode();\n    this.dispatchEvent(event);\n  }\n\n  disconnectedCallback() {\n    const event = new CustomEvent(\"disconnected\");\n    event.root = this._root;\n    delete this._root;\n    this.dispatchEvent(event);\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === \"src\") {\n      if (newValue && oldValue === null) {\n        this._init();\n      } else if (this.__initSrc && oldValue && newValue !== this.__initSrc) {\n        this.setAttribute(\"src\", this.__initSrc);\n\n        throw getErr(\"change_lm_src\", {\n          tag: this.tagName.toLowerCase(),\n        });\n      }\n    } else if (name === \"pause\" && newValue === null) {\n      this._init();\n    }\n  }\n\n  static get observedAttributes() {\n    return [\"src\", \"pause\"];\n  }\n}\n\nclass LM extends LoadModule {\n  constructor(...args) {\n    super(...args);\n  }\n}\n\nconst ready = () => {\n  customElements.define(\"load-module\", LoadModule);\n  customElements.define(\"l-m\", LM);\n  window.removeEventListener(\"load\", ready);\n};\n\nif (document.readyState === \"complete\") {\n  ready();\n} else {\n  window.addEventListener(\"load\", ready);\n}\n","import lm from \"./main.mjs\";\nimport \"./component.mjs\";\nimport config, { path } from \"./config.mjs\";\nlm.config = config;\nlm.path = path;\nObject.freeze(lm);\n\nwindow.lm = lm;\n\nexport default lm;\n","import { nextTick } from \"../stanz/public.mjs\";\nimport { searchEle } from \"../xhear/public.mjs\";\nimport { path } from \"../drill.js/config.mjs\";\nimport { eleX } from \"../xhear/util.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\n\nexport const resolvePath = path;\n\nexport function fixRelate(ele, path) {\n  searchEle(ele, \"[href],[src]\").forEach((el) => {\n    [\"href\", \"src\"].forEach((name) => {\n      const val = el.getAttribute(name);\n\n      if (/^#/.test(val)) {\n        return;\n      }\n\n      if (val && !/^(https?:)?\\/\\/\\S+/.test(val)) {\n        el.setAttribute(name, resolvePath(val, path));\n      }\n    });\n  });\n\n  searchEle(ele, \"template\").forEach((el) => {\n    fixRelate(el.content, path);\n  });\n}\n\nexport function fixRelatePathContent(content, path) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = content;\n\n  fixRelate(template.content, path);\n\n  // fix Resource references within style\n  searchEle(template.content, \"style\").forEach((styleEl) => {\n    const html = styleEl.innerHTML;\n\n    styleEl.innerHTML = html.replace(/url\\((.+)\\)/g, (original, adapted) => {\n      return `url(${resolvePath(adapted, path)})`;\n    });\n  });\n\n  return template.innerHTML;\n}\n\nexport const ISERROR = Symbol(\"loadError\");\n\nexport const getPagesData = async (src) => {\n  const load = lm({\n    url: src,\n  });\n  const pagesData = [];\n  let defaults;\n  let pageSrc = src;\n  let beforeSrc;\n  let errorObj;\n\n  while (true) {\n    try {\n      let lastSrc = pageSrc;\n      const [realPageSrc] = pageSrc.split(\" \");\n      const pageSrcObj = new URL(realPageSrc);\n      if (/\\/$/.test(pageSrcObj.pathname)) {\n        lastSrc += \" .html\";\n      }\n\n      defaults = await load(lastSrc);\n    } catch (error) {\n      let err;\n      if (beforeSrc) {\n        err = getErr(\n          \"page_wrap_fetch\",\n          {\n            before: beforeSrc,\n            current: pageSrc,\n          },\n          error\n        );\n      } else {\n        err = getErr(\n          \"load_page_module\",\n          {\n            url: pageSrc,\n          },\n          error\n        );\n      }\n      errorObj = err;\n\n      console.error(errorObj);\n    }\n\n    if (errorObj) {\n      pagesData.unshift({\n        src,\n        ISERROR,\n        error: errorObj,\n      });\n      break;\n    }\n\n    pagesData.unshift({\n      src: pageSrc,\n      defaults,\n    });\n\n    if (!defaults.parent) {\n      break;\n    }\n\n    beforeSrc = pageSrc;\n    pageSrc = resolvePath(defaults.parent, pageSrc);\n  }\n\n  return pagesData;\n};\n\nexport const createPage = (src, defaults) => {\n  // The $generated elements are not initialized immediately, so they need to be rendered in a normal container.\n  const tempCon = document.createElement(\"div\");\n\n  tempCon.innerHTML = `<o-page src=\"${src}\" data-pause-init=\"1\"></o-page>`;\n\n  const targetPage = eleX(tempCon.children[0]);\n\n  nextTick(async () => {\n    if (!targetPage._renderDefault) {\n      await waitPageReaded(targetPage);\n    }\n\n    targetPage._renderDefault(defaults);\n    targetPage.attr(\"data-pause-init\", null);\n  });\n\n  return targetPage;\n};\n\n// In the firefox environment, there will be a problem that the page component is not initialized, but the routing starts to be initialized in advance, resulting in an error. Therefore, wait for the page component to be initialized before continuing with the subsequent operations.\nexport const waitPageReaded = (page) => {\n  if (page._rendered) {\n    return;\n  }\n\n  return new Promise((resolve) => {\n    const timer = setInterval(() => {\n      if (page._rendered) {\n        clearInterval(timer);\n        resolve();\n      }\n    }, 500);\n  });\n};\n","import { nextTick } from \"../stanz/public.mjs\";\nimport $ from \"../xhear/base.mjs\";\nimport { fixRelate } from \"./public.mjs\";\nimport { renderExtends } from \"../xhear/render/render.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\n\nconst oldRender = renderExtends.render;\nrenderExtends.render = (e) => {\n  oldRender && oldRender(e);\n\n  const { step, name, target } = e;\n\n  const { link } = $.extensions;\n\n  if (step === \"init\") {\n    // Renders the component or page only once\n    if (target.host && link) {\n      $(target)\n        .all(\"a\")\n        .forEach((e) => link(e));\n    }\n  } else if (\n    name === \"attr\" &&\n    step === \"refresh\" &&\n    target.attr(\"olink\") === \"\"\n  ) {\n    const top = target.parents.pop() || target;\n\n    if (top.__fixLinkTimer) {\n      return;\n    }\n\n    top.__fixLinkTimer = nextTick(() => {\n      const { host } = target;\n\n      if (host && host.tag === \"o-page\") {\n        fixRelate(top.ele, host.src);\n      }\n\n      if (link) {\n        $(top)\n          .all(\"a\")\n          .forEach((e) => link(e));\n      }\n      delete top.__fixLinkTimer;\n    });\n  }\n};\n\nexport const initLink = (_this) => {\n  const $ele = $(_this);\n\n  // olink click to amend\n  $ele.on(\"click\", (e) => {\n    if (e.__processed) {\n      return;\n    }\n\n    const $tar = $(e.target);\n    const all = [$tar, ...$tar.parents];\n\n    let currentTarget = all.find((e) => e.tag === \"a\");\n    if (currentTarget) {\n      currentTarget = currentTarget.ele;\n    }\n\n    if (!currentTarget) {\n      return;\n    }\n\n    const targetVal = currentTarget.getAttribute(\"target\");\n    if (targetVal || currentTarget.getAttribute(\"download\")) {\n      return;\n    }\n\n    if (currentTarget.attributes.hasOwnProperty(\"olink\")) {\n      if ($ele.app) {\n        if (e.metaKey || e.shiftKey) {\n          return;\n        }\n\n        if (e.defaultPrevented) {\n          return;\n        }\n\n        e.preventDefault();\n\n        // Whether to abort the goto event\n        let prevented = false;\n        e.preventDefault = () => {\n          prevented = true;\n        };\n\n        e.__processed = true;\n\n        if (currentTarget.tagName === \"A\") {\n          const originHref = currentTarget.getAttribute(\"origin-href\");\n          // Prioritize the use of origin links\n          setTimeout(() => {\n            const finalHref = originHref || currentTarget.href;\n            finalHref && !prevented && $ele.app.goto(finalHref);\n          });\n        }\n      } else {\n        console.warn(getErr(\"olink_out_app\"), _this);\n      }\n    }\n  });\n};\n","import { resolvePath } from \"./public.mjs\";\nimport $ from \"../xhear/base.mjs\";\n\nconst strToBase64DataURI = async (str, mime, isb64 = true) => {\n  const file = new File([str], \"genfile\", { type: mime });\n\n  if (!isb64) {\n    return URL.createObjectURL(file);\n  }\n\n  const result = await new Promise((resolve) => {\n    const fr = new FileReader();\n\n    fr.onload = (e) => {\n      resolve(e.target.result);\n    };\n\n    fr.readAsDataURL(file);\n  });\n\n  return result;\n};\n\n/**\n * In the actual logical code, the generated code and the source code actually use the exact same logic, with only a change in line numbers. Therefore, it is only necessary to map the generated valid code back to the corresponding line numbers in the source file.\n *  */\nconst getSourcemapUrl = async (\n  filePath,\n  originStarRowIndex,\n  originEndRowIndex,\n  originContent,\n  startLine\n) => {\n  const originLineArr = originContent.split(\"\\n\");\n\n  let mappings = \"\";\n\n  for (let i = 0; i <= startLine; i++) {\n    mappings += \";\";\n  }\n\n  let beforeRowIndex = 0;\n  let beforeColIndex = 0;\n\n  for (let rowId = originStarRowIndex + 1; rowId < originEndRowIndex; rowId++) {\n    const target = originLineArr[rowId] || \"\";\n\n    let rowStr = \"\";\n\n    Array.from(target).forEach((e, colId) => {\n      const currentStr = `AA${vlcEncode(rowId - beforeRowIndex)}${vlcEncode(\n        colId - beforeColIndex\n      )}`;\n\n      if (!rowStr) {\n        rowStr = currentStr;\n      } else {\n        rowStr += `,${currentStr}`;\n      }\n\n      beforeRowIndex = rowId;\n      beforeColIndex = colId;\n    });\n\n    mappings += `${rowStr};`;\n  }\n\n  const sourcesContent = JSON.stringify([originContent])\n    .replace(/^\\[/, \"\")\n    .replace(/\\]$/, \"\");\n\n  const str = `{\"version\": 3,\n    \"sources\": [\"${filePath.replace(/\\?.+/, \"\")}\"],\n    \"sourcesContent\":[${sourcesContent}],\n    \"mappings\": \"${mappings}\"}`;\n\n  return await strToBase64DataURI(str, \"application/json\");\n};\n\n// 将 style 映射为 sourcemap 的 base64 link 标签，方便调试\nconst addStyleSourcemap = async (temp, originContent, filePath) => {\n  let reTemp = temp;\n\n  // 备份一份可修改的的原始内容\n  let backupOriginContent = originContent;\n\n  const tempEl = document.createElement(\"template\");\n  tempEl.innerHTML = temp;\n\n  const styleEls = tempEl.content.querySelectorAll(\"style\");\n\n  for (let e of Array.from(styleEls)) {\n    const styleContent = e.innerHTML;\n    const { outerHTML } = e;\n\n    // 编译后开始的行数\n    let startLine = 0;\n\n    // 拆分原内容\n    const matchArr = backupOriginContent.split(outerHTML);\n\n    // 编译前开始的行数\n    const originStarRowIndex = matchArr[0].split(\"\\n\").length - 1;\n\n    // 编译前结束的行数\n    const originEndRowIndex =\n      originStarRowIndex + styleContent.split(\"\\n\").length - 1;\n\n    // 替换 backupOriginContent 中已经sourcemap过的代码为换行符\n    let middleStr = \"\";\n    for (let i = 0, len = outerHTML.split(\"\\n\").length - 1; i < len; i++) {\n      middleStr += \"\\n\";\n    }\n    backupOriginContent = [matchArr[0], middleStr, matchArr[1]].join(\"\");\n\n    const sourceMapJSONURL = await getSourcemapUrl(\n      filePath,\n      originStarRowIndex,\n      originEndRowIndex,\n      originContent,\n      startLine\n    );\n\n    const sourcemapStr = `/*# sourceMappingURL=${sourceMapJSONURL}*/`;\n\n    reTemp = reTemp.replace(\n      outerHTML,\n      `${outerHTML.replace(\"</style>\", \"\")}\\n${sourcemapStr}</style>`\n    );\n  }\n\n  return reTemp;\n};\n\nconst cacheLink = new Map();\n\nexport async function drawUrl(content, url, isPage = true) {\n  let targetUrl = cacheLink.get(url);\n  if (targetUrl) {\n    return targetUrl;\n  }\n\n  let isDebug = $.debugMode;\n\n  const tempEl = $(\"<template></template>\");\n  tempEl.html = content;\n  const titleEl = tempEl.$(\"title\");\n\n  const targetTemp = tempEl.$(`template[${isPage ? \"page\" : \"component\"}]`);\n  const scriptEl = targetTemp.$(\"script\");\n\n  scriptEl && scriptEl.remove();\n\n  // If there is no content other than the <script>, then the shadow root is not set.\n  const hasTemp = !!targetTemp.html\n    .replace(/\\<\\!\\-\\-[\\s\\S]*?\\-\\-\\>/g, \"\")\n    .trim();\n  let temp = \"\";\n\n  if (hasTemp) {\n    temp = targetTemp.html\n      .replace(/\\s+$/, \"\")\n      .replace(/`/g, \"\\\\`\")\n      .replace(/\\$\\{/g, \"\\\\${\");\n\n    if (isDebug) {\n      temp = await addStyleSourcemap(temp, content, url);\n    }\n\n    temp = \"<style>*:not(:defined){display:none;}</style>\" + temp;\n  }\n\n  // 原来html文件中，转译后，属于前半部分的内容（后半部分就是script标签内的内容）\n  const beforeContent = `\n  export const type = ${isPage ? \"ofa.PAGE\" : \"ofa.COMP\"};\n  ${isPage && titleEl ? `export const title = '${titleEl.text}';` : \"\"}\n  export const temp = \\`${temp}\\`;`;\n\n  let scriptContent = \"\";\n  if (scriptEl) {\n    scriptContent = scriptEl.html\n      .split(/;/g)\n      .map((content) => {\n        const t_content = content.trim();\n        // Confirm it is an import reference and correct the address\n        if (/^import[ \\{'\"]/.test(t_content)) {\n          // Update address string directly\n          return content.replace(/['\"]([\\s\\S]+)['\"]/, (arg0, pathStr) => {\n            return `\"${resolvePath(pathStr, url)}\"`;\n          });\n        }\n        return content;\n      })\n      .join(\";\");\n  }\n\n  const fileContent = `${beforeContent};\n${scriptContent}`;\n\n  let sourcemapStr = \"\";\n\n  if (isDebug) {\n    const originLineArr = content.split(\"\\n\");\n\n    // Determine the starting line number of the source file.\n    const originStarRowIndex = originLineArr.findIndex(\n      (lineContent) => lineContent.trim() === \"<script>\"\n    );\n\n    // Determine the ending line number of the source file.\n    const originEndRowIndex = originLineArr.findIndex(\n      (lineContent) => lineContent.trim() === \"</script>\"\n    );\n\n    sourcemapStr = `//# sourceMappingURL=${await getSourcemapUrl(\n      url,\n      originStarRowIndex,\n      originEndRowIndex,\n      content,\n      beforeContent.split(\"\\n\").length\n    )}`;\n  }\n\n  const finalContent = `${fileContent}\\n${sourcemapStr}`;\n\n  const isFirefox = navigator.userAgent.includes(\"Firefox\");\n\n  targetUrl = strToBase64DataURI(\n    finalContent,\n    \"text/javascript\",\n    isFirefox ? false : true\n  );\n\n  cacheLink.set(url, targetUrl);\n\n  return targetUrl;\n}\n\nconst base64 =\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\nfunction toVLQSigned(value) {\n  return value < 0 ? (-value << 1) + 1 : (value << 1) + 0;\n}\n\nfunction vlcEncode(value) {\n  let encoded = \"\";\n  let vlq = toVLQSigned(value);\n\n  do {\n    let digit = vlq & 0b11111;\n    vlq >>>= 5;\n    if (vlq > 0) {\n      digit |= 0b100000;\n    }\n    encoded += base64[digit];\n  } while (vlq > 0);\n\n  return encoded;\n}\n","import lm from \"../drill.js/base.mjs\";\nimport $ from \"../xhear/base.mjs\";\nimport { renderElement } from \"../xhear/register.mjs\";\nimport { convert } from \"../xhear/render/render.mjs\";\nimport { searchEle, isFunction } from \"../xhear/public.mjs\";\nimport {\n  fixRelatePathContent,\n  resolvePath,\n  getPagesData,\n  createPage,\n  ISERROR,\n} from \"./public.mjs\";\nimport { initLink } from \"./link.mjs\";\nimport { nextTick } from \"../stanz/public.mjs\";\n\nimport { drawUrl } from \"./draw-template.mjs\";\nimport { getErr, getErrDesc } from \"../ofa-error/main.js\";\n\nconst clone = (obj) => JSON.parse(JSON.stringify(obj));\n\nconst PAGE = Symbol(\"Page\");\n\nObject.defineProperty($, \"PAGE\", {\n  value: PAGE,\n});\n\nlm.use([\"html\", \"htm\"], async (ctx, next) => {\n  const { result: content, params } = ctx;\n\n  if (\n    content &&\n    /<template +page *>/.test(content) &&\n    !params.includes(\"-ignore-temp\")\n  ) {\n    try {\n      const url = await drawUrl(content, ctx.url);\n      ctx.result = await lm()(`${url} .mjs --real:${ctx.url}`);\n    } catch (error) {\n      throw getErr(\n        \"load_page_module\",\n        {\n          url: ctx.url,\n        },\n        error\n      );\n    }\n    ctx.resultContent = content;\n  }\n\n  await next();\n});\n\nlm.use([\"js\", \"mjs\"], async (ctx, next) => {\n  const { result: moduleData, url, realUrl } = ctx;\n  if (typeof moduleData !== \"object\" || moduleData.type !== PAGE) {\n    await next();\n    return;\n  }\n\n  const defaultsData = await getDefault(moduleData, realUrl || url);\n\n  let tempSrc = defaultsData.temp;\n\n  if (!/<.+>/.test(tempSrc)) {\n    if (tempSrc) {\n      tempSrc = resolvePath(tempSrc, url);\n    } else {\n      tempSrc = url.replace(/\\.m?js.*/, \".html\");\n    }\n\n    try {\n      defaultsData.temp = await fetch(tempSrc).then((e) => e.text());\n    } catch (error) {\n      const err = getErr(\n        \"fetch_temp_err\",\n        {\n          url: realUrl || url,\n          tempSrc,\n        },\n        error\n      );\n      self.emit(\"error\", { data: { error: err } });\n      throw err;\n    }\n  }\n\n  ctx.result = defaultsData;\n\n  await next();\n});\n\nsetTimeout(() => {\n  // Let the pod's running time be slower than the `type=\"module\"` time\n  $.register({\n    tag: \"o-page\",\n    attrs: {\n      src: null,\n    },\n    data: {\n      pageIsReady: null,\n    },\n    watch: {\n      async src(src) {\n        if (!src) {\n          return;\n        }\n\n        if (!src.startsWith(\"//\") && !/[a-z]+:\\/\\//.test(src)) {\n          src = resolvePath(src);\n          this.src = src;\n          return;\n        }\n\n        if (this.__init_src) {\n          if (this.__init_src !== src) {\n            throw Error(\n              \"A page that has already been initialized cannot be set with the src attribute\"\n            );\n          }\n          return;\n        }\n\n        this.__init_src = src;\n\n        if (this._defaults || this.attr(\"data-pause-init\")) {\n          return;\n        }\n\n        const pagesData = await getPagesData(src);\n\n        if (this._defaults) {\n          return;\n        }\n\n        const target = pagesData.pop();\n\n        pagesData.forEach((e, i) => {\n          const parentPage = createPage(e.src, e.defaults);\n\n          if (this.parent) {\n            this.wrap(parentPage);\n          } else {\n            const needWraps = this.__need_wraps || (this.__need_wraps = []);\n            needWraps.push(parentPage);\n          }\n        });\n\n        if (target.ISERROR === ISERROR) {\n          const failContent = getFailContent(\n            src,\n            target,\n            this?.app?._module?.fail\n          );\n\n          this._renderDefault({\n            type: PAGE,\n            temp: failContent,\n          });\n        } else {\n          this._renderDefault(target.defaults);\n        }\n      },\n    },\n    attached() {\n      // this.css.display = \"block\";\n\n      const needWraps = this.__need_wraps;\n      if (needWraps) {\n        needWraps.forEach((page) => {\n          this.wrap(page);\n        });\n        delete this.__need_wraps;\n      }\n\n      if (this.__not_run_attached) {\n        if (this._defaults.attached) {\n          this._defaults.attached.call(this);\n        }\n        delete this.__not_run_attached;\n      }\n    },\n    detached() {\n      const { _defaults } = this;\n\n      if (_defaults && _defaults.detached) {\n        _defaults.detached.call(this);\n      }\n    },\n    proto: {\n      async _renderDefault(defaults) {\n        const { src } = this;\n\n        if (defaults.data) {\n          // 检查 proto 和 data 上的key，是否和fn上的key冲突\n          Object.keys(defaults.data).forEach((name) => {\n            if (name in this) {\n              throw getErr(\"page_invalid_key\", {\n                src,\n                targetName: \"data\",\n                name,\n              });\n            }\n          });\n        }\n\n        if (defaults.proto) {\n          Object.keys(defaults.proto).forEach((name) => {\n            if (name in this) {\n              console.warn(\n                getErrDesc(\"page_invalid_key\", {\n                  src,\n                  targetName: \"proto\",\n                  name,\n                }),\n                defaults\n              );\n            }\n          });\n        }\n\n        if (this._defaults) {\n          const err = getErr(\"page_no_defaults\", { src });\n          console.warn(err, this);\n          throw err;\n        }\n\n        this._defaults = defaults;\n\n        if (defaults.pageAnime) {\n          this._pageAnime = defaults.pageAnime;\n        }\n\n        if (!defaults || defaults.type !== PAGE) {\n          const err = getErr(\"not_page_module\", { src });\n          console.warn(err, this);\n          this.emit(\"error\", { data: { error: err } });\n          this.__reject(err);\n          throw err;\n        }\n\n        const template = document.createElement(\"template\");\n        template.innerHTML = fixRelatePathContent(defaults.temp, src);\n        const temps = convert(template);\n\n        try {\n          renderElement({\n            defaults,\n            ele: this.ele,\n            template,\n            temps,\n          });\n        } catch (error) {\n          const err = getErr(\"page_failed\", { src }, error);\n          console.error(err);\n          console.warn(err, this);\n        }\n\n        await dispatchLoad(this, defaults.loaded);\n\n        initLink(this.shadow);\n\n        this.emit(\"page-loaded\");\n\n        this.__resolve();\n\n        this.pageIsReady = 1;\n\n        const { app } = this;\n        if (app && !app.appIsReady) {\n          nextTick(() => {\n            app.appIsReady = 1;\n          });\n        }\n\n        if (this.ele.isConnected) {\n          if (defaults.attached) {\n            defaults.attached.call(this);\n          }\n        } else {\n          this.__not_run_attached = 1;\n        }\n      },\n      back() {\n        this.app.back();\n      },\n      goto(src) {\n        this.app.goto(resolvePath(src, this.src));\n      },\n      replace(src) {\n        this.app.replace(resolvePath(src, this.src));\n      },\n      get pageAnime() {\n        const { app, _pageAnime } = this;\n\n        const { pageAnime } = app?._module || {};\n\n        return clone({ ...pageAnime, ...(_pageAnime || {}) });\n      },\n      set pageAnime(val) {\n        this._pageAnime = val;\n      },\n    },\n\n    ready() {\n      this._rendered = new Promise((resolve, reject) => {\n        this.__resolve = () => {\n          delete this.__resolve;\n          delete this.__reject;\n          resolve();\n        };\n        this.__reject = () => {\n          delete this.__resolve;\n          delete this.__reject;\n          reject();\n        };\n      });\n    },\n  });\n});\n\nexport const dispatchLoad = async (_this, loaded) => {\n  const shadow = _this.ele.shadowRoot;\n\n  if (shadow) {\n    const srcEles = searchEle(shadow, `l-m,load-module`);\n    const pms = srcEles.map(\n      (el) =>\n        new Promise((res) => {\n          el.addEventListener(\"load\", (e) => {\n            res();\n          });\n        })\n    );\n\n    const links = searchEle(shadow, `link`);\n\n    links.forEach((link) => {\n      if (link.rel === \"stylesheet\") {\n        pms.push(\n          new Promise((res) => {\n            let resolve = () => {\n              clearInterval(timer);\n              link.removeEventListener(\"load\", resolve);\n              link.removeEventListener(\"error\", resolve);\n              res();\n            };\n            const timer = setInterval(() => {\n              if (!link.parentNode) {\n                resolve();\n              }\n            }, 100);\n\n            if (link.sheet) {\n              resolve();\n            } else {\n              link.addEventListener(\"load\", resolve);\n              link.addEventListener(\"error\", resolve);\n            }\n          })\n        );\n      }\n    });\n\n    await Promise.all(pms);\n  }\n\n  if (loaded) {\n    loaded.call(_this);\n  }\n};\n\nexport const getDefault = async (moduleData, url) => {\n  let finnalDefault = {};\n\n  const { default: defaultData } = moduleData;\n\n  const relateLoad = lm({\n    url,\n  });\n\n  if (isFunction(defaultData)) {\n    finnalDefault = await defaultData({\n      load: relateLoad,\n      url,\n      get query() {\n        const urlObj = new URL(url);\n        return Object.fromEntries(Array.from(urlObj.searchParams.entries()));\n      },\n    });\n  } else if (defaultData instanceof Object) {\n    finnalDefault = { ...defaultData };\n  }\n\n  const defaults = {\n    proto: {},\n    ...moduleData,\n    ...finnalDefault,\n  };\n\n  return defaults;\n};\n\nexport const getFailContent = (src, target, fail) => {\n  let failContent;\n\n  if (fail) {\n    failContent = fail({\n      src,\n      error: target.error,\n    });\n  } else {\n    failContent = `<div style=\"padding:20px;color:red;\">${(\n      target.error.stack || target.error.toString()\n    )\n      .replace(/\\n/g, \"<br>\")\n      .replace(/ /g, \"&nbsp;\")}</div>`;\n  }\n\n  return failContent;\n};\n","import lm from \"../drill.js/base.mjs\";\nimport $ from \"../xhear/base.mjs\";\nimport { isFunction, toDashCase } from \"../xhear/public.mjs\";\nimport { dispatchLoad } from \"./page.mjs\";\nimport { drawUrl } from \"./draw-template.mjs\";\nimport { fixRelatePathContent, resolvePath } from \"./public.mjs\";\nimport { initLink } from \"./link.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\n\nconst COMP = Symbol(\"Component\");\nexport const COMPONENT_PATH = Symbol(\"PATH\");\n\nObject.defineProperty($, \"COMP\", {\n  value: COMP,\n});\n\nconst cacheComps = {};\n\nlm.use([\"html\", \"htm\"], async (ctx, next) => {\n  const { result: content, params } = ctx;\n\n  if (\n    content &&\n    /<template +component *>/.test(content) &&\n    !params.includes(\"-ignore-temp\")\n  ) {\n    try {\n      const url = await drawUrl(content, ctx.url, false);\n      ctx.result = await lm()(`${url} .mjs --real:${ctx.url}`);\n    } catch (err) {\n      throw getErr(\n        \"load_comp_module\",\n        {\n          url: ctx.url,\n        },\n        err\n      );\n    }\n    ctx.resultContent = content;\n  }\n\n  await next();\n});\n\nlm.use([\"js\", \"mjs\"], async (ctx, next) => {\n  const { result: moduleData, url, realUrl } = ctx;\n  if (typeof moduleData !== \"object\" || moduleData.type !== COMP) {\n    next();\n    return;\n  }\n\n  let finnalDefault = {};\n\n  const { default: defaultData } = moduleData;\n\n  const path = realUrl || url;\n\n  if (isFunction(defaultData)) {\n    finnalDefault = await defaultData({\n      load: lm({\n        url: path,\n      }),\n      url: path,\n    });\n  } else if (defaultData instanceof Object) {\n    finnalDefault = { ...defaultData };\n  }\n\n  const { tag, temp } = { ...moduleData, ...finnalDefault };\n\n  let tagName = tag;\n  const matchName = path.match(/\\/([^/]+)\\.m?(js|htm|html)$/);\n\n  if (!tagName) {\n    if (matchName) {\n      tagName = toDashCase(matchName[1]);\n    }\n  }\n\n  const cacheUrl = cacheComps[tagName];\n  if (cacheUrl) {\n    if (path !== cacheUrl) {\n      throw getErr(\"comp_registered\", {\n        name: tagName,\n      });\n    }\n\n    await next();\n    return;\n  }\n\n  cacheComps[tagName] = path;\n\n  let tempUrl,\n    tempContent = \"\";\n\n  if (/<.+>/.test(temp)) {\n    tempUrl = path;\n    tempContent = temp;\n  } else if (temp !== \"\") {\n    // An empty string means the shadow root is not needed.\n    if (!temp) {\n      tempUrl = resolvePath(`${matchName[1]}.html`, path);\n    } else {\n      tempUrl = resolvePath(temp, path);\n    }\n\n    tempContent = await fetch(tempUrl).then((e) => e.text());\n  }\n\n  const registerOpts = {\n    ...moduleData,\n    ...finnalDefault,\n  };\n\n  const oldReady = registerOpts.ready;\n  const { loaded } = registerOpts;\n  registerOpts.ready = async function (...args) {\n    oldReady && oldReady.apply(this, args);\n    loaded && dispatchLoad(this, loaded);\n    this.shadow && initLink(this.shadow);\n  };\n\n  const oldCreated = registerOpts.created;\n  registerOpts.created = function (...args) {\n    this[COMPONENT_PATH] = path;\n    oldCreated && oldCreated.call(this, ...args);\n  };\n\n  const regTemp = fixRelatePathContent(tempContent, path || tempUrl);\n\n  $.register({\n    ...registerOpts,\n    tag: tagName,\n    temp: regTemp,\n  });\n\n  await next();\n});\n","// import lm from \"../drill.js/base.mjs\";\nimport $ from \"../xhear/base.mjs\";\nimport {\n  resolvePath,\n  getPagesData,\n  ISERROR,\n  createPage,\n  waitPageReaded,\n} from \"./public.mjs\";\nimport { getDefault, getFailContent } from \"./page.mjs\";\nimport { createXEle } from \"../xhear/util.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\n\nconst HISTORY = \"_history\";\nconst FORWARDS = \"_forwards\";\n\nconst appendPage = async ({ src, app }) => {\n  const { loading, fail } = app._module || {};\n\n  let loadingEl;\n  if (loading) {\n    loadingEl = createXEle(loading());\n\n    if (!loadingEl) {\n      const err = getErr(\"loading_nothing\");\n      console.warn(err, loading);\n      throw err;\n    }\n\n    app.push(loadingEl);\n  }\n\n  const currentPages = [];\n  {\n    const { current } = app;\n    if (current) {\n      currentPages.push(current);\n      for (let page of current.parents) {\n        if (page.tag !== \"o-page\") {\n          break;\n        }\n\n        currentPages.unshift(page);\n      }\n    }\n  }\n\n  const oriNextPages = await getPagesData(src);\n\n  let container = app;\n\n  const publicParents = []; // Public parent pages that have not been cleared\n  const finalPages = [];\n  let old;\n\n  // Nested routing code\n  // Keep the parent page with the same src\n  let isSame = true;\n  oriNextPages.forEach((e, index) => {\n    const current = currentPages[index];\n\n    if (!isSame) {\n      finalPages.push(e);\n      return;\n    }\n\n    if (!current || current.src !== e.src) {\n      isSame = false;\n      finalPages.push(e);\n      old = current;\n      return;\n    }\n\n    publicParents.push(current);\n\n    container = current;\n  });\n\n  // In the case of only the parent page, the old variable needs to be corrected\n  if (currentPages.length > oriNextPages.length && !old) {\n    currentPages.some((e, index) => {\n      const current = oriNextPages[index];\n\n      if (!current || current.src !== e.src) {\n        old = e;\n        return true;\n      }\n    });\n  }\n\n  let topPage, innerPage;\n\n  finalPages.forEach((pageData) => {\n    const { ISERROR: isError } = pageData;\n\n    let page;\n    if (isError) {\n      const failContent = getFailContent(pageData.src, pageData, fail);\n\n      page = createPage(pageData.src, {\n        type: $.PAGE,\n        temp: failContent,\n      });\n    } else {\n      page = createPage(pageData.src, pageData.defaults);\n    }\n\n    if (!topPage) {\n      topPage = page;\n      return;\n    }\n\n    if (!innerPage) {\n      topPage.push(page);\n      innerPage = page;\n      return;\n    }\n\n    innerPage.push(page);\n    innerPage = page;\n  });\n\n  if (topPage) {\n    container.push(topPage);\n  }\n\n  loadingEl && loadingEl.remove();\n\n  return { current: topPage, old, publics: publicParents };\n};\n\n// 触发父page的 routerChange 事件\nconst emitRouterChange = (_this, publics, type) => {\n  if (publics && publics.length) {\n    const { current } = _this;\n    publics.forEach((page) => {\n      // const { page } = e;\n      const { routerChange } = page._defaults;\n\n      if (routerChange) {\n        routerChange.call(page, { type, current });\n      }\n    });\n  }\n};\n\n$.register({\n  tag: \"o-app\",\n  temp: `<style>:host{position:relative;display:block}::slotted(*){display:block;width:100%;height:100%;}</style><slot></slot>`,\n  attrs: {\n    src: null,\n  },\n  data: {\n    [HISTORY]: [],\n    appIsReady: null,\n    // _forwards: [],\n  },\n  watch: {\n    async src(val) {\n      if (this.__init_src) {\n        if (this.__init_src !== val) {\n          throw getErr(\"app_src_change\");\n        }\n        return;\n      }\n\n      if (!val) {\n        return;\n      }\n\n      this.__init_src = val;\n\n      let selfUrl = val;\n      if (val && !val.startsWith(\"//\") && !/[a-z]+:\\/\\//.test(val)) {\n        selfUrl = resolvePath(val);\n      }\n\n      const load = lm();\n\n      const moduleData = await load(selfUrl);\n\n      if (moduleData.allowForward) {\n        this[FORWARDS] = [];\n      }\n\n      const defaults = await getDefault(moduleData, selfUrl);\n\n      this._module = defaults;\n\n      this.extend(defaults.proto);\n\n      if (defaults.ready) {\n        defaults.ready.call(this);\n      }\n\n      if (this._settedRouters) {\n        return;\n      }\n\n      if (!this.$(\"o-page\") && !this._initHome && defaults.home) {\n        const homeUrl = new URL(defaults.home, selfUrl).href;\n        this.push(`<o-page src=\"${homeUrl}\"></o-page>`);\n      }\n    },\n  },\n  proto: {\n    async forward(delta = 1) {\n      if (!this[FORWARDS]) {\n        const err = getErr(\"need_forwards\");\n        console.warn(err, this);\n        return;\n      }\n\n      delta = delta < this[FORWARDS].length ? delta : this[FORWARDS].length;\n\n      const forwardHistory = this[FORWARDS].splice(-delta);\n\n      if (!forwardHistory.length) {\n        const err = getErr(\"app_noforward\");\n        console.warn(err, {\n          app: this,\n        });\n        return;\n      }\n\n      return this._navigate({\n        type: \"forward\",\n        src: forwardHistory[0].src,\n        forwardHistory,\n        delta,\n      });\n    },\n    async back(delta = 1) {\n      if (!this[HISTORY].length) {\n        const err = getErr(\"app_noback\");\n        console.warn(err, {\n          app: this,\n        });\n        return;\n      }\n\n      const oldRouters = this.routers;\n\n      const { _noanime } = this;\n\n      // Delete historical data for response numbers\n      delta = delta < this[HISTORY].length ? delta : this[HISTORY].length;\n\n      const newCurrent = this[HISTORY].splice(-delta)[0];\n\n      let {\n        current: page,\n        old: needRemovePage,\n        publics,\n      } = await appendPage({\n        src: newCurrent.src,\n        app: this,\n      });\n\n      if (!_noanime && page) {\n        await pageInAnime({\n          page,\n          key: \"previous\",\n        });\n      }\n\n      if (needRemovePage) {\n        needRemovePage = resetOldPage(needRemovePage);\n      }\n\n      const oldHis = oldRouters.slice(-1 * delta);\n\n      if (this[FORWARDS]) {\n        this[FORWARDS].push(...oldHis);\n      }\n\n      this.emit(\"router-change\", {\n        data: { name: \"back\", delta, historys: oldHis },\n      });\n\n      emitRouterChange(this, publics, \"back\");\n\n      if (!_noanime && needRemovePage) {\n        await pageOutAnime({\n          page: needRemovePage,\n          key: \"next\",\n        });\n      }\n\n      if (needRemovePage) {\n        needRemovePage.remove();\n      }\n    },\n    async _navigate(options) {\n      let { type, src } = options;\n\n      const { _noanime } = this;\n      const { current: oldCurrent } = this;\n      // src = new URL(src, location.href).href;\n      src = resolvePath(src);\n\n      runAccess(this, src);\n\n      if (!oldCurrent) {\n        this._initHome = src;\n      }\n\n      let {\n        current: page,\n        old: needRemovePage,\n        publics,\n      } = await appendPage({\n        src,\n        app: this,\n      });\n\n      if (!page) {\n        return;\n      }\n\n      if (!_noanime && page) {\n        await pageInAnime({\n          page,\n          key: \"next\",\n        });\n      }\n\n      if (needRemovePage) {\n        needRemovePage = resetOldPage(needRemovePage);\n      }\n\n      const routerData = { name: type, src };\n\n      if (type === \"goto\" || type === \"forward\") {\n        oldCurrent && this[HISTORY].push({ src: oldCurrent.src });\n      }\n\n      if (type === \"goto\") {\n        if (Array.isArray(this[FORWARDS])) {\n          this[FORWARDS] = [];\n        }\n      }\n\n      if (type === \"forward\") {\n        const { forwardHistory } = options;\n        const nextHistory = forwardHistory.slice(1).reverse();\n        this[HISTORY].push(...nextHistory);\n        routerData.delta = options.delta;\n      }\n\n      this.emit(\"router-change\", {\n        data: routerData,\n      });\n\n      emitRouterChange(this, publics, type);\n\n      if (oldCurrent && needRemovePage) {\n        if (!_noanime) {\n          await pageOutAnime({\n            page: needRemovePage,\n            key: \"previous\",\n          });\n        }\n        needRemovePage.remove();\n      }\n    },\n    goto(src) {\n      return this._navigate({ type: \"goto\", src });\n    },\n    replace(src) {\n      return this._navigate({ type: \"replace\", src });\n    },\n    get current() {\n      return this.all(\"o-page\")\n        .reverse()\n        .find((page) => {\n          let target = page;\n          while (target.tag === \"o-page\") {\n            if (target.data.willRemoved) {\n              return false;\n            }\n            target = target.parent;\n          }\n\n          return true;\n        });\n    },\n    get routers() {\n      let { current } = this;\n\n      if (!current) {\n        return [];\n      }\n\n      const routers = [\n        ...this[HISTORY],\n        {\n          src: current.src,\n        },\n      ];\n\n      return routers;\n    },\n    set routers(_routers) {\n      _routers = _routers.map((e) => {\n        runAccess(this, e.src);\n\n        return { src: e.src };\n      });\n\n      this._settedRouters = 1;\n\n      this.html = \"\";\n\n      const historyRouters = _routers.slice();\n\n      const currentRouter = historyRouters.pop();\n\n      this[HISTORY].length = 0;\n      this[HISTORY].push(...historyRouters);\n\n      this.push({\n        tag: \"o-page\",\n        src: currentRouter.src,\n      });\n    },\n  },\n});\n\n// Ensure that the page is available, handle cross-domain pages and other operations\nconst runAccess = (app, src) => {\n  const access = app?._module?.access;\n\n  const srcObj = new URL(src);\n\n  if (srcObj.origin !== location.origin && !access) {\n    const err = getErr(\"no_cross_access_func\");\n    console.warn(err, app.ele, app?._module);\n    throw err;\n  }\n\n  if (access) {\n    const result = access(src);\n\n    if (result !== true) {\n      const err = getErr(\n        \"access_return_error\",\n        { src },\n        result instanceof Error ? result : undefined\n      );\n      console.warn(err, app);\n      throw err;\n    }\n  }\n};\n\nconst pageInAnime = async ({ page, key }) => {\n  if (!page._rendered) {\n    // firefox bug\n    await waitPageReaded(page);\n  }\n\n  const { pageAnime } = page;\n\n  const targetAnime = pageAnime[key];\n\n  if (targetAnime) {\n    page.css = {\n      ...page.css,\n      ...targetAnime,\n    };\n\n    nextAnimeFrame(() => {\n      page.css = {\n        ...page.css,\n        transition: \"all ease .3s\",\n        ...(pageAnime.current || {}),\n      };\n    });\n  }\n};\n\nconst pageOutAnime = ({ page, key }) =>\n  new Promise((resolve) => {\n    const targetAnime = page.pageAnime[key];\n\n    if (targetAnime) {\n      nextAnimeFrame(() => {\n        page.one(\"transitionend\", resolve);\n\n        page.css = {\n          ...page.css,\n          transition: \"all ease .3s\",\n          ...targetAnime,\n        };\n      });\n    } else {\n      resolve();\n    }\n  });\n\nconst nextAnimeFrame = (func) =>\n  requestAnimationFrame(() => {\n    setTimeout(func, 5);\n  });\n\nconst resetOldPage = (needRemovePage) => {\n  needRemovePage.css = {\n    position: \"absolute\",\n    width: `${needRemovePage.width}px`,\n    height: `${needRemovePage.height}px`,\n  };\n  needRemovePage.data.willRemoved = 1;\n\n  return needRemovePage;\n};\n","import $ from \"../xhear/base.mjs\";\nimport { isFunction } from \"../xhear/public.mjs\";\nimport { COMPONENT_PATH } from \"./comp.mjs\";\n\nconst oldAttr = $.fn.attr;\n\nfunction attr(...args) {\n  let [name, value, options] = args;\n\n  if (isFunction(value)) {\n    value = value();\n  }\n\n  const { host } = this;\n\n  if (host && [\"href\", \"src\"].includes(name) && /^\\./.test(value)) {\n    const { PATH } = host;\n\n    if (PATH) {\n      const { href } = new URL(value, PATH);\n\n      return oldAttr.call(this, name, href);\n    }\n  }\n\n  return oldAttr.call(this, ...args);\n}\n\nattr.always = oldAttr.always;\n\n$.fn.extend({\n  get app() {\n    let target = this;\n\n    while (target && target !== \"o-app\") {\n      if (target.tag === \"o-page\") {\n        const result = target.parents.find((el) => el.tag === \"o-app\");\n\n        if (result) {\n          target = result;\n          break;\n        }\n      }\n\n      target = target.host;\n\n      if (!target) {\n        break;\n      }\n    }\n\n    return target;\n  },\n  get PATH() {\n    // component or page file path\n    return this[COMPONENT_PATH] || this.src || null;\n  },\n  attr,\n});\n","import $ from \"../xhear/base.mjs\";\nimport { SELF } from \"../stanz/main.mjs\";\nimport { hyphenToUpperCase, toDashCase } from \"../xhear/public.mjs\";\nimport { getErr, getErrDesc } from \"../ofa-error/main.js\";\n\n// 根provider\nconst rootProviders = {};\n\nconst temp = `<style>:host{display:contents}</style><slot></slot>`;\n\nconst CONSUMERS = Symbol(\"consumers\");\nconst PROVIDER = Symbol(\"provider\");\n\nObject.defineProperty($, \"getRootProvider\", {\n  value(name) {\n    return rootProviders[name];\n  },\n});\n\n// 获取对应name的上一级 provider 元素\n$.fn.getProvider = function (name) {\n  let reval = null;\n\n  this.emit(\"update-consumer\", {\n    data: {\n      method: \"getProvider\",\n      name,\n      callback(target) {\n        reval = target;\n      },\n    },\n    composed: true,\n  });\n\n  return reval;\n};\n\n$(\"html\").on(\"update-consumer\", (e) => {\n  const { name, consumer, method } = e.data;\n\n  const targetRootProvider = rootProviders[name];\n\n  if (method === \"getProvider\") {\n    e.data.callback(targetRootProvider);\n    return;\n  }\n\n  if (targetRootProvider) {\n    targetRootProvider[CONSUMERS].add(consumer);\n    consumer[PROVIDER] = targetRootProvider;\n    consumer._refresh();\n    return;\n  } else {\n    // 提示后面加入的根provider需要遍历\n    rootProviders[name] = null;\n  }\n\n  if (consumer && consumer.tag === \"o-consumer\") {\n    let hasData = false;\n\n    // 清空冒泡到根的 consumer 数据\n    Object.keys(consumer[SELF]).forEach((key) => {\n      if (InvalidKeys.includes(key)) {\n        return;\n      }\n      consumer[key] = undefined;\n\n      hasData = true;\n    });\n\n    if (hasData) {\n      console.warn(getErrDesc(\"no_provider\", { name: consumer.name }), target);\n    }\n  }\n});\n\nconst publicProto = {\n  // 向上冒泡，让 provider 和 consumer 绑定\n  _update(provider) {\n    if (this[PROVIDER] && this[PROVIDER] === provider) {\n      return;\n    }\n\n    if (this[PROVIDER]) {\n      this._clear();\n    }\n\n    // if (provider) {\n    //   this[PROVIDER] = provider;\n    //   provider[CONSUMERS].add(this);\n    //   return;\n    // }\n\n    if (this.name) {\n      this.emit(`update-consumer`, {\n        data: {\n          name: this.name,\n          consumer: this,\n        },\n        composed: true,\n      });\n    }\n  },\n  _clear() {\n    const provider = this[PROVIDER];\n    provider[CONSUMERS].delete(this);\n    this[PROVIDER] = null;\n  },\n};\n\nconst publicWatch = {\n  name() {\n    // 是否已经设置过\n    if (!this.__named) {\n      this.__named = 1;\n      return;\n    }\n\n    console.warn(\n      getErrDesc(\"context_change_name\", {\n        compName: ` \"${this.tag}\" `,\n      }),\n      this.ele\n    );\n\n    this._update();\n  },\n};\n\nconst InvalidKeys = [\n  \"tag\",\n  \"name\",\n  \"class\",\n  \"style\",\n  \"id\",\n  \"x-bind-data\",\n  \"is-root\",\n];\n\nconst providerOptions = {\n  tag: \"o-provider\",\n  temp,\n  attrs: {\n    name: null,\n  },\n  watch: {\n    ...publicWatch,\n  },\n  proto: {\n    ...publicProto,\n    get consumers() {\n      return [...Array.from(this[CONSUMERS])];\n    },\n    get provider() {\n      return this[PROVIDER];\n    },\n    _refresh() {\n      // 辅助consumer刷新数据\n      this.consumers.forEach((e) => e._refresh());\n    },\n    _setConsumer(name, value, isSelf) {\n      if (isSelf || this[name] === undefined || this[name] === null) {\n        if (value === undefined || value === null) {\n          // 删除属性，则向上层获取对应值，并向下设置\n          let parentProvider = this.provider;\n          while ((value === undefined || value === null) && parentProvider) {\n            value = parentProvider[name];\n            if (value) {\n              break;\n            }\n            parentProvider = parentProvider.provider;\n          }\n        }\n\n        this[CONSUMERS].forEach((consumer) => {\n          // 主动设置数据，性能更好\n          if (consumer._setConsumer) {\n            consumer._setConsumer(name, value);\n          } else {\n            if (consumer[name] !== value) {\n              consumer[name] = value;\n            }\n          }\n        });\n      }\n    },\n  },\n  ready() {\n    this[CONSUMERS] = new Set();\n\n    this.on(\"update-consumer\", (e) => {\n      if (e.target === e.currentTarget) {\n        // 给自己出触发的事件，不做处理\n        return;\n      }\n\n      const { name, consumer, method } = e.data;\n\n      if (name && this.name === name && method === \"getProvider\") {\n        // 查找provider\n        e.data.callback(this);\n        e.stopPropagation();\n        return;\n      }\n\n      if (name && this.name === name) {\n        this[CONSUMERS].add(consumer);\n        consumer[PROVIDER] = this;\n\n        // 查找到对应的provider后，禁止向上冒泡\n        e.stopPropagation();\n\n        consumer._refresh();\n      }\n    });\n\n    this.watch((e) => {\n      if (e.target === this && e.type === \"set\") {\n        // 自身的值修改，更新consumer\n        const { name, value } = e;\n\n        if (!InvalidKeys.includes(name)) {\n          this._setConsumer(name, value, 1);\n        }\n      }\n    });\n  },\n  attached() {\n    // 默认将attributes的值设置到props上\n    const needRemoves = [];\n    Array.from(this.ele.attributes).forEach((item) => {\n      const { name, value } = item;\n\n      if (!InvalidKeys.includes(name)) {\n        this[hyphenToUpperCase(name)] = value;\n        needRemoves.push(name);\n      }\n    });\n    needRemoves.forEach((name) => this.ele.removeAttribute(name));\n\n    this._update();\n\n    // 组件影子节点内，对应 slot 上冒泡的修正\n    if (this.$(\"slot\")) {\n      // 重新让所有子级的 consumer 重新刷新冒泡\n      const { ele } = this;\n      Array.from(ele.children).forEach((childEl) =>\n        emitAllConsumer(childEl, this)\n      );\n    }\n  },\n};\n\n$.register({\n  tag: \"o-root-provider\",\n  attrs: {\n    name: null,\n  },\n  watch: {\n    name() {\n      // 是否已经设置过\n      if (!this.__named) {\n        this.__named = 1;\n        return;\n      }\n\n      const err = getErr(\"root_provider_name_change\", {\n        name: this.name,\n      });\n\n      console.warn(err, this.ele);\n\n      throw err;\n    },\n  },\n  proto: {\n    _update() {\n      // 根节点不需要 update\n    },\n    _refresh: providerOptions.proto._refresh,\n    _setConsumer: providerOptions.proto._setConsumer,\n    get consumers() {\n      return [...Array.from(this[CONSUMERS])];\n    },\n  },\n  ready() {\n    providerOptions.ready.call(this);\n  },\n  attached() {\n    if (rootProviders[this.name]) {\n      const err = getErr(\"root_provider_exist\", { name: this.name });\n      console.warn(\n        err,\n        \"exist:\",\n        rootProviders[this.name],\n        \", current:\",\n        this.ele\n      );\n      throw err;\n    }\n\n    const isDeleted = rootProviders[this.name] === null;\n\n    rootProviders[this.name] = this;\n\n    if (isDeleted) {\n      // 曾经被删除过，再次加入就要遍历\n      emitAllConsumer(document.body, this);\n    }\n\n    providerOptions.attached.call(this);\n  },\n  detached() {\n    if (rootProviders[this.name] === this) {\n      rootProviders[this.name] = null;\n      this[CONSUMERS].forEach((e) => {\n        e._clear();\n        e._refresh();\n      });\n    }\n  },\n});\n\n$.register(providerOptions);\n\n/**\n * 递归地触发所有consumer组件的更新。\n *\n * 此函数会检查传入的DOM元素，如果该元素是consumer组件，它将更新该组件。\n * 如果元素具有shadowRoot，函数将递归地通知影子节点内的元素。\n * 如果元素是slot元素，并且emitSlot参数为true，它将检查slot的名称，并通知具有相同slot名称的元素。\n *\n * @param {HTMLElement} ele - 要检查和触发更新的DOM元素。\n * @param {HTMLElement} rootProvider - 根provider元素，consumer将使用此元素作为数据源。\n * @param {boolean} [emitSlot=true] - 是否应该触发slot元素对应的子元素的更新。\n * @returns {void}\n */\nconst emitAllConsumer = (ele, rootProvider, emitSlot = true) => {\n  if (ele.tagName === \"O-ROOT-PROVIDER\") {\n    return;\n  } else if (ele.tagName === \"O-CONSUMER\" || ele.tagName === \"O-PROVIDER\") {\n    const $ele = $(ele);\n    if ($ele.name === rootProvider.name) {\n      // 重新冒泡\n      $ele._update(rootProvider);\n      $ele._refresh();\n      return;\n    }\n  } else if (ele.tagName === \"SLOT\" && emitSlot) {\n    const slotName = ele.getAttribute(\"name\") || \"\";\n    const host = ele?.getRootNode()?.host;\n    Array.from(host.children).forEach((e) => {\n      const selfSlotName = e.getAttribute(\"slot\") || \"\";\n      if (selfSlotName === slotName) {\n        // 继续递归符合插槽的元素\n        emitAllConsumer(e, rootProvider);\n      }\n    });\n    return;\n  } else if (ele.shadowRoot) {\n    // 通知影子节点内的元素\n    Array.from(ele.shadowRoot.children).forEach((childEl) =>\n      emitAllConsumer(childEl, rootProvider, false)\n    );\n  }\n\n  // 不符合的元素继续递归\n  Array.from(ele.children).forEach((childEl) =>\n    emitAllConsumer(childEl, rootProvider)\n  );\n};\n\n$.register({\n  tag: \"o-consumer\",\n  temp,\n  attrs: {\n    name: null,\n  },\n  watch: {\n    ...publicWatch,\n  },\n  proto: {\n    ...publicProto,\n    get provider() {\n      return this[PROVIDER];\n    },\n    // 更新自身数据\n    _refresh() {\n      const data = {};\n      const keys = [];\n\n      let { provider } = this;\n      while (provider) {\n        Object.keys(provider[SELF]).forEach((key) => {\n          if (key === \"tag\" || key === \"name\") {\n            return;\n          }\n\n          if (data[key] === undefined || data[key] === null) {\n            data[key] = provider[key];\n            keys.push(key);\n          }\n        });\n\n        provider = provider.provider;\n      }\n\n      // 需要删除自身不存在的数据\n      Object.keys(this[SELF]).forEach((key) => {\n        if (InvalidKeys.includes(key) || keys.includes(key)) {\n          return;\n        }\n\n        this[key] = undefined;\n      });\n\n      // 设置值\n      for (let [key, value] of Object.entries(data)) {\n        this[key] = value;\n      }\n    },\n  },\n  ready() {\n    // 记录自身的 attributes\n    const existKeys = (this._existAttrKeys = Object.values(this.ele.attributes)\n      .map((e) => e.name)\n      .filter((e) => !InvalidKeys.includes(e)));\n\n    // 更新 attributes\n    this.watch((e) => {\n      if (e.target === this && e.type === \"set\") {\n        const attrName = toDashCase(e.name);\n\n        if (existKeys.includes(attrName)) {\n          if (e.value === null || e.value === undefined) {\n            this.ele.removeAttribute(attrName);\n          } else {\n            this.ele.setAttribute(attrName, e.value);\n          }\n        }\n      }\n    });\n  },\n  attached() {\n    this._update();\n  },\n});\n","import $ from \"../xhear/base.mjs\";\n\n// 是否支持  @container style 查询\nconst supportStyleQueries = supportsContainerStyleQueries();\n// const supportStyleQueries = false; // debug code\n\n$.register({\n  tag: \"match-var\",\n  temp: `<style>:host{display:none !important; }</style>`,\n  data: {},\n  proto: {\n    initContainerStyle() {\n      // 支持 container style query 的时候，可以直接使用\n      if (!this.__style) {\n        this.__style = $(\"<style></style>\");\n        this.before(this.__style);\n      }\n\n      const styleContent = this._styleOriginText;\n\n      // 获取属性值\n      const attrs = Array.from(this.ele.attributes);\n\n      this.__style.html = `@container ${attrs\n        .map((attr) => `style(--${attr.name}: ${attr.value})`)\n        .join(\" and \")} {${styleContent}}`;\n\n      // 清空内容\n      this.html = \"\";\n    },\n    __addStyle() {\n      if (this.__added || supportStyleQueries) {\n        return;\n      }\n\n      // 在不兼容 container style query 的时候，运行这个方法代表塞入原样式\n      this.html = `<style>\n      ${this._styleOriginText}\n      </style>`;\n\n      this.__added = true;\n    },\n    __removeStyle() {\n      if (!this.__added || supportStyleQueries) {\n        return;\n      }\n\n      this.html = \"\";\n\n      this.__added = false;\n    },\n  },\n  attached() {\n    // 获取style内容后，清除内容\n    if (!this._styleOriginText) {\n      this._styleOriginText = this.$(\"style\").text;\n      this.html = \"\";\n    }\n\n    if (supportStyleQueries) {\n      this.initContainerStyle();\n    } else {\n      matchEles.add(this);\n    }\n  },\n  detached() {\n    if (supportStyleQueries) {\n      if (this.__style) {\n        this.__style.remove();\n        this.__style = null;\n      }\n    } else {\n      matchEles.delete(this);\n    }\n  },\n});\n\nconst matchEles = new Set();\n{\n  let timer = null;\n  const checkMatchEles = async () => {\n    clearTimeout(timer);\n    for (const $e of matchEles) {\n      const result = Array.from($e.ele.attributes).every((e) => {\n        const value = getComputedStyle($e.ele).getPropertyValue(`--${e.name}`);\n\n        return value === e.value;\n      });\n\n      if ($.checkMatch.delay) {\n        // 添加延迟，防止频繁执行无法渲染\n        await new Promise((resolve) => setTimeout(resolve, $.checkMatch.delay));\n      }\n\n      if (result) {\n        $e.__addStyle();\n      } else {\n        $e.__removeStyle();\n      }\n    }\n\n    timer = setTimeout(checkMatchEles, $.checkMatch.time || 100);\n  };\n\n  if (!supportStyleQueries) {\n    // 每秒轮询检测一次\n    setTimeout(() => {\n      checkMatchEles();\n    }, 100);\n  }\n\n  Object.defineProperties($, {\n    // 添加主动刷新 match var 方法\n    checkMatch: {\n      value() {\n        if (supportStyleQueries) {\n          // 如果支持，不需要执行此方法\n          return false;\n        }\n\n        requestAnimationFrame(() => {\n          checkMatchEles();\n        });\n\n        return true;\n      },\n    },\n  });\n\n  if (!supportStyleQueries) {\n    // 延迟时间，单位毫秒\n    $.checkMatch.delay = 2;\n  }\n}\n\n/**\n * 检测浏览器是否原生支持 @container style 查询\n * @returns {boolean} 返回是否支持\n */\nfunction supportsContainerStyleQueries() {\n  try {\n    // 创建测试用的DOM元素\n    const container = document.createElement(\"div\");\n    const child = document.createElement(\"div\");\n\n    // 设置容器和子元素的样式\n    container.style.cssText = `\n          container-type: style;\n          position: absolute;\n          left: -9px;\n          width: 1px;\n          height: 1px;\n          overflow: hidden;\n          --test-prop: true;\n        `;\n\n    child.style.cssText = `\n          position: absolute;\n        `;\n\n    // 添加测试样式\n    const style = document.createElement(\"style\");\n    style.textContent = `\n          @container style(--test-prop: true) {\n            #match-var-test-child {\n              font-family: \"match-var-test\";\n            }\n          }\n        `;\n\n    // 组装DOM结构\n    container.id = \"match-var-test-container\";\n    child.id = \"match-var-test-child\";\n    container.appendChild(child);\n    document.documentElement.appendChild(style);\n    document.documentElement.appendChild(container);\n\n    // 检测是否应用了样式\n    const isSupported = window\n      .getComputedStyle(child)\n      .fontFamily.includes(\"match-var-test\");\n\n    // 清理测试元素\n    document.documentElement.removeChild(style);\n    document.documentElement.removeChild(container);\n\n    return isSupported;\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n}\n","import $ from \"../xhear/base.mjs\";\nimport { getRenderData } from \"../xhear/render/condition.mjs\";\nimport { render } from \"../xhear/render/render.mjs\";\nimport { revokeAll } from \"../xhear/util.mjs\";\n\nconst refreshCondition = (conditionEl) => {\n  const conditionEls = [conditionEl];\n\n  // 获取所有兄弟元素\n  if (conditionEl.tag == \"o-if\") {\n    let nexts = getNexts(conditionEl.next);\n    conditionEls.push(...nexts);\n  } else if (conditionEl.tag == \"o-else-if\") {\n    let nexts = getNexts(conditionEl.next);\n    conditionEls.push(...nexts);\n    let prevs = getPrevs(conditionEl.prev);\n    conditionEls.unshift(...prevs);\n  }\n\n  // 在第一个元素上做缓刷新\n  const firstEl = conditionEls[0];\n  if (firstEl.tag == \"o-if\") {\n    clearTimeout(firstEl.__refreshTimer);\n    firstEl.__refreshTimer = setTimeout(() => {\n      // 按顺序获取条件元素的value值，找到第一个为true的元素\n      let targetCondition = null;\n      for (let i = 0; i < conditionEls.length; i++) {\n        const el = conditionEls[i];\n        if (el.tag == \"o-if\" || el.tag == \"o-else-if\") {\n          if (el.value) {\n            targetCondition = el;\n            break;\n          }\n        } else {\n          // 最后一个 o-else 元素\n          targetCondition = el;\n        }\n      }\n\n      // 如果找到目标，就渲染目标元素\n      if (targetCondition) {\n        renderContent(targetCondition);\n        targetCondition.attr(\"actived\", \"\");\n      }\n\n      // 清空其他元素内容\n      conditionEls.forEach((el) => {\n        if (el !== targetCondition) {\n          el.attr(\"actived\", null);\n          clearContent(el);\n        }\n      });\n    }, 0);\n  } else {\n    // 报错\n    console.error(\"o-if must be the first element\", conditionEls);\n  }\n};\n\n// 渲染内容\nconst renderContent = (conditionEl) => {\n  if (conditionEl.__rendered) {\n    // 已经渲染过，直接返回\n    return;\n  }\n\n  const result = getRenderData(conditionEl.ele);\n\n  if (!result) {\n    return;\n  }\n\n  const { target, data, temps } = result;\n\n  conditionEl.html = conditionEl.__originHTML;\n\n  render({ target, data, temps });\n\n  conditionEl.__rendered = true;\n\n  // 触发渲染事件\n  conditionEl.emit(\"rendered\", {\n    bubbles: false,\n  });\n};\n\n// 清空内容\nconst clearContent = (conditionEl) => {\n  if (!conditionEl.__rendered) {\n    // 没有渲染过，直接返回\n    return;\n  }\n\n  conditionEl.ele.childNodes?.forEach((el) => revokeAll(el));\n\n  // 清空元素内容\n  conditionEl.html = \"\";\n\n  conditionEl.__rendered = false;\n};\n\n// 获取后方兄弟元素\nconst getNexts = (next) => {\n  const nexts = [];\n  while (next && (next.tag === \"o-else-if\" || next.tag === \"o-else\")) {\n    nexts.push(next);\n    if (next.tag == \"o-else\") {\n      break;\n    }\n    next = next.next;\n  }\n  return nexts;\n};\n\n// 获取前方兄弟元素\nconst getPrevs = (prev) => {\n  const prevs = [];\n  while (prev && (prev.tag == \"o-if\" || prev.tag == \"o-else-if\")) {\n    prevs.unshift(prev);\n    if (prev.tag == \"o-if\") {\n      break;\n    }\n    prev = prev.prev;\n  }\n  return prevs;\n};\n\nconst createdFunc = function (_this) {\n  if (_this[0].is(\"template[inner-code]\")) {\n    _this.__originHTML = _this[0].html.trim();\n  } else {\n    _this.__originHTML = _this.html.trim();\n  }\n  _this.html = \"\";\n};\n\nconst temp = `<style>:host{display:contents;}</style><slot></slot>`;\n\n$.register({\n  tag: \"o-if\",\n  temp,\n  data: {\n    value: null,\n  },\n  watch: {\n    value() {\n      refreshCondition(this);\n    },\n  },\n  created() {\n    createdFunc(this);\n  },\n});\n\n$.register({\n  tag: \"o-else-if\",\n  temp,\n  data: {\n    value: null,\n  },\n  watch: {\n    value() {\n      refreshCondition(this);\n    },\n  },\n  created() {\n    createdFunc(this);\n  },\n});\n\n$.register({\n  tag: \"o-else\",\n  temp,\n  created() {\n    createdFunc(this);\n  },\n});\n","import $ from \"../xhear/base.mjs\";\nimport { getRenderData } from \"../xhear/render/condition.mjs\";\nimport { eleX, revokeAll } from \"../xhear/util.mjs\";\nimport { createItem } from \"../xhear/render/fill.mjs\";\nimport { getErr } from \"../ofa-error/main.js\";\nimport { renderExtends } from \"../xhear/render/render.mjs\";\n\n$.register({\n  tag: \"o-fill\",\n  temp: `<style>:host{display:contents;}</style><slot></slot>`,\n  data: {\n    value: null,\n  },\n  proto: {\n    refreshView() {\n      const arr = this.value;\n      const tempName = this.attr(\"name\");\n\n      if (\n        !arr ||\n        !arr.length ||\n        (this.__oldTempName && this.__oldTempName !== tempName)\n      ) {\n        // 没有值，清空内容\n        Array.from(this.ele.childNodes).forEach((e) => {\n          revokeAll(e);\n          e.remove();\n        });\n        return;\n      }\n\n      const { data, target, temps = {} } = getRenderData(this.ele);\n\n      const keyName = this.attr(\"fill-key\") || \"xid\";\n\n      let targetTemp = temps[tempName];\n\n      if (!targetTemp) {\n        // 没有找到模板，查看是否有默认的模板\n        if (this.__originHTML) {\n          targetTemp = $(`<template>${this.__originHTML}</template>`).ele;\n        } else {\n          throw new Error(\"o-fill - Template not found: \" + tempName);\n        }\n      }\n\n      this.__oldTempName = tempName;\n\n      if (!this.length) {\n        // 没有子元素，优化性能的添加方式\n        const frag = document.createDocumentFragment();\n\n        // 渲染模板\n        for (let i = 0, len = arr.length; i < len; i++) {\n          const item = arr[i];\n\n          const $ele = createItem(\n            item,\n            temps,\n            targetTemp,\n            data.$host || data,\n            i,\n            keyName\n          );\n\n          frag.appendChild($ele.ele);\n        }\n\n        this.ele.appendChild(frag);\n        return;\n      }\n\n      const getKeyVal = (e, i) => {\n        const key = e[keyName];\n\n        if (key === undefined || key === null) {\n          if (e.xid) {\n            return e.xid;\n          }\n\n          return `${i}-${e}`;\n        }\n\n        return key;\n      };\n\n      // 有子元素，优化性能的方式更新方式\n      const keyValsArr = arr.map(getKeyVal);\n\n      const tempChildren = Array.from(this.ele.children);\n\n      // 先删除不存在的元素\n      for (let i = 0; i < tempChildren.length; i++) {\n        const e = tempChildren[i];\n        const renderedItem = e.__render_data;\n\n        const currentKeyVal = getKeyVal(renderedItem.$data, i);\n\n        // 不存在的id，需要删除\n        if (!keyValsArr.includes(currentKeyVal)) {\n          e.remove();\n          revokeAll(e);\n        }\n      }\n\n      const { children } = this.ele;\n\n      // 获取当前所有的key值\n      let keyVals = [];\n      const refreshKeyVals = () => {\n        keyVals = Array.from(children).map((e, i) =>\n          getKeyVal(e.__render_data.$data, i)\n        );\n      };\n      refreshKeyVals();\n\n      const selfEl = this.ele;\n\n      // 遍历一遍进行更新数据\n      for (let i = 0, len = arr.length; i < len; i++) {\n        const item = arr[i];\n        // const keyVal = item[keyName];\n        const keyVal = getKeyVal(item, i);\n\n        // 查找是否存在\n        const index = keyVals.indexOf(keyVal);\n\n        if (index > -1) {\n          // 存在，更新数据\n          const $ele = eleX(children[index]);\n\n          // 如果不是目标元素，则进行位置调整\n          if (children[i] !== $ele.ele) {\n            selfEl.insertBefore($ele.ele, children[i]);\n            refreshKeyVals();\n          }\n\n          // 按需更新绑定的数据\n          if ($ele.__item.$data !== item) {\n            $ele.__item.$data = item;\n          }\n          if ($ele.__item.$index !== i) {\n            $ele.__item.$index = i;\n          }\n        } else {\n          // 不存在，添加新的元素\n          const $ele = createItem(\n            item,\n            temps,\n            targetTemp,\n            data.$host || data,\n            i,\n            keyName\n          );\n\n          selfEl.insertBefore($ele.ele, children[i]);\n          refreshKeyVals();\n        }\n      }\n    },\n  },\n  ready() {\n    this.watchTick((e) => {\n      if (e.hasModified(\"value\")) {\n        // value发生变动，重新渲染\n        this.refreshView();\n      }\n    });\n  },\n  attached() {\n    if (this.value) {\n      this.refreshView();\n    }\n  },\n  created() {\n    let originHTML = \"\";\n\n    if (this[0].is(\"template[inner-code]\")) {\n      originHTML = this[0].html.trim();\n    } else {\n      originHTML = this.html.trim();\n    }\n\n    // 判断是否有多个子元素\n    const temp = $(`<template><div>${originHTML}</div></template>`);\n    const tempContent = temp.ele.content.children[0];\n\n    if (\n      tempContent.children.length > 1 ||\n      (tempContent.children.length === 0 && tempContent.innerHTML.trim())\n    ) {\n      const err = getErr(\"temp_multi_child\");\n      console.warn(err, this.ele, {\n        content: this.html.trim(),\n      });\n\n      originHTML = `<div style=\"display: contents;\">${originHTML}</div>`;\n    }\n\n    this.__originHTML = originHTML;\n\n    this.html = \"\";\n  },\n});\n\n// 修正转换前的内容\nconst oldAfterConvert = renderExtends.afterConvert;\nrenderExtends.afterConvert = (e) => {\n  oldAfterConvert(e);\n  const { template, temps } = e;\n  wrapTemp(template);\n  Object.values(temps).forEach((temp) => wrapTemp(temp));\n};\n\n// 给需要预处理的元素的外部添加一个template包裹标签，防止被提前污染代码\nconst needWrapTags = [\"o-fill\", \"o-if\", \"o-else-if\", \"o-else\"];\n\nexport const wrapTemp = (template) => {\n  const eles = Array.from(\n    template.content.querySelectorAll(needWrapTags.join(\",\"))\n  );\n\n  // 倒转之后性能好像好点\n  // eles.reverse();\n\n  eles.forEach((e) => {\n    const originCode = e.innerHTML;\n    e.innerHTML = `<template inner-code>${originCode}</template>`;\n    wrapTemp(e.children[0]);\n  });\n};\n","import $ from \"../xhear/base.mjs\";\nimport \"./inject-host.mjs\";\nimport \"./comp.mjs\";\nimport \"./page.mjs\";\nimport \"./app.mjs\";\nimport \"./extend.mjs\";\nimport \"./link.mjs\";\nimport \"./context.mjs\";\nimport \"./match-var.mjs\";\nimport \"./if.mjs\";\nimport \"./fill.mjs\";\nimport Stanz from \"../stanz/main.mjs\";\n\nconst version = \"ofa.js@4.6.6\";\n$.version = version.replace(\"ofa.js@\", \"\");\n\nlet isDebug = false;\n\ntry {\n  const fileUrl = import.meta.url;\n  isDebug = fileUrl.includes(\"#debug\");\n} catch (err) {\n  isDebug = false;\n}\n\nObject.defineProperty($, \"debugMode\", {\n  get: () => isDebug,\n});\n\nif (typeof window !== \"undefined\") {\n  window.$ = $;\n}\n\nObject.defineProperty(globalThis, \"ofa\", {\n  value: $,\n});\n\nexport default $;\n\nexport { Stanz };\n"],"names":["error_origin","errors","load_fail","load_fail_status","load_module","no_alias","config_alias_name_error","alias_already","alias_relate_name","failed_to_set_data","failed_to_get_data","nexttick_thread_limit","not_func","not_found_func","invalid_key","xhear_wrap_no_parent","xhear_unwrap_has_siblings","xhear_reander_err","xhear_register_exists","xhear_register_err","xhear_validate_tag","xhear_tag_noline","xhear_regster_data_noset","xhear_regster_data_nofunc","xhear_fakenode_unclose","xhear_fill_tempname","xhear_eval","xhear_listen_already","xhear_dbfill_noname","xhear_temp_exist","xhear_sync_no_options","xhear_sync_object_value","loading_nothing","app_src_change","no_cross_access_func","access_return_error","load_comp_module","comp_registered","load_page_module","page_no_defaults","not_page_module","page_failed","fetch_temp_err","page_wrap_fetch","context_change_name","no_provider","page_invalid_key","root_provider_exist","root_provider_name_change","change_lm_src","error_no_owner","circular_data","fill_type","fill_key_duplicates","render_el_error","temp_multi_child","temp_wrap_child","app_noback","invalidated_inject_host","olink_out_app","app_noforward","need_forwards","watchuntil_timeout","globalThis","navigator","language","langFirst","toLowerCase","split","localStorage","onLine","targetLangErrors","JSON","parse","Object","assign","errCacheTime","Date","now","Number","fetch","then","e","json","catch","stringify","error","isSafari","userAgent","includes","getErr","key","options","errObj","desc","getErrDesc","toString","stack","replace","Error","cause","code","k","RegExp","getRandomId","Math","random","slice","objectToString","prototype","getType","value","call","isObject","obj","type","afterTimer","asyncsCounter","nextTick","callback","clearTimeout","setTimeout","Promise","resolve","err","console","warn","extend","_this","proto","descriptor","getOwnPropertyNames","getOwnPropertySymbols","forEach","result","getOwnPropertyDescriptor","configurable","enumerable","writable","get","set","hasOwnProperty","defineProperty","dataRevoked","proxyToCheck","getPrototypeOf","TypeError","isFunction","val","hyphenToUpperCase","str","match","p1","toUpperCase","toDashCase","meetsEle","ele","expr","temp","document","createElement","content","append","cloneNode","querySelector","removeArrayValue","arr","target","index","indexOf","splice","searchEle","el","HTMLTemplateElement","Array","from","querySelectorAll","freeze","Watcher","constructor","opts","this","hasModified","path","currentTarget","keys","name","positionIndex","getModifieds","currentKeys","length","hasReplaced","modifieds","cloneKeys","targetKey","shift","push","Watchers","super","some","emitUpdate","oldValue","args","_hasWatchs","watcher","WATCHS","func","_update","owner","parent","watchFn","watch","Function","wid","unwatch","delete","watchTick","wait","timeout","hisArgs","debounce","filter","item","xid","refresh","watchUntil","outTime","reject","f","timer","tid","mutatingMethods","holder","Symbol","fn","arrayFn","methodName","backupArr","reval","apply","SELF","deletedItems","addedItems","oldArray","newArray","backupNewArray","backupOldArray","Map","oldLen","i","oldItem","newIndex","newLen","newItem","oldIndex","compareArrays","isxdata","_owner","__unupdate","clearOwner","PROXY","oldFunc","defineProperties","entries","ISXDATA","data","handler","stanzHandler","watchs","proxy","proxySelf","revoke","Proxy","revocable","Set","_revoke","__init_is_array","isArray","descObj","Stanz","self","_onrevokes","clear","toJSON","isPureArray","maxId","initIsArray","test","parseInt","len","join","lastKey","pop","setData","receiver","succeed","__OriginStanz","isSame","targetData","mismatch","Reflect","deleteProperty","undefined","String","eleX","children","ownKeys","renderExtends","beforeConvert","afterConvert","beforeRender","render","getRevokes","__revokes","addRevoke","convertToFunc","funcStr","bind","template","temps","isRenderSelf","otherOpts","innerHTML","texts","tasks","revokes","originStyle","matchs","map","dataExpr","renderStyle","afterStyle","revokeStyle","remove","textEl","createTextNode","parentNode","insertBefore","removeChild","getAttribute","renderFunc","textContent","textRevoke","eles","unshift","bindData","$el","actionName","always","workResult","afterArgs","work","errCall","errorExpr","beforeArgs","step","clearRevs","methodRevoke","arg0","arg1","removeAttribute","_bindingRendered","dispatchEvent","Event","__render_temps","isEmptyObject","__render_data","element","old","new","convertEl","tagName","attributes","attr","matchData","exec","param0","setAttribute","searchTemp","rearr","isWarned","convert","codeEls","cid","tempName","tempChilds","wrapName","fillEl","trim","appendChild","condiEl","firstChild","newTemps","getVal","defaultData","prop","classList","contains","add","stanzProto","selfPropName","targetPropName","propName","class","$ele","oldVal","syncFn","sync","targetName","wid1","wid2","getBindOptions","revoker","beforeValue","tag","removeEventListener","eventFn","on","addEventListener","one","off","emit","event","bubbles","originSplice","start","count","items","removes","frag","createDocumentFragment","createXEle","positionEle","likeArrayFn","targets","reVal","reverse","childs","childNodes","__internal","sort","getOwnPropertyDescriptors","targetFunc","LikeArray","stanz","is","setKeys","isNum","formEleNames","bindProp","keyName","initInput","getFormData","all","checked","files","selectedsOpt","multiple","formFn","formData","newData","obj1","obj2","mergeObjects","isUseValue","resetValue","oldRevoke","cssHandler","_ele","style","startsWith","getComputedStyle","getPropertyValue","XhearCSS","_css","cssFn","css","d","nextKeys","$","extensions","COMPS","renderElement","defaults","deepCopyData","attrs","root","attachShadow","mode","ready","wen","names","watchers","register","compName","charAt","validateTagName","getAttrKeys","attrKeys","XElement","HTMLElement","created","attrName","valType","connectedCallback","isInternal","attached","afterAttached","disconnectedCallback","detached","afterDetached","attributeChangedCallback","newValue","observedAttributes","readyState","customElements","define","READYSTATE","host","copy","FakeNode","Comment","markname","tagText","_mark","_inited","startCom","__fake_end","init","_start","__searchEl","funcName","startParent","par","newEle","prev","previousSibling","isConnected","outerHTML","nextElementSibling","next","nextSibling","Element","previousElementSibling","replaceTempInit","regData","getRenderData","replaces","ReplaceTemp","extends","regOptions","__rendered","_bindend","refreshValue","_timer","conditions","_others","isOK","conditionEl","_clearContent","_renderContent","_fake","__originHTML","revokeAll","fake","before","others","_if_ready","_xif","html","t","arrayData","targetTemp","_name","vals","valsKeys","size","positionKeys","_data_xid","has","needRemoves","createItem","$host","currentVal","isObj","__item","oldId","$data","$old","$index","itemData","GET_COMPOSE_PATH","descs","initFormEle","Xhear","__xhear__","text","dataset","shadow","shadowRoot","rootNode","getRootNode","Node","parents","parentsUntil","allParents","exprIsObj","hosts","composedPath","paths","stopPropagation","composed","nextEle","after","nextEl","nexts","selfIndex","prevEle","prevs","siblings","width","height","clientWidth","clientHeight","offsetWidth","offsetHeight","outerWidth","computedStyle","outerHeight","clone","bool","wrap","unwrap","sfn","renderFn","exprType","window","objToXEle","strToXEle","initInjectEle","injectEl","mark","cloneFunc","clink","__items","__host_link","head","revokeLink","__inited","_init","_initLink","_initStyle","href","rel","newEl","com","hash","charCodeAt","getStringHash","_obs","MutationObserver","mutationsList","mutation","attributeName","removedNodes","addedNodes","Text","parentElement","observe","childList","subtree","disconnect","Onion","_middlewares","use","middleware","oid","unuse","run","context","middlewares","values","async","getNotHttp","url","caches","wrapFetch","params","reUrl","URL","origin","pathname","fetchObj","processor","addHandler","ctx","notHttp","import","realUrl","resp","status","arrayBuffer","module","WebAssembly","compile","instance","Instance","exports","link","aliasMap","moduleName","baseURI","lastUrl","first","location","base","LOADED","agent","urldata","lastIndexOf","oni","contentType","headers","targetMapObject","find","newOni","lm","meta","ourl","reurl","createLoad","alias","LoadModule","loaded","__initSrc","src","load","CustomEvent","_root","LM","config","resolvePath","fixRelate","fixRelatePathContent","styleEl","original","adapted","ISERROR","getPagesData","pagesData","beforeSrc","errorObj","pageSrc","lastSrc","realPageSrc","pageSrcObj","current","createPage","tempCon","targetPage","_renderDefault","waitPageReaded","page","_rendered","setInterval","clearInterval","oldRender","top","__fixLinkTimer","initLink","__processed","$tar","app","metaKey","shiftKey","defaultPrevented","preventDefault","prevented","originHref","finalHref","goto","strToBase64DataURI","mime","isb64","file","File","createObjectURL","fr","FileReader","onload","readAsDataURL","getSourcemapUrl","filePath","originStarRowIndex","originEndRowIndex","originContent","startLine","originLineArr","mappings","beforeRowIndex","beforeColIndex","rowId","rowStr","colId","currentStr","vlcEncode","sourcesContent","cacheLink","drawUrl","isPage","targetUrl","isDebug","debugMode","tempEl","titleEl","scriptEl","reTemp","backupOriginContent","styleEls","styleContent","matchArr","middleStr","sourcemapStr","addStyleSourcemap","beforeContent","scriptContent","t_content","pathStr","fileContent","findIndex","lineContent","finalContent","isFirefox","base64","encoded","vlq","toVLQSigned","digit","PAGE","resultContent","moduleData","defaultsData","getDefault","tempSrc","pageIsReady","__init_src","_defaults","parentPage","__need_wraps","failContent","getFailContent","_module","fail","needWraps","__not_run_attached","pageAnime","_pageAnime","__reject","dispatchLoad","__resolve","appIsReady","back","pms","res","sheet","finnalDefault","default","relateLoad","query","urlObj","fromEntries","searchParams","COMP","COMPONENT_PATH","cacheComps","matchName","cacheUrl","tempUrl","tempContent","registerOpts","oldReady","oldCreated","regTemp","HISTORY","FORWARDS","appendPage","loading","loadingEl","currentPages","oriNextPages","container","publicParents","finalPages","topPage","innerPage","pageData","isError","publics","emitRouterChange","routerChange","selfUrl","allowForward","_settedRouters","_initHome","home","homeUrl","forward","delta","forwardHistory","_navigate","oldRouters","routers","_noanime","newCurrent","needRemovePage","pageInAnime","resetOldPage","oldHis","historys","pageOutAnime","oldCurrent","runAccess","routerData","nextHistory","willRemoved","_routers","historyRouters","currentRouter","access","targetAnime","nextAnimeFrame","transition","requestAnimationFrame","position","oldAttr","PATH","rootProviders","CONSUMERS","PROVIDER","getProvider","method","consumer","targetRootProvider","_refresh","hasData","InvalidKeys","publicProto","provider","_clear","publicWatch","__named","providerOptions","consumers","_setConsumer","isSelf","parentProvider","childEl","emitAllConsumer","isDeleted","body","rootProvider","emitSlot","slotName","existKeys","_existAttrKeys","supportStyleQueries","child","cssText","id","documentElement","isSupported","fontFamily","supportsContainerStyleQueries","initContainerStyle","__style","_styleOriginText","__addStyle","__added","__removeStyle","matchEles","checkMatchEles","$e","every","checkMatch","delay","time","refreshCondition","conditionEls","getNexts","getPrevs","firstEl","__refreshTimer","targetCondition","renderContent","clearContent","createdFunc","refreshView","__oldTempName","getKeyVal","keyValsArr","tempChildren","renderedItem","currentKeyVal","keyVals","refreshKeyVals","selfEl","keyVal","originHTML","oldAfterConvert","wrapTemp","needWrapTags","originCode","version","fileUrl","require","pathToFileURL","__filename","_documentCurrentScript"],"mappings":";wSACA,MAAMA,EAAe,4CAGfC,EAAS,CACbC,UAAW,oBACXC,iBAAkB,2CAClBC,YAAa,4CACbC,SAAU,wDACVC,wBAAyB,8CACzBC,cAAe,kCACfC,kBACE,yEACFC,mBAAoB,yCACpBC,mBAAoB,yBACpBC,sBACE,0GACFC,SAAU,iEACVC,eACE,iIACFC,YACE,uKACFC,qBACE,2EACFC,0BACE,+EACFC,kBAAmB,mCACnBC,sBACE,4FACFC,mBAAoB,6CACpBC,mBACE,sNACFC,iBACE,0PACFC,yBACE,4FACFC,0BACE,gJACFC,uBACE,qEACFC,oBAAqB,6CACrBC,WACE,sEACFC,qBACE,8EACFC,oBACE,uFACFC,iBAAkB,mCAClBC,sBACE,yFACFC,wBACE,gFACFC,gBAAiB,yCACjBC,eACE,4EACFC,qBACE,qEACFC,oBAAqB,kCACrBC,iBACE,8DACFC,gBACE,sFACF,kBACE,oGACF,kBACE,qHACFC,iBAAkB,mCAClBC,iBACE,0EACFC,gBACE,gFACFC,YAAa,6BACbC,eAAgB,sDAChBC,gBAAiB,0DACjBC,oBACE,sGACFC,YACE,6EACFC,iBACE,gJACFC,oBACE,8GACFC,0BACE,4HACFC,cACE,sFACFC,eACE,mEACFC,cAAe,sCACfC,UACE,iFACFC,oBAAqB,4CACrBC,gBAAiB,sDACjBC,iBACE,uJACFC,gBACE,qIACFC,WACE,qFACFC,wBAAyB,oDACzBC,cAAe,kDACfC,cACE,2EACFC,cACE,6KACFC,mBAAoB,oDAGtB,GAAIC,WAAWC,WAAaA,UAAUC,SAAU,CAC9C,IAAIC,EAAYF,UAAUC,SAASE,cAAcC,MAAM,KAAK,GAE1C,OAAdF,GAA2D,UAArCF,UAAUC,SAASE,gBAC3CD,EAAY,QAId,WACE,IAAKH,WAAWM,aAEd,OAGF,GAAIN,WAAWC,YAAcA,UAAUM,OAErC,OAGF,GAAID,aAAa,cAAe,CAC9B,MAAME,EAAmBC,KAAKC,MAAMJ,aAAa,eACjDK,OAAOC,OAAO1E,EAAQsE,EACvB,CAED,MAAMK,EAAeP,aAAa,mBAElC,IAAKO,GAAgBC,KAAKC,MAAQC,OAAOH,GAAgB,IAAe,CACtE,MAAML,QAAyBS,MAAM,GAAGhF,KAAgBkE,UACrDe,MAAMC,GAAMA,EAAEC,SACdC,OAAM,IAAM,OAEXb,GACFF,aAAa,cAAgBG,KAAKa,UAAUd,GAC5CF,aAAa,mBAAqBQ,KAAKC,OAEvCP,QAAyBS,MAAM,GAAGhF,aAC/BiF,MAAMC,GAAMA,EAAEC,SACdC,OAAOE,GACC,OAIbZ,OAAOC,OAAO1E,EAAQsE,EACvB,CACF,EApCD,EAqCF,CAEA,IAAIgB,GAAW,EACXxB,WAAWC,YACbuB,EACEvB,UAAUwB,UAAUC,SAAS,YAC5BzB,UAAUwB,UAAUC,SAAS,WAW3B,MAAMC,EAAS,CAACC,EAAKC,EAASN,KACnC,IAEIO,EAFAC,EAAOC,EAAWJ,EAAKC,GAgB3B,OAbIN,GACEC,IACFO,GAAQ,gBAAgBR,EAAMU,eAE1BV,EAAMW,QACRH,GAAQ,KAAKR,EAAMW,MAAMC,QAAQ,MAAO,cAG5CL,EAAS,IAAIM,MAAML,EAAM,CAAEM,MAAOd,KAElCO,EAAS,IAAIM,MAAML,GAErBD,EAAOQ,KAAOV,EACPE,CAAM,EAUFE,EAAa,CAACJ,EAAKC,KAC9B,IAAK3F,EAAO0F,GACV,MAAO,gBAAgBA,mGAGzB,IAAIG,EAAO7F,EAAO0F,GAGlB,GAAIC,EACF,IAAK,IAAIU,KAAKV,EACZE,EAAOA,EAAKI,QAAQ,IAAIK,OAAO,IAAID,KAAM,KAAMV,EAAQU,IAI3D,OAAOR,CAAI,ECjNAU,EAAc,IAAMC,KAAKC,SAASV,SAAS,IAAIW,MAAM,GAE5DC,EAAiBlC,OAAOmC,UAAUb,SAC3Bc,EAAWC,GACtBH,EACGI,KAAKD,GACL5C,cACA+B,QAAQ,mBAAoB,IAEpBe,EAAYC,IACvB,MAAMC,EAAOL,EAAQI,GACrB,MAAgB,UAATC,GAA6B,WAATA,CAAiB,EAgB9C,IACIC,EADAC,EAAgB,EAGb,SAASC,EAASC,GACvBC,aAAaJ,GACbA,EAAaK,YAAW,KACtBJ,EAAgB,CAAC,IAInBK,QAAQC,UAAU1C,MAAK,KAErB,GADAoC,IACIA,EAAgB,IAAQ,CAC1B,MAAMO,EAAMlC,EAAO,yBAEnB,MADAmC,QAAQC,KAAKF,EAAK,eAAgBL,GAC5BK,CACP,CAEDL,GAAU,GAuBd,CAiCO,MAAMQ,EAAS,CAACC,EAAOC,EAAOC,EAAa,CAAA,KAChD,IACKxD,OAAOyD,oBAAoBF,MAC3BvD,OAAO0D,sBAAsBH,IAChCI,SAAS/B,IACT,MAAMgC,EAAS5D,OAAO6D,yBAAyBN,EAAO3B,IAChDkC,aAAEA,EAAYC,WAAEA,EAAUC,SAAEA,EAAQC,IAAEA,EAAGC,IAAEA,EAAG7B,MAAEA,GAAUuB,EAE5D,UAAWA,EACTN,EAAMa,eAAevC,GACvB0B,EAAM1B,GAAKS,EAEXrC,OAAOoE,eAAed,EAAO1B,EAAG,CAC9BmC,aACAD,eACAE,cACGR,EACHnB,UAIJrC,OAAOoE,eAAed,EAAO1B,EAAG,CAC9BmC,aACAD,kBACGN,EACHS,MACAC,OAEH,IAGIZ,GAIF,SAASe,EAAYC,GAC1B,IAGE,OADAtE,OAAOuE,eAAeD,IACf,CACR,CAAC,MAAO1D,GACP,OAAIA,aAAiB4D,SAKtB,CACH,CCnJO,MAAMC,EAAcC,GAAQtC,EAAQsC,GAAK3D,SAAS,YAE5C4D,EAAqBC,GAChCA,EAAIpD,QAAQ,aAAa,CAACqD,EAAOC,IACxBA,EAAGC,gBAmBP,MAAMC,EAAcJ,GAClBA,EAAIpD,QAAQ,UAAU,SAAUqD,GACrC,MAAO,IAAMA,EAAMpF,aACvB,IAIawF,EAAW,CAACC,EAAKC,KAC5B,MAAMC,EAAOC,SAASC,cAAc,YAEpC,OADAF,EAAKG,QAAQC,OAAON,EAAIO,eACfL,EAAKG,QAAQG,cAAcP,EAAK,EAepC,MAAMQ,EAAmB,CAACC,EAAKC,KACpC,MAAMC,EAAQF,EAAIG,QAAQF,GACtBC,GAAS,GACXF,EAAII,OAAOF,EAAO,EACnB,EAGUG,EAAY,CAACC,EAAIf,IACxBe,aAAcC,oBACTC,MAAMC,KAAKH,EAAGX,QAAQe,iBAAiBnB,IAEzCiB,MAAMC,KAAKH,EAAGI,iBAAiBnB,IAejC,aC1EClF,EAAMsG,OAAEA,GAAWvG,OAE3B,MAAMwG,EACJ,WAAAC,CAAYC,GACVzG,EAAO0G,KAAMD,GACbH,EAAOI,KACR,CAED,WAAAC,CAAYhF,GACV,GAAkB,UAAd+E,KAAKlE,KACP,OAAOkE,KAAKE,KAAK9F,SAAS4F,KAAKG,cAAc7C,IAAIrC,IAGnD,MAAMmF,EAAOnF,EAAElC,MAAM,KAErB,GAAIiH,KAAKG,gBAAkBH,KAAKd,QAAUc,KAAKK,OAASD,EAAK,GAC3D,OAAO,EAGT,MAEME,EAFYC,EAAaP,KAAMI,GAELhB,QAAQY,KAAKd,QAC7C,GAAIoB,GAAiB,EAAG,CACtB,MAAME,EAAcJ,EAAK9E,MAAMgF,EAAgB,GAE/C,OAAKE,EAAYC,QAKVT,KAAKK,OAASG,EAAY,EAClC,CAGD,OAAOR,KAAKE,KAAK9F,SAAS4F,KAAKG,cAAclF,GAC9C,CAED,WAAAyF,CAAYzF,GACV,GAAkB,QAAd+E,KAAKlE,KACP,OAAO,EAGT,MAAMsE,EAAOnF,EAAElC,MAAM,KAErB,GAAIiH,KAAKd,SAAWc,KAAKG,eAAiBH,KAAKK,OAASD,EAAK,GAC3D,OAAO,EAGT,MAEME,EAFYC,EAAaP,KAAMI,GAELhB,QAAQY,KAAKd,QAE7C,GAAIoB,GAAiB,EAAG,CAGtB,OAFoBF,EAAK9E,MAAMgF,EAAgB,GAE5B,KAAON,KAAKK,IAChC,CAED,OAAO,CACR,EAGH,MAAME,EAAe,CAAC5D,EAAOyD,KAC3B,MAAMO,EAAY,GAEZC,EAAYR,EAAK9E,QACvB,IAAI4D,EAASvC,EAAMwD,cACnB,KAAOS,EAAUH,QAAQ,CACvB,MAAMI,EAAYD,EAAUE,QACxB5B,IACFA,EAASA,EAAO2B,IAGlBF,EAAUI,KAAK7B,EAChB,CAED,OAAOyB,CAAS,EAGlB,MAAMK,UAAiBvB,MACrB,WAAAK,CAAYb,GACVgC,SAAShC,EACV,CAED,WAAAgB,CAAY3F,GACV,OAAO0F,KAAKkB,MAAMrH,GAAMA,EAAEoG,YAAY3F,IACvC,CAED,WAAAoG,CAAYpG,GACV,OAAO0F,KAAKkB,MAAMrH,GAAMA,EAAE6G,YAAYpG,IACvC,EAGI,MAAM6G,EAAa,EACxBrF,OACAqE,gBACAjB,SACAmB,OACA3E,QACA0F,WACAC,OACAnB,OAAO,OAEP,GAAIA,GAAQA,EAAK9F,SAAS+F,GAAgB,CACxC,MAAM5D,EAAMlC,EAAO,iBAQnB,YANAmC,QAAQC,KAAKF,EAAK,CAChB4D,gBACAjB,SACAgB,QAIH,CAED,IAAI3F,EAAU,CACZuB,OACAoD,SACAmB,OACAe,WACA1F,SAQF,GALa,UAATI,WACKvB,EAAQmB,MACfnB,EAAQ8G,KAAOA,GAGblB,EAAcmB,WAAY,CAC5B,MAAMC,EAAU,IAAI1B,EAAQ,CAC1BM,mBACG5F,EACH2F,KAAM,IAAIA,KAGZC,EAAcqB,GAAQxE,SAASyE,IAC7BA,EAAKF,EAAQ,GAEhB,CAEDpB,EAAcuB,SACZvB,EAAcwB,MAAM3E,SAAS4E,IAC3BT,EAAW,CACThB,cAAeyB,KACZrH,EACH2F,KAAM,CAACC,KAAkBD,IACzB,GACF,EAGS,IAAA2B,EAAA,CACb,KAAAC,CAAM5F,GACJ,KAAMA,aAAoB6F,UACxB,MAAM1H,EAAO,WAAY,CAAEgG,KAAM,UAGnC,MAAM2B,EAAM,KAAO7G,IAInB,OAFA6E,KAAKwB,GAAQjE,IAAIyE,EAAK9F,GAEf8F,CACR,EAED,OAAAC,CAAQD,GACN,OAAOhC,KAAKwB,GAAQU,OAAOF,EAC5B,EAED,SAAAG,CAAUjG,EAAUkG,GAClB,KAAMlG,aAAoB6F,UACxB,MAAM1H,EAAO,WAAY,CAAEgG,KAAM,cAGnC,OAAOL,KAAK8B,MFrGT,SAAkBL,EAAMW,EAAO,GACpC,IAAIC,EAAU,KACVC,EAAU,GAEd,OAAO,YAAajB,GAClBiB,EAAQvB,QAAQM,GAEZe,EAAO,GACTjG,aAAakG,GACbA,EAAUjG,YAAW,KACnBqF,EAAK9F,KAAKqE,KAAMsC,GAChBA,EAAU,GACVD,EAAU,IAAI,GACbD,IAEa,OAAZC,IACFA,EAAU,EACVpG,GAAS,KACPoG,EAAU,KACV,MAAMhB,EAAOiB,EAAQhH,QACrBgH,EAAU,GACVb,EAAK9F,KAAKqE,KAAMqB,EAAK,IAI/B,CACA,CE4EMkB,EAAUtD,IACJvB,EAAYsC,QAIhBf,EAAMA,EAAIuD,QAAQ3I,IAChB,IACEA,EAAEqG,KAAKlD,SAASyF,GAASA,EAAKC,KAC/B,CAAC,MAAOnG,GACP,OAAO,CACR,CAED,OAAO,CAAI,IAGbL,EAAS,IAAI8E,EAAS/B,IAAK,GAC1BmD,GAAQ,GAEd,EAED,OAAAO,CAAQ5C,GACN,MAAMxF,EAAU,IACXwF,EACHjE,KAAM,UACNoD,OAAQc,KACRG,cAAeH,MAEjBmB,EAAW5G,EACZ,EACD,UAAAqI,CAAWnB,EAAMoB,EAAU,KACzB,OAAO,IAAIxG,SAAQ,CAACC,EAASwG,KAC3B,IAAIC,EACAC,EACJ,MAAMC,EAAMjD,KAAK8B,MACdiB,EAAI,KACUtB,MAEXtF,aAAa6G,GACbhD,KAAKiC,QAAQgB,GACb3G,EAAQ0D,MACT,GAILgD,EAAQ5G,YAAW,KACjB4D,KAAKiC,QAAQgB,GACb,MAAM1G,EAAMlC,EAAO,sBACnBmC,QAAQC,KAAKF,EAAKkF,EAAMzB,MACxB8C,EAAOvG,EAAI,GACVsG,GAEHE,GAAG,GAEN,GChOH,MAAMG,EAAkB,CACtB,OACA,MACA,QACA,UACA,SACA,UACA,OACA,OACA,cAGIC,EAASC,OAAO,eAiCtB,MAAMC,EAAK,CAAA,EAELC,EAAU7D,MAAMjE,UAEtB0H,EAAgBlG,SAASuG,IACnBD,EAAQC,KACVF,EAAGE,GAAc,YAAalC,GAC5B,MAAMmC,EAAY/D,MAAMC,KAAKM,MAEvByD,EAAQH,EAAQC,GAAYG,MAAM1D,KAAK2D,GAAOtC,IAE9CuC,aAAEA,EAAYC,WAAEA,GA1C5B,SAAuBC,EAAUC,GAC/B,MAAMC,EAAiBvE,MAAMC,KAAKqE,GAC5BE,EAAiBxE,MAAMC,KAAKoE,GAC5BF,EAAe,GACfC,EAAa,IAAIK,IAEjBC,EAASL,EAASrD,OACxB,IAAK,IAAI2D,EAAI,EAAGA,EAAID,EAAQC,IAAK,CAC/B,MAAMC,EAAUP,EAASM,GACnBE,EAAWN,EAAe5E,QAAQiF,GACpCC,GAAY,EACdN,EAAeM,GAAYnB,EAE3BS,EAAa7C,KAAKsD,EAErB,CAED,MAAME,EAASR,EAAStD,OACxB,IAAK,IAAI2D,EAAI,EAAGA,EAAIG,EAAQH,IAAK,CAC/B,MAAMI,EAAUT,EAASK,GACnBK,EAAWR,EAAe7E,QAAQoF,GACpCC,GAAY,EACdR,EAAeQ,GAAYtB,EAE3BU,EAAWtG,IAAI6G,EAAGI,EAErB,CAED,MAAO,CAAEZ,eAAcC,aACzB,CAa2Ca,CAAclB,EAAWxD,MAG9D,IAAK,IAAK1F,EAAKoB,KAAUmI,EACnBc,EAAQjJ,GACVA,EAAMkJ,OAAO7D,KAAKf,MACTpE,EAASF,KAClBsE,KAAK6E,WAAa,EAClB7E,KAAK1F,GAAOoB,SACLsE,KAAK6E,YAIhB,IAAK,IAAIpC,KAAQmB,EACfkB,EAAWrC,EAAMzC,MAYnB,OATAmB,EAAW,CACTrF,KAAM,QACNqE,cAAeH,KACfd,OAAQc,KACRqB,OACAhB,KAAMkD,EACNnC,SAAUoC,IAGRC,IAAUzD,KAAK2D,GACV3D,KAAK+E,GAGPtB,CACb,EACG,IAIH,CAAC,SAAU,SAAU,QAAS,UAAW,OAAOzG,SAASuG,IACvD,GAAmB,gBAAfA,GAAgCL,EAAgB9I,SAASmJ,GAC3D,OAGF,MAAMyB,EAAUvF,MAAMjE,UAAU+H,GAC5ByB,aAAmBjD,WACrBsB,EAAGE,GAAc,YAAalC,GAC5B,OAAO2D,EAAQrJ,KAAK8D,MAAMC,KAAKM,SAAUqB,EAC/C,EACG,ICtGH,MAAM4D,iBAAEA,EAAgB/H,yBAAEA,EAAwBgI,QAAEA,GAAY7L,OAEnDsK,EAAOP,OAAO,QACd2B,EAAQ3B,OAAO,SACf5B,EAAS4B,OAAO,UAChB+B,EAAU/B,OAAO,WAEjBuB,EAAW5G,GAAQA,KAASA,EAAIoH,GAEtC,SAASrF,EAAYsF,EAAMC,EAAUC,GAE1C,IAKIC,GALEC,MAAOC,EAASC,OAAEA,GAAWC,MAAMC,UAAU5F,KAAMqF,GA2DzD,OAxDAI,EAAU/D,QAAU,EAIpBuD,EAAiBjF,KAAM,CACrB0C,IAAK,CAAEhH,MAAO0J,EAAK1C,KAAOvH,KAE1ByJ,OAAQ,CACNlJ,MAAO,IAETiG,MAAO,CACLxE,cAAc,EACd,GAAAG,GACE,OAAO,IAAIuI,IAAI7F,KAAK4E,OACrB,GAEHO,CAACA,GAAU,CACTzJ,OAAO,GAETiI,CAACA,GAAO,CACNxG,cAAc,EACdG,IAAK,IAAM0C,MAEb+E,CAACA,GAAQ,CACP5H,cAAc,EACdG,IAAK,IAAMmI,GAGbjE,CAACA,GAAS,CACRlE,IAAK,IAAMiI,IAAWA,EAAS,IAAIrB,MAErC5C,WAAY,CACVhE,IAAK,MAAQiI,GAEfO,QAAS,CACPpK,MAAOgK,GAETK,gBAAiB,CACfrK,MAAO+D,MAAMuG,QAAQZ,MAIzB/L,OAAO+G,KAAKgF,GAAMpI,SAAS1C,IACzB,MAAM2L,EAAU/I,EAAyBkI,EAAM9K,GAC/C,IAAIoB,MAAEA,EAAK4B,IAAEA,EAAGC,IAAEA,GAAQ0I,EAEtB3I,GAAOC,EACT0H,EAAiBjF,KAAM,CACrB1F,CAACA,GAAM2L,IAITR,EAAUnL,GAAOoB,CAClB,IAGI+J,CACT,CAEe,MAAMS,UAAczG,MACjC,WAAAK,CAAYsF,EAAM7K,GAIhB,OAFA0G,QAEOnB,EAAYnE,KAAKqE,KAAMoF,EAC/B,CAGD,MAAAM,GACE,MAAMS,EAAOnG,KAAK2D,GAEdwC,EAAKC,aACPD,EAAKC,WAAWpJ,SAAS+F,GAAMA,MAC/BoD,EAAKC,WAAW3F,OAAS,GAG3B0F,EAAKtB,WAAa,EAElBsB,EAAK3E,GAAQ6E,QAEbnB,EAAQlF,MAAMhD,SAAQ,EAAEqD,EAAM3E,MACxBiJ,EAAQjJ,KACVsE,KAAKK,GAAQ,KACd,IAGH8F,EAAKvB,OAAO5H,SAAS4E,IACnBsD,EAAQtD,GAAQ5E,SAAQ,EAAEqD,EAAM3E,MAC1BA,IAAUsE,OACZ4B,EAAOvB,GAAQ,KAChB,GACD,WAGG8F,EAAKxC,UACLwC,EAAKpB,GACZoB,EAAKL,SACN,CAED,MAAAQ,GACE,IAAIzK,EAAM,CAAA,EAEN0K,GAAc,EACdC,GAAS,EAEb,MAAMC,EAAczG,KAAK+F,gBAEzB1M,OAAO+G,KAAKJ,MAAMhD,SAAS/B,IACzB,IAAI8C,EAAMiC,KAAK/E,GAEV,KAAKyL,KAAKzL,GAMbsL,GAAc,GALdtL,EAAI0L,SAAS1L,IACLuL,IACNA,EAAQvL,GAMR0J,EAAQ5G,KACVA,EAAMA,EAAIuI,UAGZzK,EAAIZ,GAAK8C,CAAG,IAGVwI,IACF1K,EAAI4E,OAAS+F,EAAQ,EACrB3K,EAAM4D,MAAMC,KAAK7D,GAEZA,EAAI4E,QAAWgG,IAElB5K,EAAM,CAAA,IAGV,MAAM6G,EAAM1C,KAAK0C,IAOjB,OANAuC,EAAiBpJ,EAAK,CACpB6G,IAAK,CACHpF,IAAK,IAAMoF,KAIR7G,CACR,CAED,QAAAlB,GACE,OAAOxB,KAAKa,UAAUgG,KAAKsG,SAC5B,CAED,MAAA5J,CAAOb,EAAKpB,GACV,OAAOiC,EAAOsD,KAAMnE,EAAKpB,EAC1B,CAED,GAAA6C,CAAIhD,GACF,GAAI,KAAKoM,KAAKpM,GAAM,CAClB,MAAM8F,EAAO9F,EAAIvB,MAAM,KACvB,IAAImG,EAASc,KACb,IAAK,IAAIoE,EAAI,EAAGwC,EAAMxG,EAAKK,OAAQ2D,EAAIwC,EAAKxC,IAC1C,IACElF,EAASA,EAAOkB,EAAKgE,GACtB,CAAC,MAAOnK,GACP,MAAMsC,EAAMlC,EACV,qBACA,CACEC,IAAK8F,EAAK9E,MAAM,EAAG8I,GAAGyC,KAAK,MAE7B5M,GAQF,MALAuC,QAAQC,KAAKF,EAAK,CAChBjC,MACA6L,KAAMnG,OAGFzD,CACP,CAGH,OAAO2C,CACR,CAED,OAAOc,KAAK1F,EACb,CACD,GAAAiD,CAAIjD,EAAKoB,GACP,GAAI,KAAKgL,KAAKpM,GAAM,CAClB,MAAM8F,EAAO9F,EAAIvB,MAAM,KACjB+N,EAAU1G,EAAK2G,MACrB,IAAI7H,EAASc,KACb,IAAK,IAAIoE,EAAI,EAAGwC,EAAMxG,EAAKK,OAAQ2D,EAAIwC,EAAKxC,IAC1C,IACElF,EAASA,EAAOkB,EAAKgE,GACtB,CAAC,MAAOnK,GACP,MAAMsC,EAAMlC,EACV,qBACA,CACEC,IAAK8F,EAAK9E,MAAM,EAAG8I,GAAGyC,KAAK,MAE7B5M,GAQF,MALAuC,QAAQC,KAAKF,EAAK,CAChBjC,MACA6L,KAAMnG,OAGFzD,CACP,CAGH,OAAQ2C,EAAO4H,GAAWpL,CAC3B,CAED,OAAQsE,KAAK1F,GAAOoB,CACrB,EAGHwK,EAAM1K,UAAUkB,OACd,IAAKmF,KAAYyB,GACjB,CACElG,YAAY,ICzOhB,MAAQ6H,iBAAAA,GAAqB5L,OAEhB2N,EAAU,EAAG9H,SAAQ5E,MAAKoB,QAAOuL,WAAUnL,OAAMoL,cAC5D,MAAM9F,EAAW6F,EAAS3M,GAE1B,IAAI8K,EAAO1J,EACX,GAAIiJ,EAAQS,GAAO,CACjB,GAAIhE,IAAa1F,EACf,OAAO,EAET0J,EAAKR,OAAO7D,KAAKkG,EACrB,MAAS,GAAIrL,EAASF,GAAQ,CAC1B,MAAMjB,EAAOpB,OAAO6D,yBAAyBgC,EAAQ5E,GAChDG,IAAQA,EAAK+C,eAAe,WAC/B4H,EAAO,IAAKlG,EAAOiI,eAAiBjB,GAAOxK,EAAO,CAChDiG,MAAOsF,IAGT7B,EAAKR,OAAO7D,KAAKkG,GAEpB,CAED,MAAMG,EAAShG,IAAa1F,GAEvB0L,GAAUzC,EAAQvD,IACrB0D,EAAW1D,EAAU6F,GAGvB,MAAMxD,EAAQyD,EAAQ9B,GActB,OAZCgC,IAEElI,EAAO2F,YACR1D,EAAW,CACTrF,KAAMA,GAAQ,MACdoD,OAAQ+H,EACR9G,cAAe8G,EACf5G,KAAM/F,EACNoB,QACA0F,aAGGqC,CAAK,EAIDqB,EAAa,CAACuC,EAAY1F,KACrC,GAAIgD,EAAQ0C,GAAa,CACvB,MAAMlI,EAAQkI,EAAWzC,OAAOxF,QAAQuC,GACxC,GAAIxC,GAAS,EACXkI,EAAWzC,OAAOvF,OAAOF,EAAO,OAC3B,CACL,MAAM5C,EAAMlC,EAAO,kBACnBmC,QAAQC,KAAKF,EAAK,CAChBoF,QACA2F,SAAUD,IAEZ7K,QAAQvC,MAAMsC,EACf,CACF,GAGU8I,EAAU,CACrB,GAAA9H,CAAI2B,EAAQ5E,EAAKoB,EAAOuL,GACtB,GAAmB,iBAAR3M,EACT,OAAOiN,QAAQhK,IAAI2B,EAAQ5E,EAAKoB,EAAOuL,GAIzC,GAAI,KAAKP,KAAKpM,GAYZ,OAXK4E,EAAO1B,eAAelD,GASzBiN,QAAQhK,IAAI2B,EAAQ5E,EAAKoB,EAAOuL,GARhChC,EAAiB/F,EAAQ,CACvB5E,CAACA,GAAM,CACL+C,UAAU,EACVF,cAAc,EACdzB,YAMC,EAGT,IACE,OAAOsL,EAAQ,CACb9H,SACA5E,MACAoB,QACAuL,WACAC,QAAQ9B,GACCmC,QAAQhK,IAAI2B,EAAQ5E,EAAK8K,EAAM6B,IAG3C,CAAC,MAAOhN,GACP,MAAMsC,EAAMlC,EACV,qBACA,CACEC,OAEFL,GAKF,MAFAuC,QAAQC,KAAKF,EAAK,CAAE2C,SAAQxD,UAEtBa,CACP,CACF,EACDiL,eAAc,CAACtI,EAAQ5E,IACjB,KAAKoM,KAAKpM,IAAuB,iBAARA,EACpBiN,QAAQC,eAAetI,EAAQ5E,GAGjC0M,EAAQ,CACb9H,SACA5E,MACAoB,WAAO+L,EACPR,SAAU/H,EAAO6F,GACjBjJ,KAAM,SACNoL,QAAO,IACEK,QAAQC,eAAetI,EAAQ5E,MCxHjC+K,EAAU,CACrB9H,IAAG,CAAC2B,EAAQ5E,EAAKoB,EAAOuL,IACjB,KAAKP,KAAKgB,OAAOpN,IAIlB4E,EAAO5E,KAASoB,IAMR,SAARpB,EAMKiN,QAAQhK,IAAI2B,EAAQ5E,EAAKoB,EAAOuL,GAGlC3B,EAAa/H,IAAI2B,EAAQ5E,EAAKoB,EAAOuL,IAlBnCM,QAAQhK,IAAI2B,EAAQ5E,EAAKoB,EAAOuL,GAoB3C3J,IAAG,CAAC4B,EAAQ5E,EAAK2M,IACV,KAAKP,KAAKgB,OAAOpN,IAIfiN,QAAQjK,IAAI4B,EAAQ5E,EAAK2M,GAHvBU,GAAKzI,EAAOX,IAAIqJ,SAAStN,IAKpC,OAAAuN,CAAQ3I,GACN,IAAIkB,EAAOmH,QAAQM,QAAQ3I,GACvB0H,EAAM1H,EAAOX,IAAIqJ,SAASnH,OAC9B,IAAK,IAAI2D,EAAI,EAAGA,EAAIwC,EAAKxC,IACvBhE,EAAKW,KAAK2G,OAAOtD,IAEnB,OAAOhE,CACR,EACDlD,yBAAwB,CAACgC,EAAQ5E,IACZ,iBAARA,GAAqB,KAAKoM,KAAKpM,GAMnCiN,QAAQrK,yBAAyBgC,EAAQ5E,GALvC,CACL8C,YAAY,EACZD,cAAc,IChCT2K,EAAgB,CAC3B,aAAAC,GAAkB,EAClB,YAAAC,GAAiB,EACjB,YAAAC,GAAiB,EACjB,MAAAC,GAAW,GAGPC,EAAcjJ,GAAWA,EAAOkJ,YAAclJ,EAAOkJ,UAAY,IACjEC,EAAY,CAACnJ,EAAQwG,IAAWyC,EAAWjJ,GAAQ6B,KAAK2E,GAExD4C,EAAgB,CAAC9J,EAAM4G,EAAMrF,KACjC,MAAMwI,EAAU,yBACI7K,EAAY/C,8IAQrB6D,wPAgBX,OAAO,IAAIuD,SAAS,WAAYwG,GAASC,KAAK,CAAEpD,UAASrF,GAAO,EAG3D,SAASmI,GAAO9C,KACrBA,EAAIlG,OACJA,EAAMuJ,SACNA,EAAQC,MACRA,EAAKC,aACLA,KACGC,IAEH,MAAMhK,EAAU6J,GAAYA,EAASI,UAEjCjK,IACFM,EAAO2J,UAAYjK,GAGrBkJ,EAAcG,aAAa,CACzB/I,WAGF,MAAM4J,EAAQxJ,EAAUJ,EAAQ,SAE1B6J,EAAQ,GACRC,EAAUb,EAAWjJ,GAG3BI,EAAUJ,EAAQ,SAASlC,SAASuC,IAClC,MAAM0J,EAAc1J,EAAGsJ,UAEvB,GAAI,aAAanC,KAAKuC,GAAc,CAClC,MAAMC,EAASzJ,MAAMC,KAAK,IAAImG,IAAIoD,EAAY/K,MAAM,kBAAkBiL,KACnEC,IACC,MAAM5K,EAAO4K,EAASvO,QAAQ,eAAgB,MAG9C,MAAO,CACLuO,WACA3H,KAJW6G,EAAc9J,EAAM4G,GAKhC,IAICiE,EAAc,KAClB,IAAIC,EAAaL,EAEjBC,EAAOlM,SAAQ,EAAGoM,WAAU3H,WAC1B6H,EAAaA,EAAWzO,QAAQuO,EAAU3H,IAAO,IAG/ClC,EAAGsJ,YAAcS,IACnB/J,EAAGsJ,UAAYS,EAChB,EAEHP,EAAMhI,KAAKsI,GAEX,MAAME,EAAc,KAClBL,EAAOzI,OAAS,EAChB+I,EAAOT,EAAOM,GACdG,EAAOrB,EAAW5I,GAAKgK,GACvBC,EAAOR,EAASO,EAAY,EAG9BlB,EAAU9I,EAAIgK,GACdP,EAAQjI,KAAKwI,EACd,KAIHT,EAAM9L,SAASuC,IACb,MAAMkK,EAAS/K,SAASgL,eAAe,KACjCC,WAAEA,GAAepK,EACvBoK,EAAWC,aAAaH,EAAQlK,GAChCoK,EAAWE,YAAYtK,GAEvB,MAAMkC,EAAO6G,EAAc/I,EAAGuK,aAAa,QAAS1E,GAC9C2E,EAAa,KACjB,MAAMnL,EAAU6C,IACZgI,EAAOO,cAAgBtC,OAAO9I,KAChC6K,EAAOO,YAAcpL,EACtB,EAEHmK,EAAMhI,KAAKgJ,GAEX,MAAME,EAAa,KACjBT,EAAOR,EAASiB,GAChBT,EAAOT,EAAOgB,GACdP,EAAOrB,EAAWsB,GAASQ,EAAW,EAExCjB,EAAQjI,KAAKkJ,GACb5B,EAAUoB,EAAQQ,EAAW,IAG/B,MAAMC,EAAO5K,EAAUJ,EAAQ,iBAyH/B,GAvHIyJ,GAAgBrK,EAASY,EAAQ,kBACnCgL,EAAKC,QAAQjL,GAIfgL,EAAKlN,SAASuC,IACZ,MAAM6K,EAAWjR,KAAKC,MAAMmG,EAAGuK,aAAa,gBAEtCO,EAAM1C,GAAKpI,GAEjB,IAAK,IAAK+K,EAAYrL,KAAQ5F,OAAO6L,QAAQkF,GAC3CnL,EAAIjC,SAASqE,IACX,IACE,MAAMkJ,OAAEA,GAAWF,EAAIC,GACvB,IAEIE,EAFAC,EAAY,GAIhB,MAAMC,EAAO,KACX,MAAOpQ,EAAKkE,GAAQ6C,EAEdI,EAAO6G,EAAc9J,EAAM4G,EAAM,CACrCuF,QAAU1Q,IACR,MAAM2Q,EAAY,IAAItQ,MAAQkE,KACxBjC,EAAMlC,EACV,kBACA,CACEmE,KAAMoM,GAER3Q,GASF,OANAuC,QAAQC,KAAKF,EAAK,CAChB2C,OAAQmL,EAAI9L,IACZqM,cAEFpO,QAAQvC,MAAMsC,IAEP,CAAK,IAIhBkO,EAAY,CAACnQ,EAAKmH,GAElB,MAAMgC,EAAQ4G,EAAIC,MAAeG,EAAW,CAC1CH,aACApL,OAAQmL,EACRjF,OACAyF,WAAYxJ,EACZA,KAAMoJ,IAUR,OAPA3C,EAAcI,OAAO,CACnB4C,KAAM,UACNzJ,OACAhB,KAAMiK,EACNpL,OAAQmL,IAGH5G,CAAK,EAGd,IAAIsH,EAAY,KACd,MAAQrF,OAAQsF,GAAiBX,EAAIC,GAEjCU,GACFA,EAAa,CACXV,aACApL,OAAQmL,EACRjF,OACAyF,WAAYxJ,EACZA,KAAMoJ,EACNxN,OAAQuN,IAIZhB,EAAOR,EAAS+B,GAChBvB,EAAOrB,EAAW5I,GAAKwL,GACvBvB,EAAOT,EAAO2B,GACdK,EAAY,IAAI,EAGdR,EAEFxB,EAAMhI,KAAK2J,GAEXF,EAAaE,IAGf1B,EAAQjI,KAAKgK,GACTxL,IAAOL,GACTmJ,EAAU9I,EAAIwL,EAEjB,CAAC,MAAO9Q,GACP,MAAMsC,EAAMlC,EACV,aACA,CACEgG,KAAMiK,EACNW,KAAM5J,EAAK,GACX6J,KAAM7J,EAAK,IAEbpH,GAGF,MADAuC,QAAQC,KAAKF,EAAKgD,GACZhD,CACP,KAILgD,EAAG4L,gBAAgB,eAEnB5L,EAAG6L,kBAAmB,EACtB7L,EAAG8L,cAAc,IAAIC,MAAM,oBAAoB,IAG5CpM,EAAOqM,gBN9NP,SAAuB1P,GAC5B,IAAKA,EACH,OAAO,EAET,IAAK,IAAIvB,KAAOuB,EACd,GAAIA,EAAI2B,eAAelD,GACrB,OAAO,EAGX,OAAO,CACT,CMoNiCkR,CAAc9C,KAC3CxJ,EAAOqM,eAAiB7C,GAGtBxJ,EAAOuM,eAAiBvM,EAAOuM,gBAAkBrG,EAAM,CACzD,MAAM7I,EAAMlC,EAAO,wBAQnB,MANAmC,QAAQC,KAAKF,EAAK,CAChBmP,QAASxM,EACTyM,IAAKzM,EAAOuM,cACZG,IAAKxG,IAGD7I,CACP,CAID,GAFA2C,EAAOuM,cAAgBrG,EAEnB2D,EAAMtI,OAAQ,CAChBsI,EAAM/L,SAAS+F,GAAMA,MAGrB,MAAMf,EAAMoD,EAAKjD,WAAWtI,IACtBkP,EAAMtI,OACRsI,EAAM/L,SAAS+F,GAAMA,MAErBqC,EAAKnD,QAAQD,EACd,GAEJ,CAED8F,EAAcI,OAAO,CAAE4C,KAAM,OAAQ5L,UACvC,CAEA,MAAM2M,EAAatM,IACjB,MAAMuM,QAAEA,GAAYvM,EAEpB,GAAgB,aAAZuM,EAAJ,CAIA,GAAIA,EAAS,CAEX,MAAMjQ,EAAM,CAAA,EAEZ4D,MAAMC,KAAKH,EAAGwM,YAAY/O,SAASgP,IACjC,MAAMC,EAAY,YAAYC,KAAKF,EAAK3L,MAExC,IAAK4L,EACH,OAGF,KAAO3B,EAAY6B,GAAUF,EAExB3B,IACHA,EAAa,SAGOzO,EAAIyO,KAAgBzO,EAAIyO,GAAc,KAE9CvJ,KAAK,CAACoL,EAAQH,EAAKtQ,QAEjC6D,EAAG4L,gBAAgBa,EAAK3L,KAAK,IAGlBhH,OAAO+G,KAAKvE,GAEhB4E,QACPlB,EAAG6M,aAAa,cAAejT,KAAKa,UAAU6B,GAEjD,CAED4D,MAAMC,KAAKH,EAAGqI,UAAU5K,QAAQ6O,EAjC/B,CAiCyC,EAGtCQ,GAAa,CAAC5D,EAAUjK,EAAMiD,KAClC,MAAM6K,EAAQ7M,MAAMC,KAAK+I,EAAS7J,QAAQe,iBAAiBnB,IAM3D,OAJIiD,GACF6K,EAAMtP,QAAQyE,GAGT6K,CAAK,EAGd,IAAIC,GAEG,MAAMC,GAAW/D,IACtB,IAAIC,EAAQ,CAAA,EACZ,MAAM+D,EAAU,CAAA,EAEhB3E,EAAcC,cAAc,CAC1BU,aAGF4D,GAAW5D,EAAU,QAASzN,IAC5B,MAAM0R,EAAMvR,IACZH,EAAKoR,aAAa,UAAWM,GAE7BD,EAAQC,GAAO1R,EAAK6N,UACpB7N,EAAK6N,UAAY,EAAE,IAGrBJ,EAASI,UAAYJ,EAASI,UAAUhO,QACtC,cACA,CAACoD,EAAKC,IACG,gBAAgBA,gBAI3B,MAAMyO,EAAWlE,EAASqB,aAAa,QAEvC,GAAI6C,EAAU,CACZ,MAAMC,EAAanE,EAAS7J,QAAQgJ,SACpC,GAAIgF,EAAWnM,OAAS,EAAG,CACzB,IAAK8L,GAAU,CACb,MAAMhQ,EAAMlC,EAAO,oBACnBmC,QAAQC,KAAKF,EAAK,CAChBqC,QAAS6J,EAAS7J,UAEpB2N,GAAW,CACZ,CAED,MAAMM,EAAW,WAAWF,IAC5BlE,EAASI,UAAY,QAAQgE,8BAAqCpE,EAASI,kBAC3ErM,QAAQC,KACNpC,EAAO,kBAAmB,CACxBsS,WACA/F,IAAKgG,EAAWnM,OAChBoM,aAGL,CACDnE,EAAMiE,GAAYlE,EAClBA,EAASe,QACV,CAED6C,GAAW5D,EAAU,sBAAuBqE,IAC1C,GAAIA,EAAO/N,cAAc,sBACvB,MAAM1E,EAAO,uBAGf,GAAIyS,EAAOjE,UAAUkE,OAAQ,CAC3B,MAAM9J,EAAM,IAAI9H,MAChB2R,EAAOV,aAAa,OAAQnJ,GAE5B,MAAMxE,EAAOC,SAASC,cAAc,YACpCF,EAAK2N,aAAa,OAAQnJ,GAC1BxE,EAAKoK,UAAYiE,EAAOjE,UACxBiE,EAAOjE,UAAY,GACnBiE,EAAOE,YAAYvO,EACpB,KAGH4N,GAAW5D,EAAU,yBAA0BwE,IAC7C,MAAMC,EAAaD,EAAQrF,SAAS,GAC/BsF,GAAqC,aAAvBA,EAAWpB,UAC5BmB,EAAQpE,UAAY,uBAAuBoE,EAAQpE,uBACpD,IAGHwD,GAAW5D,EAAU,YAAa5O,IAChC,MAAMsT,EAAWX,GAAQ3S,GAEzBR,OAAO+G,KAAK+M,GAAUnQ,SAAS2P,IAC7B,GAAIjE,EAAMiE,GACR,MAAMtS,EAAO,mBAAoB,CAC/BgG,KAAMsM,GAET,IAGHjE,EAAQ,IAAKA,KAAUyE,EAAU,IAGnC1N,MAAMC,KAAK+I,EAAS7J,QAAQgJ,UAAU5K,SAASuC,GAAOsM,EAAUtM,KAGhE,IAAK,IAAKjF,EAAKoB,KAAUrC,OAAO6L,QAAQuH,GACtCJ,GAAW5D,EAAU,aAAanO,OAAUiF,IAC1CA,EAAG4L,gBAAgB,WAEnB5L,EAAGsJ,UAAYnN,CAAK,IASxB,OALAoM,EAAcE,aAAa,CACzBS,WACAC,UAGKA,CAAK,EAGR0E,GAAUrP,GACVD,EAAWC,GACNA,IAGFA,EAGHsP,GAAc,CAClB,IAAAC,IAAQjM,GACN,IAAKhB,EAAM3E,GAAS2F,EAEpB,GAAoB,IAAhBA,EAAKZ,OACP,OAAOT,KAAKK,GAGd3E,EAAQ0R,GAAO1R,GACf2E,EAAOrC,EAAkBqC,GAEzBL,KAAKzC,IAAI8C,EAAM3E,EAChB,EACD,IAAAsQ,IAAQ3K,GACN,IAAKhB,EAAM3E,GAAS2F,EAEpB,MAAM9C,IAAEA,GAAQyB,KAEhB,GAAoB,IAAhBqB,EAAKZ,OACP,OAAOlC,EAAIuL,aAAazJ,GAG1B3E,EAAQ0R,GAAO1R,IAED,IAAVA,EACFA,EAAQ,MACW,IAAVA,IACTA,EAAQ,IAGNA,QACF6C,EAAI4M,gBAAgB9K,GACX9B,EAAIuL,aAAazJ,IAAS3E,GACnC6C,EAAI6N,aAAa/L,EAAM3E,EAE1B,EACD,SAAS2F,GACP,IAAKhB,EAAM3E,GAAS2F,EAEpB,GAAoB,IAAhBA,EAAKZ,OACP,OAAOT,KAAKzB,IAAIgP,UAAUC,SAASnN,GAGrC3E,EAAQ0R,GAAO1R,GAEXA,EACFsE,KAAKzB,IAAIgP,UAAUE,IAAIpN,GAEvBL,KAAKzB,IAAIgP,UAAU/D,OAAOnJ,EAE7B,EACD,KAAAyB,IAAST,GACP,GAAIA,EAAKZ,OAAS,EAChB,OAAOiN,EAAW5L,MAAM4B,MAAM1D,KAAMqB,GAGtC,MAAM9G,EAAU8G,EAAK,IACfwJ,WAAEA,EAAYzF,KAAMlG,GAAW3E,GAC9BoT,EAAcC,GAAkB/C,EACjCgD,EAAW7P,EAAkB2P,GAE7B3G,EAAU,KACd,IAAIjJ,EAAMiC,KAAK1C,IAAIuQ,GACnB3O,EAAO3B,IAAIqQ,EAAgB7P,EAAI,EAG3BiE,EAAMhC,KAAK8B,OAAOjI,IAClBA,EAAEoG,YAAY4N,IAChB7G,GACD,IAMH,OAFAA,IAEO,KACLhH,KAAKiC,QAAQD,EAAI,CAEpB,GAGHqL,GAAYC,KAAK/C,QAAS,EAC1B8C,GAAYrB,KAAKzB,QAAS,EAC1B8C,GAAYS,MAAMvD,QAAS,EAE3B8C,GAAYC,KAAK5H,OAAS,EAAGxG,SAAQmC,OAAM0M,OAAM3I,WAC/C,MAAMyI,EAAWxM,EAAK,GAEhB2M,EAAS9O,EAAO5B,IAAIuQ,GACtBlJ,EAAQqJ,IACV9O,EAAO3B,IAAIsQ,EAAU,CAAA,EACtB,EAGHR,GAAYvL,MAAM4D,OAAU7L,IAC1BA,EAAEoD,SACF,MAAM4Q,EAAWhU,EAAEgR,WAAW,GAExBmD,EAASnU,EAAEuL,KAAK9H,IAAIuQ,GACtBlJ,EAAQqJ,IACVnU,EAAEuL,KAAK7H,IAAIsQ,EAAU,CAAE,EACxB,EChjBH,MAAMI,GAAS,CACb,IAAAC,CAAKL,EAAUM,EAAY5T,GACzB,IAAKA,EACH,MAAMF,EAAO,0BAGdwT,EAAUM,GAAc5T,EAAQsQ,WAEjCgD,EAAW7P,EAAkB6P,GAC7BM,EAAanQ,EAAkBmQ,GAE/B,MAAM/I,KAAEA,GAAS7K,EAIjB,GAFY6K,EAAK9H,IAAI6Q,aAEF9U,OAAQ,CACzB,MAAMkD,EAAMlC,EAAO,0BAA2B,CAAE8T,eAEhD,MADA3R,QAAQC,KAAKF,EAAK6I,GACZ7I,CACP,CAEDyD,KAAK6N,GAAYzI,EAAK9H,IAAI6Q,GAE1B,MAAMC,EAAOpO,KAAK8B,OAAOjI,IACvB,GAAIA,EAAEoG,YAAY4N,GAChB,IACE,MAAMnS,EAAQsE,KAAK1C,IAAIuQ,GACvBzI,EAAK7H,IAAI4Q,EAAYzS,EACtB,CAAC,MAAOa,GAGR,CACF,IAGG8R,EAAOjJ,EAAKtD,OAAOjI,IACvB,GAAIA,EAAEoG,YAAYkO,GAChB,IACE,MAAMzS,EAAQ0J,EAAK9H,IAAI6Q,GACvBnO,KAAKzC,IAAIsQ,EAAUnS,EACpB,CAAC,MAAOa,GAGR,CACF,IAGH,MAAO,KACLyD,KAAKiC,QAAQmM,GACR1Q,EAAY0H,IACfA,EAAKnD,QAAQoM,EACd,CAEJ,GCvDH,SAASC,GAAejO,EAAMoB,EAAMlH,GAClC,IAAIgU,EACJ,GAAIhU,EAAS,CACX,MAAMiU,EAAcjU,EAAQsQ,WAAW,GAEvC,IAAK,eAAenE,KAAK8H,GAAc,CAErC,KADA/M,EAAOlH,EAAQ6K,KAAK9H,IAAIkR,IACb,CACT,MAAMC,EAAMlU,EAAQ6K,KAAKqJ,IACnBlS,EAAMlC,EAAO,iBAAkB,CACnCgG,KAAMmO,EACNC,IAAKA,EAAM,IAAIA,KAAS,KAG1B,MADAjS,QAAQC,KAAKF,EAAK,aAAchC,EAAQ6K,MAClC7I,CACP,CACDkF,EAAOA,EAAK+G,KAAKjO,EAAQ6K,KAC1B,CAEDmJ,EAAU,IAAMvO,KAAKzB,IAAImQ,oBAAoBrO,EAAMoB,EACpD,CAED,MAAO,CAAE8M,UAASlO,OAAMoB,OAC1B,CDmCAwM,GAAOC,KAAKxI,OAAU7L,IACpBA,EAAEoD,QAAQ,EClCZ,MAAM0R,GAAU,CACd,EAAAC,IAAMvN,GACJ,MAAMkN,QAAEA,EAAOlO,KAAEA,EAAIoB,KAAEA,GAAS6M,GAAe3S,KAAKqE,QAASqB,GAI7D,OAFArB,KAAKzB,IAAIsQ,iBAAiBxO,EAAMoB,GAE5B8M,GAIGvO,IACR,EACD,GAAA8O,IAAOzN,GACL,MAAMkN,QAAEA,EAAOlO,KAAEA,EAAIoB,KAAEA,GAAS6M,GAAe3S,KAAKqE,QAASqB,GAE7D,IAAInF,EAAYrC,IACdmG,KAAK+O,IAAI1O,EAAMnE,GACfuF,EAAK5H,EAAE,EAKT,OAFAmG,KAAKzB,IAAIsQ,iBAAiBxO,EAAMnE,GAE5BqS,GAIGvO,IACR,EACD,GAAA+O,CAAI1O,EAAMoB,GAER,OADAzB,KAAKzB,IAAImQ,oBAAoBrO,EAAMoB,GAC5BzB,IACR,EACD,IAAAgP,CAAK3O,EAAMN,GACT,MAAMxF,EAAU,IAAKwF,GAErB,IAAIqF,EAMA6J,EAYJ,OAjBI1U,EAAQiD,eAAe,UACzB4H,EAAO7K,EAAQ6K,YACR7K,EAAQ6K,MAKb/E,aAAgBiL,MAClB2D,EAAQ5O,EACCA,IACT4O,EAAQ,IAAI3D,MAAMjL,EAAM,CAAE6O,SAAS,KAAS3U,KAG9C0U,EAAM7J,KAAOA,EAEbpF,KAAKzB,IAAI8M,cAAc4D,GAEhBjP,IACR,GAGH2O,GAAQC,GAAGlJ,OAAU7L,IACnBA,EAAEoD,QAAQ,EAGZ0R,GAAQG,IAAIpJ,OAAU7L,IACpBA,EAAEoD,QAAQ,ECrFZ,MAAMkS,GAAe,CAAC5Q,EAAK6Q,EAAOC,KAAUC,KAC1C,MAAM1H,SAAEA,GAAarJ,EACjB6Q,EAAQ,IACVA,GAAS7Q,EAAIqJ,SAASnH,aAGVgH,IAAV4H,IACFA,EAAQ9Q,EAAIqJ,SAASnH,OAAS2O,GAGhC,MAAMG,EAAU,GAChB,IAAK,IAAInL,EAAIgL,EAAOxI,EAAMwI,EAAQC,EAAOjL,EAAIwC,EAAKxC,IAAK,CACrD,MAAMlF,EAAS0I,EAASxD,GACxBmL,EAAQxO,KAAK7B,EACd,CAID,GAFAqQ,EAAQvS,SAASuC,GAAOA,GAAMA,EAAGiK,WAE7B8F,EAAM7O,OAAQ,CAChB,MAAM+O,EAAO9Q,SAAS+Q,yBACtBH,EAAMtS,SAASnD,GAAM2V,EAAK3Q,OAAO6Q,GAAW7V,GAAG0E,OAE/C,MAAMoR,EAAc/H,EAASwH,GACzBO,EACFpR,EAAIqL,aAAa4F,EAAMG,GAEvBpR,EAAIyO,YAAYwC,EAEnB,CAED,OAAOD,CAAO,EAGVrM,GAAkB,CACtB,OACA,MACA,QACA,UACA,SACA,UACA,OACA,OACA,cAGI0M,GAAc,CAClB,IAAA7O,IAAQM,GACN,MAAM9C,IAAEA,GAAQyB,KAYhB,OAVAmP,GAAa5Q,EAAKA,EAAIqJ,SAASnH,OAAQ,KAAMY,GAE7CF,EAAW,CACTrF,KAAM,QACNqE,cAAeH,KACfd,OAAQc,KACRqB,OACAhB,KAAM,SAGD9B,EAAIqJ,SAASnH,MACrB,EAED,GAAAsG,IAAO1F,GACL,MAAM9C,IAAEA,GAAQyB,KAEV6P,EAAUV,GAAa5Q,EAAKA,EAAIqJ,SAASnH,OAAS,EAAG,KAAMY,GAUjE,OARAF,EAAW,CACTrF,KAAM,QACNqE,cAAeH,KACfd,OAAQc,KACRqB,OACAhB,KAAM,QAGDsH,GAAKkI,EAAQ,GACrB,EAED,KAAA/O,IAASO,GACP,MAAM9C,IAAEA,GAAQyB,KAEV6P,EAAUV,GAAa5Q,EAAK,EAAG,KAAM8C,GAU3C,OARAF,EAAW,CACTrF,KAAM,QACNqE,cAAeH,KACfd,OAAQc,KACRqB,OACAhB,KAAM,UAGDsH,GAAKkI,EAAQ,GACrB,EAED,OAAA1F,IAAW9I,GACT,MAAM9C,IAAEA,GAAQyB,KAYhB,OAVAmP,GAAa5Q,EAAK,EAAG,KAAM8C,GAE3BF,EAAW,CACTrF,KAAM,QACNqE,cAAeH,KACfd,OAAQc,KACRqB,OACAhB,KAAM,YAGD9B,EAAIqJ,SAASnH,MACrB,EACD,MAAApB,IAAUgC,GACR,MAAMyO,EAAQX,GAAanP,KAAKzB,OAAQ8C,GAUxC,OARAF,EAAW,CACTrF,KAAM,QACNqE,cAAeH,KACfd,OAAQc,KACRqB,OACAhB,KAAM,WAGDyP,EAAM3G,IAAIxB,GAClB,EACD,OAAAoI,IAAW1O,GACT,MAAM2O,EAASvQ,MAAMC,KAAKM,KAAKzB,IAAI0R,YAEnC3M,GAAQyM,QAAQpU,KAAKqU,KAAW3O,GAEhC,MAAMmO,EAAO9Q,SAAS+Q,yBAsBtB,OApBAO,EAAOhT,SAASuB,IAEdA,EAAI2R,WAAa,EACjBV,EAAK3Q,OAAON,EAAI,IAGlByB,KAAKzB,IAAIM,OAAO2Q,GAEhBQ,EAAOhT,SAASuB,WACPA,EAAI2R,UAAU,IAGvB/O,EAAW,CACTrF,KAAM,QACNqE,cAAeH,KACfd,OAAQc,KACRqB,OACAhB,KAAM,YAGDL,IACR,EACD,IAAAmQ,IAAQ9O,GACN,MAAM2O,EAASvQ,MAAMC,KAAKM,KAAKzB,IAAIqJ,UAAUuB,IAAIxB,IAEjDrE,GAAQ6M,KAAKxU,KAAKqU,KAAW3O,GAE7B,MAAMmO,EAAO9Q,SAAS+Q,yBAqBtB,OAnBAO,EAAOhT,SAASnD,IACdA,EAAE0E,IAAI2R,WAAa,EACnBV,EAAK3Q,OAAOhF,EAAE0E,IAAI,IAGpByB,KAAKzB,IAAIM,OAAO2Q,GAEhBQ,EAAOhT,SAASnD,WACPA,EAAE0E,IAAI2R,UAAU,IAGzB/O,EAAW,CACTrF,KAAM,QACNqE,cAAeH,KACfd,OAAQc,KACRqB,OACAhB,KAAM,SAGDL,IACR,GAGGsD,GAAU7D,MAAMjE,UAEtBnC,OAAO+G,KAAK/G,OAAO+W,0BAA0B9M,KAAUtG,SAAS1C,IAC9D,GACU,gBAARA,GACQ,WAARA,GACA4I,GAAgB9I,SAASE,GAEzB,OAGF,MAAM+V,EAAa/M,GAAQhJ,GAEvBwD,EAAWuS,KACbT,GAAYtV,GAAO,YAAa+G,GAC9B,OAAOgP,EAAW3M,MAAMjE,MAAMC,KAAKM,KAAKzB,IAAIqJ,UAAUuB,IAAIxB,IAAOtG,EACvE,EACG,IAGY,MAAMiP,IAErB,IAAK,IAAKjQ,EAAM3E,KAAUrC,OAAO6L,QAAQ0K,IACvCvW,OAAOoE,eAAe6S,GAAU9U,UAAW6E,EAAM,CAC/C3E,UC/MJ,MAAM6U,GAASnL,GACN,IAAIc,EAAMd,GAGnB/L,OAAOC,OAAOiX,GAAO,CAAEC,GAAI7L,ICF3B,MAAMlH,eAAEA,GAAcnE,OAAEA,IAAWD,OAI7BoX,GAAU,CAACrQ,EAAM2N,KACrB,MAAMxP,IAAEA,GAAQwP,EAEhB3N,EAAKpD,SAAS/B,IACZ,GAAIA,KAAKsD,EAAK,CACZ,IAAImS,GAAQ,EACZjT,GAAesQ,EAAM9S,EAAG,CACtBmC,YAAY,EACZE,IAAK,KACH,IAAIS,EAAMQ,EAAItD,GAQd,OAPIyV,IACE,KAAKhK,KAAK3I,GACZ2S,GAAQ,EAER3S,EAAMrE,OAAOqE,IAGVA,CAAG,EAEZR,IAAMQ,IACJ2S,EAAuB,iBAAR3S,EACfQ,EAAItD,GAAK8C,CAAG,GAGjB,IACD,EAGE4S,GAAe,IAAI9K,IAAI,CA9BH,QAAS,WAAY,SAgC7C,SACA,SACA,QACA,WACA,SACA,SAGI+K,GAAW,CAAC7C,EAAMhO,EAAO,MAC7B,MAAQM,KAAMwQ,EAAO/U,KAAEA,GAASiE,GAE1BxB,IAAEA,GAAQwP,EAChB,IAAIpC,EAAMpN,EAAIsS,GAEd9C,EAAKa,GAAG9S,GAAM,KACZqF,EAAW,CACTrF,KAAM,MACNoD,OAAQ6O,EACR5N,cAAe4N,EACf1N,KAAMwQ,EACNnV,MAAO6C,EAAIsS,GACXzP,SAAUuK,IAGZA,EAAMpN,EAAIsS,EAAQ,GAClB,EAyCEC,GAAa/C,IAGjB,OAFaA,EAAK/B,KAAK,SAGrB,IAAK,OACHyE,GAAQ,CAAC,WAAY,SAAU1C,GAC/B6C,GAAS7C,EAAM,CAAE1N,KAAM,QAASvE,KAAM,WACtC,MACF,IAAK,WACH2U,GAAQ,CAAC,UAAW,WAAY,SAAU1C,GAC1C6C,GAAS7C,EAAM,CAAE1N,KAAM,UAAWvE,KAAM,WACxC,MACF,IAAK,QACH2U,GAAQ,CAAC,UAAW,SAAU1C,GAC9B6C,GAAS7C,EAAM,CAAE1N,KAAM,UAAWvE,KAAM,WACxC,MAEF,QACE2U,GAAQ,CAAC,cAAe,SAAU1C,GAClC6C,GAAS7C,EAAM,CAAE1N,KAAM,QAASvE,KAAM,UAEzC,EAGGiV,GAAc,CAAC7R,EAAQV,KAC3B,MAAM4G,EAAO,CAAA,EA4Cb,OA1CAlG,EAAO8R,IAAIxS,GAAMxB,SAASqN,IACxB,MAAMhK,KAAEA,EAAIoO,IAAEA,EAAGlQ,IAAEA,GAAQ8L,EAE3B,GAAY,UAARoE,EACF,OAAQpE,EAAIvO,MACV,IAAK,WACGuE,KAAQ+E,IACZA,EAAK/E,GAAQ,IAGX9B,EAAI0S,SACN7L,EAAK/E,GAAMU,KAAKxC,EAAI7C,OAEtB,MACF,IAAK,QACC6C,EAAI0S,UACN7L,EAAK/E,GAAQ9B,EAAI7C,OAEnB,MACF,IAAK,OACH0J,EAAK/E,GAAQ9B,EAAI2S,MACjB,MACF,QACE9L,EAAK/E,GAAQ9B,EAAI7C,WAEhB,GAAY,aAAR+S,EACTrJ,EAAK/E,GAAQ9B,EAAI7C,WACZ,GAAY,WAAR+S,EAAkB,CAC3B,MAAM0C,EAAe7R,EAAUf,EAAK,kBAEpC,GAAIA,EAAI6S,SACNhM,EAAK/E,GAAQ8Q,EAAahI,KAAKtP,GAAMA,EAAE6B,OAAS7B,EAAEmQ,kBAC7C,CACL,MAAOnQ,GAAKsX,EACZ/L,EAAK/E,GAAQxG,EAAE6B,OAAS7B,EAAEmQ,WAC3B,CACP,MAEM5E,EAAK/E,GAAQgK,EAAI3O,KAClB,IAGI0J,CAAI,EAGE,IAAAiM,GAAA,CAEb,QAAAC,CAAS9S,EAAMuB,EAAO,CAAEqC,KAAM,MAC5B,MAAMgD,EAAOmL,GAAM,CAAA,GAEnBjX,GAAO8L,EAAM2L,GAAY/Q,KAAMxB,GAAQ,0BAEvC,MAAM4P,EAAOpO,KAAKmC,WAAWtI,IAC3B,MAAM0X,EAAUR,GAAY/Q,KAAMxB,GAAQ,0BXvHzC,SAAsBgT,EAAMC,GACjC,IAAK,IAAInX,KAAOjB,OAAO+G,KAAKoR,GACrBC,EAAKjU,eAAelD,WAChBkX,EAAKlX,GAIhB,IAAK,IAAKA,EAAKoB,KAAUrC,OAAO6L,QAAQuM,GACtCD,EAAKlX,GAAOoB,CAEhB,CW8GMgW,CAAatM,EAAMmM,EAAQ,GAC1BxR,EAAKqC,MAEFiM,EAAOjJ,EAAKjD,WAAWtI,KAmBjC,SAAoB0F,EAAIf,EAAM4G,GAC5B,MAAM8E,EAAO3K,EAAGyR,IAAIxS,GAEpBnF,OAAO+G,KAAKgF,GAAMpI,SAASqD,IACzB,MAAMwP,EAAU3F,EAAK1H,QAAQ3I,GAAMA,EAAEmS,KAAK,UAAY3L,IAEtD,GAAuB,IAAnBwP,EAAQpP,OACV,OAGF,MAAM1C,EAAMqH,EAAK/E,GACXnB,EAAS2Q,EAAQ,GACjB/T,EAAOoD,EAAO8M,KAAK,QACzB,GAAuB,IAAnB6D,EAAQpP,OAAc,CACxB,IAAIkR,GAAa,EAMjB,GAJmB,UAAfzS,EAAOuP,KAA6B,UAAT3S,GAA6B,aAATA,IACjD6V,GAAa,GAGXA,EAIF,YAHIzS,EAAOxD,QAAUqC,IACnBmB,EAAOxD,MAAQqC,GAIpB,CAGD8R,EAAQ7S,SAASnD,IACf,OAAQA,EAAEmS,KAAK,SACb,IAAK,QACCnS,EAAE6B,QAAUqC,EACdlE,EAAEoX,SAAU,EAEZpX,EAAEoX,SAAU,EAEd,MACF,IAAK,WACHpX,EAAEoX,QAAUlT,EAAI3D,SAASP,EAAE6B,OAE9B,GACD,GAEN,CA9DMkW,CAAW5R,KAAMxB,GAAQ,wBAAyB4G,EAAK,IAGnDzI,EAAQqD,KAER6R,EAAYzM,EAAKM,OASvB,OARAN,EAAK1I,OAAO,CACV,MAAAgJ,GACE/I,EAAMsF,QAAQmM,GACdhJ,EAAKnD,QAAQoM,GACbwD,EAAUlW,KAAKqE,KAChB,IAGIoF,CACR,GC1MH,MAAM0M,GAAa,CACjBvU,IAAG,CAAC2B,EAAQ5E,EAAKoB,EAAOuL,KACtB/H,EAAO6S,KAAKC,MAAM1X,GAAOoB,EACzB6L,QAAQhK,IAAI2B,EAAQ5E,EAAKoB,EAAOuL,IACzB,GAET,GAAA3J,CAAI4B,EAAQ5E,EAAK2M,GACf,GAAY,WAAR3M,EACF,OAAO,EAGT,GAAIA,EAAI2X,YAAc3X,EAAI2X,WAAW,MACnC,OAAOC,iBAAiBhT,EAAO6S,MAAMI,iBAAiB7X,GAGxD,MAAM0X,MAAEA,GAAU9S,EAAO6S,KACzB,OAAItS,MAAMC,KAAKsS,GAAO5X,SAASE,GACtB0X,EAAM1X,GAGR4X,iBAAiBhT,EAAO6S,MAAMzX,EACtC,GAGH,MAAM8X,GACJ,WAAAtS,CAAYuK,GACV,MAAMxO,EAAM,CAAA,EAEZxC,OAAOoE,eAAe5B,EAAK,OAAQ,CACjCuB,YAAY,EACZE,IAAK,IAAM+M,EAAI9L,MAGjB,MAAMyT,MAAEA,GAAU3H,EAAI9L,IAMtB,OAJAkB,MAAMC,KAAKsS,GAAOhV,SAAS1C,IACzBuB,EAAIvB,GAAO0X,EAAM1X,EAAI,IAGf+P,EAAIgI,KAAO,IAAI1M,MAAM9J,EAAKiW,GACnC,EAGY,IAAAQ,GAAA,CACb,OAAIC,GACF,OAAO,IAAIH,GAASpS,KACrB,EACD,OAAIuS,CAAIC,GACN,GAAkB,UAAd/W,EAAQ+W,GAEV,YADAxS,KAAKzB,IAAIyT,MAAQQ,GAInB,IAAIR,MAAEA,GAAUhS,KAGZyS,EAAWpZ,OAAO+G,KAAKoS,GAG3B/S,MAAMC,KAAKsS,GAAOhV,SAAS/B,IACpBwX,EAASrY,SAASa,KACrB+W,EAAM/W,GAAK,GACZ,IAGH5B,OAAOC,OAAO0Y,EAAOQ,EACtB,GCjEY,SAASE,GAAElU,GACxB,GAAsB,WAAlB/C,EAAQ+C,KAAuB,OAAOkI,KAAKlI,GAAO,CACpD,MAAMD,EAAMG,SAASK,cAAcP,GAEnC,OAAOmJ,GAAKpJ,EACb,CAED,OAAOmR,GAAWlR,EACpB,CAEAnF,OAAO4L,iBAAiByN,GAAG,CAEzBC,WAAY,CACVjX,MAAO,CAAE,KCLb,MAAMkX,GAAQ,CAAA,EAEDC,GAAgB,EAAGC,WAAUvU,MAAKkK,WAAUC,YACvD,IAAIqF,EAEJ,IACE,MAAM3I,EAAO,IACR2N,GAAaD,EAAS1N,KAAM0N,EAASrE,QACrCqE,EAASE,OAGdF,EAASE,OACP3Z,OAAO+G,KAAK0S,EAASE,OAAOhW,SAASqD,IACnC,MAAM3E,EAAQ6C,EAAIuL,aAAazL,EAAWgC,IACtC3E,UACF0J,EAAK/E,GAAQ3E,EACd,IAGLqS,EAAOpG,GAAKpJ,GAEZuU,EAASlW,OAASmR,EAAKrR,OAAOoW,EAASlW,MAAO,CAAEQ,YAAY,IAE5D,IAAK,IAAK9C,EAAKoB,KAAUrC,OAAO6L,QAAQE,GACjC2I,EAAKvQ,eAAelD,KACvByT,EAAKzT,GAAOoB,GAIhB,GAAIoX,EAASrU,KAAM,CACjB,MAAMwU,EAAO1U,EAAI2U,aAAa,CAAEC,KAAM,SAEtCF,EAAKpK,UAAYJ,EAASI,UAE1BX,EAAO,CACLhJ,OAAQ+T,EACR7N,KAAM2I,EACNrF,SAEH,CAEDoK,EAASM,OAASN,EAASM,MAAMzX,KAAKoS,EACvC,CAAC,MAAO9T,GACP,MAAMI,EACJ,oBACA,CACEoU,IAAKlQ,EAAIuN,QAAQhT,eAEnBmB,EAEH,CAED,GAAI6Y,EAAShR,MAAO,CAClB,MAAMuR,EAAMha,OAAO6L,QAAQ4N,EAAShR,OAEpCiM,EAAK5L,WAAWtI,IACd,IAAK,IAAKwG,EAAMoB,KAAS4R,EAAK,CAC5B,MAAMC,EAAQjT,EAAKtH,MAAM,KAErBua,EAAM7S,QAAU,EACd6S,EAAMpS,MAAMb,GAASxG,EAAEoG,YAAYI,MACrCoB,EAAK9F,KACHoS,EACAuF,EAAMnK,KAAK9I,GAAS0N,EAAK1N,KACzB,CACEkT,SAAU1Z,IAKZA,EAAEoG,YAAYI,IAChBoB,EAAK9F,KAAKoS,EAAMA,EAAK1N,GAAO,CAC1BkT,SAAU1Z,GAIjB,KAGH,IAAK,IAAKwG,EAAMoB,KAAS4R,EAAK,CAC5B,MAAMC,EAAQjT,EAAKtH,MAAM,KACrBua,EAAM7S,QAAU,EAClBgB,EAAK9F,KACHoS,EACAuF,EAAMnK,KAAK9I,GAAS0N,EAAK1N,KACzB,CAAE,GAGJoB,EAAK9F,KAAKoS,EAAMA,EAAK1N,GAAO,CAAA,EAE/B,CACF,GAGUmT,GAAW,CAACzT,EAAO,MAC9B,MAAM+S,EAAW,CAEfrE,IAAK,GAELhQ,KAAM,GAEN2G,KAAM,CAAE,EAERxI,MAAO,CAAE,KAeNmD,IAGCsD,GAAEA,EAAEsP,WAAEA,GAAeD,GA0B3B,IAAIjK,EAAUC,EAAOrI,EAzBjBgD,IAEFhK,OAAO+G,KAAK0S,EAAS1N,MAAMpI,SAASqD,IAClC,GAAIgD,EAAG7F,eAAe6C,GACpB,MAAMhG,EAAO,cAAe,CAC1BoZ,SAAUX,EAASrE,IACnBN,WAAY,OACZ9N,QAEH,IAEHhH,OAAO+G,KAAK0S,EAASlW,OAAOI,SAASqD,IAC/BgD,EAAG7F,eAAe6C,IACpB7D,QAAQC,KACN/B,EAAW,cAAe,CACxB+Y,SAAUX,EAASrE,IACnBN,WAAY,QACZ9N,SAEFN,EAEH,KAML,IAOE,GAyJJ,SAAyB9B,GAEvB,IAAKA,EAAI7D,SAAS,KAChB,MAAMC,EAAO,mBAAoB,CAAE4D,QAIrC,GAAsB,MAAlBA,EAAIyV,OAAO,IAA6C,MAA/BzV,EAAIyV,OAAOzV,EAAIwC,OAAS,GACnD,MAAMpG,EAAO,qBAAsB,CAAE4D,QAIvC,IAAK,IAAImG,EAAI,EAAGA,EAAInG,EAAIwC,OAAS,EAAG2D,IAClC,GAAsB,MAAlBnG,EAAIyV,OAAOtP,IAAoC,MAAtBnG,EAAIyV,OAAOtP,EAAI,GAC1C,MAAM/J,EAAO,qBAAsB,CAAE4D,OAK3C,CAlLI0V,CAAgBb,EAASrE,KAEzBqE,EAAS1N,KAAO2N,GAAaD,EAAS1N,KAAM0N,EAASrE,KAErDpO,Gd3JkCpC,Ec2JLD,EAAkB8U,EAASrE,Md1J/CiF,OAAO,GAAGtV,cAAgBH,EAAI3C,MAAM,Gc4JzCsX,GAAMvS,GACR,MAAMhG,EAAO,wBAAyB,CAAEgG,SAG1CoI,EAAW/J,SAASC,cAAc,YAClC8J,EAASI,UAAYiK,EAASrU,KAC9BiK,EAAQ8D,GAAQ/D,EACjB,CAAC,MAAOxO,GACP,MAAMI,EAAO,qBAAsB,CAAEoU,IAAKqE,EAASrE,KAAOxU,EAC3D,CdtKI,IAA+BgE,EcwKpC,MAAM2V,EAAeZ,IACnB,IAAIa,EAQJ,OALEA,EADEb,aAAiBvT,MACR,IAAIuT,GAEJ3Z,OAAO+G,KAAK4S,GAGlBa,CAAQ,EAGXC,EAAYlB,GAAMvS,GAAQ,cAAc0T,YAC5C,WAAAjU,IAAeuB,GACbJ,SAASI,GAET,MAAM0M,EAAOpG,GAAK3H,MAIlB,GAFA8S,EAASkB,SAAWlB,EAASkB,QAAQrY,KAAKoS,GAEtC+E,EAASE,MAAO,CAClB,MAAMa,EAAWD,EAAYd,EAASE,OAGtCjF,EAAK5L,WAAWtI,IACdga,EAAS7W,SAAS1C,IAChB,GAAIT,EAAEoG,YAAY3F,GAAM,CACtB,MAAMyD,EAAMgQ,EAAKzT,GACX2Z,EAAW5V,EAAW/D,GACtB0T,EAAShO,KAAK8J,aAAamK,GACjC,GAAIlW,QACFiC,KAAKmL,gBAAgB8I,QAChB,GAAIjG,IAAWjQ,EAAK,CACzB,IAAI0F,EAAQ1F,EAEZ,MAAMmW,EAAUzY,EAAQsC,GAExB,GAAgB,WAAZmW,GAAwBlG,IAAWtG,OAAO3J,GAE5C,OAEF,GAAgB,WAAZmW,IAEFzQ,EAAQtK,KAAKa,UAAUyJ,GACnBA,IAAUuK,GACZ,OAIJhO,KAAKoM,aAAa6H,EAAUxQ,EAC7B,CACF,IACD,IAIJoQ,EAAS7W,SAAS1C,IAEA,OAAdyT,EAAKzT,SACSmN,IAAdsG,EAAKzT,IACLyT,EAAKzT,KAASwY,EAASE,MAAM1Y,IAE7B0F,KAAKoM,aAAa/N,EAAW/D,GAAMyT,EAAKzT,GACzC,GAEJ,CAEDuY,GAAc,CACZC,WACAvU,IAAKyB,KACLyI,WACAC,SAEH,CAED,iBAAAyL,GACMC,GAAWpU,QAIf8S,EAASuB,UAAYvB,EAASuB,SAAS1Y,KAAKgM,GAAK3H,OACjD2S,EAAW2B,eAAiB3B,EAAW2B,cAAc3M,GAAK3H,OAC3D,CAED,oBAAAuU,GACMH,GAAWpU,QAIf8S,EAAS0B,UAAY1B,EAAS0B,SAAS7Y,KAAKgM,GAAK3H,OACjD2S,EAAW8B,eAAiB9B,EAAW8B,cAAc9M,GAAK3H,OAC3D,CAED,wBAAA0U,CAAyBrU,EAAMe,EAAUuT,GACvC,MAAM5G,EAAOpG,GAAK3H,MAEb,SAAS0G,KAAKiO,IAAmC,iBAAf5G,EAAK1N,KAC1CsU,EAAWjb,OAAOib,IAGpB5G,EAAK/P,EAAkBqC,IAASsU,CACjC,CAED,6BAAWC,GACT,OAAOhB,EAAYd,EAASE,OAAS,IAAI7J,KAAKtP,GAAMwE,EAAWxE,IAChE,GAGH,GAA4B,YAAxB6E,SAASmW,WACXC,eAAeC,OAAOjC,EAASrE,IAAKqF,OAC/B,CACL,MAAMkB,EAAa,mBACnB,IAAIjS,EACJrE,SAASmQ,iBACPmG,EACCjS,EAAI,KACH+R,eAAeC,OAAOjC,EAASrE,IAAKqF,GACpCpV,SAASgQ,oBAAoBsG,EAAYjS,EAAE,EAGhD,GAIH,SAASqR,GAAW7V,GAClB,IAAIW,EAASX,EAEb,KAAOW,GAAQ,CACb,GAAIA,EAAOgR,WACT,OAAO,EAKT,GAFAhR,EAASA,EAAOyK,YAAczK,EAAO+V,MAEhC/V,GAAWA,EAAO4M,SAA8B,SAAnB5M,EAAO4M,QACvC,KAEH,CAED,OAAO,CACT,CAuBA,SAASiH,GAAalX,EAAK4S,EAAM,GAAIoC,GACnC,GAAIhV,aAAegK,KAAOhK,aAAeqI,IACvC,MAAM7J,EAAO,2BAA4B,CAAEoU,QAG7C,GAAI5S,aAAekG,SACjB,MAAM1H,EAAO,4BAA6B,CAAEoU,MAAKnU,IAAKuW,IAGxD,GAAmB,iBAARhV,GAA4B,OAARA,EAC7B,OAAOA,EAGT,MAAMqZ,EAAOzV,MAAMuG,QAAQnK,GAAO,GAAK,GAEvC,IAAK,IAAIvB,KAAOuB,EACVxC,OAAOmC,UAAUgC,eAAe7B,KAAKE,EAAKvB,KACxC,KAAKoM,KAAKpM,IAAQuB,EAAIvB,aAAgByH,SAExCmT,EAAK5a,GAAOuB,EAAIvB,GAEhB4a,EAAK5a,GAAOyY,GAAalX,EAAIvB,GAAMmU,EAAKnU,IAK9C,OAAO4a,CACT,CC5WO,MAAMC,WAAiBC,QAC5B,WAAAtV,CAAYuV,GACV,MAAMC,EAAU,aAAYD,EAAW,KAAOA,EAAW,IAEzDpU,MAAM,IAAIqU,YAEVtV,KAAKuV,MAAQF,EACbrV,KAAKwV,SAAU,EAEf,MAAMC,EAAW,IAAIL,QAAQ,IAAIE,cACjCG,EAASC,WAAa1V,KAEtB3G,OAAOoE,eAAeuC,KAAM,SAAU,CACpCtE,MAAO+Z,GAEV,CAED,IAAAE,GACM3V,KAAKwV,UAITxV,KAAK2J,WAAWC,aAAa5J,KAAK4V,OAAQ5V,MAC1CA,KAAKwV,SAAU,EAChB,CAED,aAAAzW,CAAcP,GACZ,OAAOwB,KAAK6V,WAAWrX,EAAM,OAC9B,CAED,gBAAAmB,CAAiBnB,GACf,OAAOwB,KAAK6V,WAAWrX,EACxB,CAED,UAAAqX,CAAWrX,EAAMsX,EAAW,UAC1B,MAAMC,EAAc/V,KAAK2J,WACzB,IAAKoM,EAAa,MAAO,GAEzB,MAAM/F,EAAShQ,KAAK4H,SAEpB,OAAOnI,MAAMC,KAAKqW,EAAYpW,iBAAiBnB,IAAOsX,IAAWjc,IAC/D,IAAImc,EAAMnc,EACV,OAAa,CACX,GAAImW,EAAO5V,SAAS4b,GAClB,OAAO,EAKT,GAFAA,EAAMA,EAAIrM,YAELqM,EACH,KAEH,IAEJ,CAED,YAAApM,CAAaqM,EAAQ/W,GACnB,MAAMyK,WAAEA,GAAe3J,KAEnBP,MAAMC,KAAKiK,EAAW/B,UAAUxN,SAAS8E,GAC3CyK,EAAWC,aAAaqM,EAAQ/W,GAEhCyK,EAAWC,aAAaqM,EAAQjW,KAEnC,CAED,WAAAgN,CAAYiJ,GACVjW,KAAK2J,WAAWC,aAAaqM,EAAQjW,KACtC,CAED,YAAI4H,GACF,MAAMoI,EAAS,GAEf,IAAIkG,EAAOlW,KACX,OAAa,CAGX,GAFAkW,EAAOA,EAAKC,iBAERD,EAMG,IAAIlW,KAAKoW,YACd,MAAM/b,EAAO,yBAA0B,CAAEgG,KAAM,aAE/C,KACD,CATC,GAAI6V,aAAgBnC,YAClB/D,EAAO7F,QAAQ+L,QACV,GAAIA,IAASlW,KAAK4V,OACvB,KAOL,CAED,OAAO5F,CACR,CAED,cAAIC,GACF,MAAMD,EAAS,GAEf,IAAIkG,EAAOlW,KACX,OAAa,CAGX,GAFAkW,EAAOA,EAAKC,iBAERD,EAKG,CACL,IAAKlW,KAAKoW,YACR,MAEF,MAAM/b,EAAO,yBAA0B,CAAEgG,KAAM,cAChD,CATC,GAAI6V,IAASlW,KAAK4V,OAChB,MAEF5F,EAAO7F,QAAQ+L,EAOlB,CAED,OAAOlG,CACR,CAED,aAAInH,CAAU9K,GACZiC,KAAKiQ,WAAWjT,SAASnD,IACvBA,EAAE2P,QAAQ,IAGZ,MAAM/K,EAAOC,SAASC,cAAc,YACpCF,EAAKoK,UAAY9K,EAEjB0B,MAAMC,KAAKjB,EAAKG,QAAQqR,YAAYjT,SAASnD,IAC3CmG,KAAKgN,YAAYnT,EAAE,GAEtB,CAED,aAAIgP,GACF,MAAMjB,SAAEA,GAAa5H,KACrB,IAAIpB,EAAU,GAMd,OAJAgJ,EAAS5K,SAASnD,IAChB+E,GAAW/E,EAAEwc,UAAY,IAAI,IAGxBzX,CACR,CAED,sBAAI0X,GACF,IAAIC,EAAOvW,KAAKwW,YAEhB,OAAKD,EAIDA,EAAKb,WACAa,EAAKb,aAGVa,GAAUA,aAAgBE,UAC5BF,EAAOA,EAAKD,oBAGPC,GAXE,IAYV,CAED,0BAAIG,GACF,MAAMd,OAAEA,GAAW5V,KACnB,IAAIkW,EAAON,EAAOO,gBAElB,OAAKD,EAIDA,aAAgBf,GACXe,EAGFN,EAAOc,uBAPL,IAQV,EAIH,MAAMC,GAAmBha,IAEvB,GADeA,EAAMgN,WACT,CACV,MAAM/H,EAASjF,EAAMgN,WAQrB,GAPiBlK,MAAMC,KAAK/C,EAAMiC,QAAQgJ,UACjC5K,SAASnD,IAChB+H,EAAOgI,aAAa/P,EAAG8C,EAAM,IAG/BA,EAAM6M,SAEF5H,EAAO7C,cAAc,iBAAkB,CACzC,MAAM6X,EAAUC,GAAcjV,GAE1BgV,GAEF1O,EAAO,CACL9C,KAAMwR,EAAQxR,KACdlG,OAAQ0X,EAAQ1X,OAChBwJ,MAAOkO,EAAQlO,OAGpB,CACF,GAGH,Gf/HE,iCAAiChC,KAAK/N,UAAUwB,WegIhD2N,EAAcG,aAAe,EAAG/I,aAC9B,IAAI4X,EAAW,GAEf,KACEA,EAAWrX,MAAMC,KACfR,EAAOS,iBAAiB,gCAGrBmX,EAASrW,QAIdqW,EAAS9Z,SAASyB,IAChBkY,GAAgBlY,EAAK,GAExB,MAEE,CACL,MAAMsY,UAAoBvX,oBACxB,WAAAM,GACEmB,QACAjB,KAAK2V,MACN,CAED,IAAAA,GACEgB,GAAgB3W,KACjB,CAED,iBAAAmU,GACEnU,KAAK2V,MACN,EAGHb,eAAeC,OAAO,eAAgBgC,EAAa,CACjDC,QAAS,YAEb,CCpOA,MAAMC,GAAa,CACjB7R,KAAM,CACJ1J,MAAO,KACPwb,YAAY,GAEdpV,MAAO,CACL,KAAApG,GACOsE,KAAKmX,UAIVnX,KAAKoX,cACN,GAEHxa,MAAO,CACL,YAAAwa,GACEjb,aAAa6D,KAAKqX,QAClBrX,KAAKqX,OAASjb,YAAW,KACvB,MAAMkb,EAAa,CAACtX,QAASA,KAAKuX,SAElC,IAAIC,GAAO,EAEXF,EAAWta,SAASya,IACdD,EAEFC,EAAYC,gBAIVD,EAAY/b,OAA6B,WAApB+b,EAAYhJ,KACnC+I,GAAO,EACPC,EAAYE,kBAEZF,EAAYC,eACb,IAEC1X,KAAK4X,MAAMjO,YACbhC,GAAK3H,KAAK4X,MAAMjO,YAAYhH,SAC7B,GAKA,EACJ,EACD,cAAAgV,GACE,GAAI3X,KAAKkX,WACP,OAEFlX,KAAKkX,YAAa,EAElB,MAAMja,EAAS4Z,GAAc7W,KAAK4X,OAElC,IAAK3a,EACH,OAGF,MAAMiC,OAAEA,EAAMkG,KAAEA,EAAIsD,MAAEA,GAAUzL,EAE5BS,EAAY0H,KAIhBpF,KAAK4X,MAAM/O,UAAY7I,KAAK6X,aAE5B3P,EAAO,CAAEhJ,SAAQkG,OAAMsD,UAEvB1I,KAAKgP,KAAK,WAAY,CACpBE,SAAS,IAEZ,EACD,aAAAwI,GACO1X,KAAKkX,aAIVlX,KAAKkX,YAAa,EAGlBlX,KAAK4X,OAAO3H,YAAYjT,SAASuC,GAAOuY,GAAUvY,KAClDS,KAAK4X,MAAM/O,UAAY,GAEvB7I,KAAKgP,KAAK,QAAS,CACjBE,SAAS,IAEZ,EACD,IAAAyG,GACE,GAAI3V,KAAKmX,SACP,OAGFnX,KAAKmX,UAAW,EAChB,MAAMY,EAAQ/X,KAAK4X,MAAQ,IAAIzC,GAASnV,KAAKyO,KAO7C,GANAsJ,EAAK3P,UAAYpI,KAAKzB,IAAI6J,UAC1BpI,KAAKgY,OAAOD,GACZA,EAAKpC,OACL3V,KAAKwJ,SAGY,SAAbxJ,KAAKyO,IAAgB,CACvB,MAAMwJ,EAAUjY,KAAKuX,QAAU,GAE/B,IAAIhB,EAAOwB,EACX,KACExB,EAAOA,EAAKD,mBAEPC,GAAwB,QAAhBA,EAAKzK,SAKlB,OAAQyK,EAAKzK,SACX,IAAK,SAAU,CACb,MAAMzB,EAAM1C,GAAK4O,GAQjB,OAPIlM,EAAIsL,KACNtL,EAAIsL,OAEJtL,EAAI6N,UAAY,OAGlBD,EAAOlX,KAAKsJ,EAEb,CACD,IAAK,YAAa,CAChB,MAAMA,EAAM1C,GAAK4O,GAEjBlM,EAAI8N,KAAOnY,KAEXiY,EAAOlX,KAAKsJ,GACZ,KACD,EAKN,CACF,GAEH,OAAA2J,GACEhU,KAAK6X,aAAe7X,KAAK0S,EAAE,uBAAuB0F,KAClDpY,KAAKoY,KAAO,EACb,EACD,KAAAhF,GACMpT,KAAKzB,IAAI6M,iBACXpL,KAAK2V,OAEL3V,KAAK8O,IAAI,oBAAoB,IAAM9O,KAAK2V,QAE3C,GAGHnC,GAAS,CACP/E,IAAK,UACFwI,KAGLzD,GAAS,CACP/E,IAAK,eACFwI,GACHnV,MAAO,CACL,KAAApG,GACOsE,KAAKmX,UAINnX,KAAKmY,MACPnY,KAAKmY,KAAKf,cAEb,KAIL5D,GAAS,CACP/E,IAAK,YACFwI,GACHnV,MAAO,CAAE,EACT,KAAAsR,GACMpT,KAAKkY,WACPlY,KAAK2V,MAER,IAGI,MAAMkB,GAAiB3X,IAC5B,KAAOA,IAAWA,EAAOuM,eACvBvM,EAASA,EAAOyK,WAGlB,OAAIzK,EACK,CACLA,SACAkG,KAAMlG,EAAOuM,cACb/C,MAAOxJ,EAAOqM,gBAIX,IAAI,ECxMbiI,GAAS,CACP/E,IAAK,SACLrJ,KAAM,CACJ1J,MAAO,MAEToG,MAAO,CACL,KAAApG,CAAMA,EAAO2c,GACXrY,KAAKoX,aAAaiB,GAAG9E,SACtB,GAEH3W,MAAO,CACL,YAAAwa,CAAa7D,GACX,MAAM+E,EAAYtY,KAAKtE,MAEvB,IAAKsE,KAAKmX,SACR,OAGF,MAAMnH,EAAShQ,KAAK4X,MAAMhQ,SAE1B,IAAK0Q,EAGH,OAFAtI,EAAOhT,SAASnD,GAAMie,GAAUje,UAChCmG,KAAK4X,MAAM/O,UAAY,IAIzB,KAAMyP,aAAqB7Y,OAYzB,OAXAjD,QAAQC,KACNpC,EAAO,YAAa,CAClByB,KAAML,EAAQ6c,WAIlBtI,GACEA,EAAOhT,SAASuC,IACduY,GAAUvY,GACVA,EAAGiK,QAAQ,KAKjB,MAAMoN,EAAUC,GAAc7W,KAAK4X,OAEnC,IAAKhB,EACH,OAGF,MAAMxR,KAAEA,EAAIsD,MAAEA,GAAUkO,EAElB2B,EAAa7P,EAAM1I,KAAKwY,OAExB3H,EAAU7Q,KAAKgM,KAAK,aAAe,MAEzC,GAAKgE,EAAOvP,OAgBL,CACL,GAAI8S,EAAU,CAGZ,IAFmBA,EAASrS,MAAMrH,GAAMA,EAAEqG,KAAKO,QAAU,IAIvD,MAEH,CAED,MAAMgY,EAAOH,EAAUhd,QACjBod,EAAW,IAAI7S,IACnB4S,EAAKtP,KAAKtP,IACR,IAAKA,EACH,OAGF,MAAMkE,EAAMlE,EAAEgX,GACd,YAAepJ,IAAR1J,EAAoBlE,EAAIkE,CAAG,MAIhC4L,WAAEA,GAAe3J,KAAK4X,MAE5B,GAAgB,QAAZ/G,GAAqB4H,EAAKhY,SAAWiY,EAASC,KAAM,CACtD,MAAMpc,EAAMlC,EAAO,uBACnBmC,QAAQvC,MAAMsC,GACdC,QAAQC,KAAKF,EAAK,CAChBoN,aACAsL,KAAMtN,GAAKgC,IAAasL,MAAM1W,KAEjC,CAID,MAAMqa,EAAe,GACrB,IAAK,IAAIxU,EAAI,EAAGwC,EAAMoJ,EAAOvP,OAAQ2D,EAAIwC,EAAKxC,IAAK,CACjD,MAAMvK,EAAImW,EAAO5L,GACX9J,EAAMT,EAAEgf,WAAahf,EAEtB6e,EAASI,IAAIxe,GAQhBse,EAAa7X,KAAKzG,IANlBwd,GAAUje,GACVA,EAAE2P,SACFwG,EAAO3Q,OAAO+E,EAAG,GACjBwC,IACAxC,IAIH,CAED,IAAIlF,EAASc,KAAK4X,MAAMhC,OAExB,MAAMmD,EAAc,GAEpB,IAAI1J,EAAQ,EAEZ,KAAOnQ,GAAQ,CACb,GAAIA,IAAWc,KAAK4X,MAAO,CACrBa,EAAKhY,QAEPgY,EAAKzb,SAASyF,IACZ,MAAMsL,EAAOiL,GACXvW,EACAiG,EACA6P,EACAnT,EAAK6T,OAAS7T,EACdiK,EACAwB,GAGFxB,IAGA1F,EAAWC,aAAamE,EAAKxP,IAAKW,EAAO,IAG7C,KACD,CACD,KAAMA,aAAkBuX,SAAU,CAChCvX,EAASA,EAAOsX,YAChB,QACD,CACD,MAAM0C,EAAaT,EAAK3X,QAClBqY,EAAQD,aAAsB7f,OAE9BoJ,EADOkF,GAAKzI,GACAka,OAElB,QAAmB3R,IAAfyR,IAA6BT,EAAKhY,OAAQ,CAE5CsY,EAAYhY,KAAK7B,GACjBA,EAASA,EAAOsX,YAChB,QACD,CAED,MAAM6C,EAAQT,EAAaxZ,QACzB+Z,EAAQD,EAAWrI,GAAWqI,GAEhC,GAAIG,GAAS,EAAG,CAEd,MAAMhV,EAAU2L,EAAOqJ,IAErBF,EACID,EAAWrI,KAAapO,EAAK6W,MAAMzI,GACnCqI,IAAezW,EAAK6W,SAGxBjV,EAAQ6L,WAAa,EAErBvG,EAAWC,aAAavF,EAASnF,UAC1BmF,EAAQ6L,WACfhR,EAASmF,GAIX,MAAMkV,EAAO5R,GAAKtD,GACdkV,EAAKH,OAAOE,QAAUJ,IACxBK,EAAKH,OAAOE,MAAQJ,GAEtBK,EAAKH,OAAOI,OAASnK,CACjC,KAAiB,CAEL,MAAMtB,EAAOiL,GACXE,EACAxQ,EACA6P,EACAnT,EAAK6T,OAAS7T,EACdiK,EACAwB,GAIFlH,EAAWC,aAAamE,EAAKxP,IAAKW,GAClCA,EAAS6O,EAAKxP,GACf,CAED8Q,IACAnQ,EAASA,EAAOsX,WACjB,CAEGuC,EAAYtY,QACdsY,EAAY/b,SAASnD,IACnBie,GAAUje,GACVA,EAAE2P,QAAQ,GAGf,KAnKmB,CAClB,MAAMgG,EAAO9Q,SAAS+Q,yBAEtB6I,EAAUtb,SAAQ,CAACnD,EAAGuK,KACpB,MAAM2J,EAAOiL,GACXnf,EACA6O,EACA6P,EACAnT,EAAK6T,OAAS7T,EACdhB,EACAyM,GAEFrB,EAAKxC,YAAYe,EAAKxP,IAAI,IAG5ByB,KAAK4X,MAAM5K,YAAYwC,EAC/B,CAqJUxP,KAAK4X,MAAMjO,YACbhC,GAAK3H,KAAK4X,MAAMjO,YAAYhH,UAG9B3C,KAAKgP,KAAK,WAAY,CACpBE,SAAS,GAEZ,EACD,IAAAyG,GACE,GAAI3V,KAAKmX,SACP,OAGFnX,KAAKmX,UAAW,EAChB,MAAMY,EAAQ/X,KAAK4X,MAAQ,IAAIzC,GAAS,UAGxC4C,EAAK3P,UAAYpI,KAAKzB,IAAI6J,UAE1BpI,KAAKgY,OAAOD,GACZA,EAAKpC,OACL3V,KAAKwJ,SAELxJ,KAAKoX,cACN,GAEH,KAAAhE,GAGE,GAFApT,KAAKwY,MAAQxY,KAAKgM,KAAK,SAElBhM,KAAKwY,MAAO,CACf,MAAMjc,EAAMlC,EAAO,sBAAuB,CAAEgG,KAAML,KAAKwY,QAEvD,MADAhc,QAAQC,KAAKF,EAAKyD,KAAKzB,KACjBhC,CACP,CAEGyD,KAAKzB,IAAI6M,iBACXpL,KAAK2V,OAEL3V,KAAK8O,IAAI,oBAAoB,IAAM9O,KAAK2V,QAE3C,IAGI,MAAMqD,GAAa,CAACM,EAAO5Q,EAAO6P,EAAYU,EAAOO,EAAQ3I,KAClE,MAAM9C,EAAO2B,GAAW6I,EAAW1P,WAE7B4Q,EAAW,IAAIvT,EAAM,CACzBoT,QAEAL,QACAO,WAIFngB,OAAO4L,iBAAiBwU,EAAU,CAChC1L,KAAM,CACJzQ,IAAG,IACMyQ,KAKb7F,EAAO,CACLhJ,OAAQ6O,EAAKxP,IACb6G,KAAMqU,EACN/Q,QAEAC,cAAc,IAGhB,MAAMK,EAAU+E,EAAKxP,IAAI6J,UAEnB1C,EAAS,KACb1G,EAAiBgK,EAAStD,GAC1B+T,EAAS/T,QAAQ,EAQnB,OALAsD,EAAQjI,KAAK2E,GAEbqI,EAAKqL,OAASK,EACd1L,EAAKxP,IAAIsa,UAAYS,IAAQzI,IAAYyI,EAElCvL,CAAI,GCvSP9I,iBAAEA,IAAqB5L,OAEvBqgB,GAAmB,OAAOte,KAAKC,WAE/Bsa,GAAO,EAAGhZ,QAAO4B,MAAKkH,gBAC1B,MAAMkU,EAAQ,CACZhY,MAAO,CACL,GAAArE,GACE,MAAMqM,WAAEA,GAAepL,GACjBqG,OAAEA,GAAWjI,EACbsC,EAAM0K,EAAa,CAAChC,GAAKgC,MAAgB/E,GAAU,IAAIA,GAC7D,OAAO,IAAIiB,IAAI5G,EAChB,GAEHV,IAAK,CACHjB,IAAK,IAAMiB,IAITkQ,EAAMlQ,EAAIuN,SAAWvN,EAAIuN,QAAQhT,cAEnC2V,IACFkL,EAAMlL,IAAM,CACVrR,YAAY,EACZ1B,MAAO+S,IAIXxJ,GAAiBtI,EAAOgd,GPuBC,CAAC5L,IAC1B,MAAMU,IAAEA,GAAQV,EAEhB,GAAK4C,GAAamI,IAAIrK,GAMtB,OAFAgC,GAAQ,CAAC,OAAQ,OAAQ,YAAa1C,GAE9BU,GACN,IAAK,QACHqC,GAAU/C,GACV,MACF,IAAK,WACH0C,GAAQ,CAAC,SAAU1C,GACnB6C,GAAS7C,EAAM,CAAE1N,KAAM,QAASvE,KAAM,UACtC,MACF,IAAK,SACH2U,GAAQ,CAAC,WAAY,SAAU1C,GAC/B,MACF,IAAK,SACH,CACE,MAAMxP,IAAEA,GAAQwP,EAChBA,EAAKlJ,WAAa,EAClBkJ,EAAKrS,MAAQ6C,EAAI7C,aACVqS,EAAKlJ,WAEZkJ,EAAKjM,OAAM,KACTvD,EAAI7C,MAAQqS,EAAKrS,KAAK,IAExBqS,EAAKa,GAAG,UAAU,KAChBb,EAAKrS,MAAQ6C,EAAI7C,KAAK,GAEzB,EAEJ,EOxDDke,CAAYnU,EAAU,EAGT,MAAMoU,WAAcvJ,GACjC,WAAAxQ,EAAYvB,IAAEA,IACZ0C,QAEA,MAAMwE,EAAY3F,EAAYnE,KAAKqE,KAAM,CAAA,EAAIqF,GAU7C,OARAsQ,GAAK,CACHhZ,MAAOqD,KACPzB,MACAkH,cAGFlH,EAAIub,UAAYrU,EAETA,CACR,CAED,UAAIhF,GACF,OAAOT,KAAKzB,KAAOyB,KAAKzB,IAAIqJ,SAASnH,MACtC,CAED,CAAAiS,CAAElU,GACA,IAAID,IAAEA,GAAQyB,KACVzB,aAAeiB,sBACjBjB,EAAMA,EAAIK,SAGZ,MAAMM,EAASX,EAAIQ,cAAcP,GACjC,OAAOU,EAASyI,GAAKzI,GAAU,IAChC,CAED,GAAA8R,CAAIxS,GACF,OAAOc,EAAUU,KAAKzB,IAAKC,GAAM2K,IAAIxB,GACtC,CAED,MAAAjL,CAAOb,EAAKpB,GACV,OAAOiC,EAAOsD,KAAMnE,EAAKpB,EAC1B,CAED,QAAIsf,GACF,OAAO/Z,KAAKzB,IAAIyL,WACjB,CAED,QAAI+P,CAAKhc,GACPiC,KAAKzB,IAAIyL,YAAcjM,CACxB,CAED,QAAIqa,GACF,OAAOpY,KAAKzB,IAAIsK,SACjB,CAED,QAAIuP,CAAKra,GACPiC,KAAKzB,IAAIsK,UAAY9K,CACtB,CAED,aAAIwP,GACF,OAAOvN,KAAKzB,IAAIgP,SACjB,CAED,QAAInI,GACF,OAAOpF,KAAKzB,IAAIyb,OACjB,CAED,UAAIC,GACF,OAAOtS,GAAK3H,KAAKzB,IAAI2b,WACtB,CAED,QAAIjH,GACF,MAAMkH,EAAWna,KAAKzB,IAAI6b,cAC1B,OAAOD,EAAWxS,GAAKwS,GAAY,IACpC,CACD,QAAIlF,GACF,IAAIhC,EAAOjT,KAAKzB,IAAI6b,eAChBnF,KAAEA,GAAShC,EACf,OAAOgC,aAAgBoF,KAAO1S,GAAKsN,GAAQ,IAC5C,CAED,UAAIrT,GACF,IAAI+H,WAAEA,GAAe3J,KAAKzB,IAC1B,OAAQoL,GAAcA,IAAejL,SAAkBiJ,GAAKgC,GAAZ,IACjD,CAED,WAAI2Q,GACF,MAAMA,EAAU,GAChB,IAAIpb,EAASc,KACb,KAAOd,EAAO0C,QACZ1C,EAASA,EAAO0C,OAChB0Y,EAAQvZ,KAAK7B,GAEf,OAAOob,CACR,CAED,YAAAC,CAAa/b,GACX,MAAMgc,EAAaxa,KAAKsa,QAClBA,EAAU,GAEVG,EAA4B,iBAATjc,EAEzB,KAAOgc,EAAW/Z,QAAQ,CACxB,MAAMvB,EAASsb,EAAW1Z,QAE1B,GAAI2Z,GACF,GAAIvb,IAAWV,GAAQU,EAAOX,MAAQC,EACpC,WAEG,GAAIF,EAASY,EAAOX,IAAKC,GAC9B,MAGF8b,EAAQvZ,KAAK7B,EACd,CAED,OAAOob,CACR,CAED,SAAII,GACF,MAAMA,EAAQ,GACd,IAAIxb,EAASc,KACb,KAAOd,EAAO+V,MACZ/V,EAASA,EAAO+V,KAChByF,EAAM3Z,KAAK7B,GAEb,OAAOwb,CACR,CAED,YAAAC,GACE,IAAIC,EAAQ,GAQZ,OAPA5a,KAAK8O,IAAI4K,IAAmB7f,IAC1B+gB,EAAQ/gB,EAAE8gB,eACV9gB,EAAEghB,iBAAiB,IAErB7a,KAAKgP,KAAK0K,GAAkB,CAC1BoB,UAAU,IAELF,CACR,CAED,QAAIrE,GACF,MAAMwE,EAAU/a,KAAKzB,IAAI+X,mBACzB,OAAOyE,EAAUpT,GAAKoT,GAAW,IAClC,CAED,KAAAC,CAAMjd,GACJ,MAAQwY,KAAM0E,GAAWjb,KAErBib,EACFA,EAAOjD,OAAOja,GAEdiC,KAAK4B,OAAOb,KAAKhD,EAEpB,CAED,SAAImd,GACF,MAAMtZ,OAAEA,GAAW5B,KACbmb,EAAYnb,KAAKb,MACvB,OAAOyC,EAAOY,QAAO,CAAC3I,EAAGuK,IAAMA,EAAI+W,GACpC,CAED,QAAIjF,GACF,MAAMkF,EAAUpb,KAAKzB,IAAImY,uBACzB,OAAO0E,EAAUzT,GAAKyT,GAAW,IAClC,CAED,MAAApD,CAAOja,GACL,MAAMsM,EAAMqF,GAAW3R,GACvBiC,KAAK4B,OAAOrD,IAAIqL,aAAaS,EAAI9L,IAAKyB,KAAKzB,IAC5C,CAED,SAAI8c,GACF,MAAMzZ,OAAEA,GAAW5B,KACbmb,EAAYnb,KAAKb,MACvB,OAAOyC,EAAOY,QAAO,CAAC3I,EAAGuK,IAAMA,EAAI+W,GACpC,CAED,YAAIG,GACF,OAAOtb,KAAK4B,OAAOY,QAAQ3I,GAAMA,IAAMmG,MACxC,CAED,SAAIb,GACF,IAAIwK,WAAEA,GAAe3J,KAAKzB,IAE1B,OAAKoL,EAIElK,MAAMjE,UAAU4D,QAAQzD,KAAKgO,EAAW/B,SAAU5H,KAAKzB,KAHrD,IAIV,CAED,SAAIyT,GACF,OAAOhS,KAAKzB,IAAIyT,KACjB,CAED,SAAIuJ,GACF,OAAO5U,SAASuL,iBAAiBlS,KAAKzB,KAAKgd,QAAU,CACtD,CAED,UAAIC,GACF,OAAO7U,SAASuL,iBAAiBlS,KAAKzB,KAAKid,SAAW,CACvD,CAED,eAAIC,GACF,OAAOzb,KAAKzB,IAAIkd,WACjB,CAED,gBAAIC,GACF,OAAO1b,KAAKzB,IAAImd,YACjB,CAED,eAAIC,GACF,OAAO3b,KAAKzB,IAAIod,WACjB,CAED,gBAAIC,GACF,OAAO5b,KAAKzB,IAAIqd,YACjB,CAED,cAAIC,GACF,IAAIC,EAAgB5J,iBAAiBlS,KAAKzB,KAC1C,OACEyB,KAAKzB,IAAIod,YACThV,SAASmV,EAAc,gBACvBnV,SAASmV,EAAc,gBAE1B,CAED,eAAIC,GACF,IAAID,EAAgB5J,iBAAiBlS,KAAKzB,KAC1C,OACEyB,KAAKzB,IAAIqd,aACTjV,SAASmV,EAAc,eACvBnV,SAASmV,EAAc,iBAE1B,CAED,EAAAtL,CAAGhS,GACD,OAAOF,EAAS0B,KAAKzB,IAAKC,EAC3B,CAED,MAAAgL,GACE,MAAM5H,OAAEA,GAAW5B,KACf4B,GACFA,EAAOvC,OAAOuC,EAAOxC,QAAQY,MAAO,EAGvC,CAED,KAAAgc,CAAMC,GAAO,GACX,OAAOtU,GAAK3H,KAAKzB,IAAIO,UAAUmd,GAChC,CAED,IAAAC,CAAKtd,GACH,MAAMyL,EAAMqF,GAAW9Q,IAEjBL,IAAEA,GAAQyB,KAEhB,IAAKzB,EAAIoL,WACP,MAAMtP,EAAO,wBAWf,OARAkE,EAAIoL,WAAWC,aAAaS,EAAI9L,IAAKA,GAErCA,EAAI2R,WAAa,EAEjB7F,EAAI9L,IAAIyO,YAAYzO,UAEbA,EAAI2R,WAEJlQ,IACR,CAED,MAAAmc,GACE,MAAM5d,IAAEA,GAAQyB,KAEVd,EAASX,EAAIoL,WAEnB,GAAIzK,EAAO0I,SAASnH,OAAS,EAC3B,MAAMpG,EAAO,6BAWf,OARAkE,EAAI2R,WAAa,EAEjBhR,EAAOyK,WAAWC,aAAarL,EAAKW,GAEpCA,EAAOsK,gBAEAjL,EAAI2R,WAEJlQ,IACR,EAGH,MAAMoc,GAAMlW,EAAM1K,UACZ6H,GAAKwW,GAAMre,UAEjB6H,GAAG3G,OACD,CACEY,IAAK8e,GAAI9e,IACTC,IAAK6e,GAAI7e,IACT+I,OAAQ8V,GAAI9V,OACZ3L,SAAUyhB,GAAIzhB,YACXkH,KACA8M,MACA0N,MACApO,MACAoD,IAEL,CACEjU,YAAY,IAIhBiG,GAAG3G,OAAO4V,ICpWH,MAAM3K,GAAQpJ,GACdA,EAEDA,EAAIub,UACCvb,EAAIub,UAGN,IAAID,GAAM,CAAEtb,QANF,KAyBbE,GAAOC,SAASC,cAAc,YAUvB+Q,GAAa,CAAClR,EAAM8d,KAC/B,GAAI9d,aAAgBqb,GAClB,OAAOrb,EAGT,GAAIA,aAAgB6b,MAAQ7b,IAAS+d,OACnC,OAAO5U,GAAKnJ,GAKd,OAFa/C,EAAQ+C,IAGnB,IAAK,SACH,MAvCmB,CAAC3C,IACxB,MAAMuJ,EAAO,IAAKvJ,GAElB,IAAKA,EAAI4S,IACP,OAAO,KAGT,MAAMlQ,EAAMG,SAASC,cAAc9C,EAAI4S,YAChCrJ,EAAKqJ,IACZ,MAAMV,EAAOpG,GAAKpJ,GAIlB,OAFAlF,OAAOC,OAAOyU,EAAM3I,GAEb2I,CAAI,EA0BAyO,CAAUhe,GACnB,IAAK,SACH,MAvBmB,CAACP,IACxBQ,GAAKoK,UAAY5K,EACjB,MAAMM,EAAME,GAAKG,QAAQgJ,SAAS,IAAMnJ,GAAKG,QAAQqR,WAAW,GAGhE,OAFAxR,GAAKoK,UAAY,GAEVlB,GAAKpJ,EAAI,EAkBLke,CAAUje,GACpB,EAGUsZ,GAAa5Y,IACpBA,EAAOkJ,WACT3I,MAAMC,KAAKR,EAAOkJ,WAAWpL,SAAS+F,GAAMA,GAAKA,MAEnD7D,EAAO+Q,YACLxQ,MAAMC,KAAKR,EAAO+Q,YAAYjT,SAASuC,IACrCuY,GAAUvY,EAAG,IAGjB,MAAMyJ,EAAU9J,GAAQgb,YAAY9R,UAEhCY,GACF,IAAIA,GAAShM,SAAS+F,GAAMA,KAC7B,EC6GH,SAAS2Z,GAAcC,EAAUC,EAAMC,EAAWpa,GAGhD,IAAIqa,EAFaH,EAAS1H,KAAKhC,KAEVP,EAAE,iBAAiBkK,OAExC,GAAIE,EAGF,OAFAA,EAAMve,IAAIwe,QAAQtP,IAAIhL,QACtBA,EAAKua,YAAcF,GAIrBA,EAAQD,IAERC,EAAM9Q,KAAK,cAAe4Q,GAE1BE,EAAMve,IAAIwe,QAAU,IAAIlX,IAAI,CAACpD,IAC7BA,EAAKua,YAAcF,EAEnB,MAAM7J,KAAEA,GAAS0J,EAAS1H,KACtBhC,EAAK1U,MAAQG,SACfA,SAASue,KAAKjQ,YAAY8P,EAAMve,KAEhC0U,EAAKA,KAAKlS,KAAK+b,EAEnB,CAEA,SAASI,GAAWza,GAClB,GAAIA,EAAK0a,UAAY1a,EAAKua,YAAa,CACrC,MAAM1N,EAAQ7M,EAAKua,YAAYze,IAAIwe,QACnCzN,EAAMpN,OAAOO,GAER6M,EAAMqJ,MACTlW,EAAKua,YAAYxT,gBAGZ/G,EAAK0a,QACb,CACH,CC/MA9jB,OAAOC,OAAOoZ,GAAG,CACfnC,SACArK,QACAgC,SACAsE,WACAgH,YACAvX,WACAoH,GAAIwW,GAAMre,UACVwV,IAAMxS,GAASc,EAAUZ,SAAUF,GAAM2K,IAAIxB,IAC7C6H,KAAM,IAAMkD,GAAEhU,SAAS+Q,4BDfzBiD,GAAEc,SAAS,CACT/E,IAAK,cACLhQ,KAAM,gBACN2G,KAAM,CAAE,EACRxI,MAAO,CACL,IAAA+Y,GACO3V,KAAKzB,IAAI6X,aAIdpW,KAAKhD,SAASnD,GAAMmG,KAAKod,MAAMvjB,IAChC,EAED,KAAAujB,CAAMvjB,GACJ,IAAIA,EAAE0E,IAAI4e,SAIV,OAAQtjB,EAAE4U,KACR,IAAK,OACHzO,KAAKqd,UAAUxjB,GACf,MACF,IAAK,QACHmG,KAAKsd,WAAWzjB,GAChB,MACF,IAAK,OACL,IAAK,YACL,IAAK,SACL,IAAK,SAEH,MACF,QACE,MAAM0C,EAAMlC,EAAO,2BACnBmC,QAAQC,KAAKF,EAAK1C,GAEvB,EAED,SAAAwjB,CAAUxjB,GACR,MAAM0jB,EAAO1jB,EAAEmS,KAAK,QAEdwR,EAAM3jB,EAAEmS,KAAK,OAEnB,GAAY,eAARwR,GAAgC,SAARA,EAC1B,MAAMnjB,EAAO,mBAGf,IAAIkE,IAAEA,GAAQ1E,EAEF,SAAR2jB,IACF3jB,EAAEmS,KAAK,MAAO,QAEdnS,EAAEmS,KAAK,OAAQuR,IAGjBhf,EAAI4e,UAAW,EAEf5e,EAAIuH,QAAU,KACZoX,GAAW3e,GACXA,EAAIuH,QAAU,IAAI,EAGpB4W,GACE1c,KACAud,GACA,KACE,MAAME,EAAQ5jB,EAAEmiB,QAEhB,OADAyB,EAAMzR,KAAK,MAAO,cACXyR,CAAK,GAEdlf,EAEH,EACD,gBAAM+e,CAAWzjB,GACf,GAAI,cAAc6M,KAAK7M,EAAEue,MAAO,CAC9B,MAAM7b,EAAMlC,EAAO,mBAEnB,MADAmC,QAAQC,KAAKF,EAAK1C,EAAE0E,KACdhC,CACP,CAGD,MAAMmhB,EAAM,IAAItI,QAAQvb,EAAEue,MAC1BsF,EAAIP,UAAW,EAEfO,EAAI5X,QAAU,KACZoX,GAAWrjB,EAAE0E,YACNmf,EAAIP,gBACJtjB,EAAE0E,IAAI4e,SACbO,EAAI5X,QAAU,KACdjM,EAAE0E,IAAIuH,QAAU,IAAI,EAGtBjM,EAAEue,KAAO,GACTve,EAAEkH,KAAK2c,GACP7jB,EAAE0E,IAAI4e,UAAW,EACjBtjB,EAAE0E,IAAIuH,QAAU4X,EAAI5X,QAKpB4W,GAAc1c,KAiEpB,SAAuB/B,GACrB,IAAI0f,EAAO,EACP/W,EAAM3I,EAAIwC,OACd,IAAK,IAAI2D,EAAI,EAAGA,EAAIwC,EAAKxC,IAAK,CAE5BuZ,GAASA,GAAQ,GAAKA,EADL1f,EAAI2f,WAAWxZ,GAEhCuZ,EAAQA,GAAQ,GAAOA,IAAS,GAChCA,EAAc,EAAPA,EAAkB,EAAPA,CACnB,CACD,OAAOA,EAAKhjB,SAAS,IAAM,KAAOiM,CACpC,CA7EmBiX,CAAcH,EAAItY,OAEL,IAAMsN,GAAE,UAAUgL,EAAItY,iBAAiBvL,EAAE0E,IACpE,GAEH,QAAA8V,IACoBrU,KAAK8d,KAAO,IAAIC,kBAAkBC,IAClD,IAAK,IAAIC,KAAYD,EACnB,GAAsB,eAAlBC,EAASniB,KAAuB,CAClC,GAA+B,gBAA3BmiB,EAASC,cAEX,SAIF,MAAMhf,OAAEA,GAAW+e,EAEf/e,EAAOie,WACTje,EAAO4G,UACP9F,KAAKod,MAAMzV,GAAKzI,IAE5B,KAAqC,cAAlB+e,EAASniB,OAClBmiB,EAASE,aAAanhB,SAASnD,IACzBA,EAAEsjB,UACJtjB,EAAEiM,SACH,IAGHmY,EAASG,WAAWphB,SAASnD,IAC3B,IAAKA,EAAEsjB,SAAU,CAQf,GAPItjB,aAAawkB,MACiB,UAA5BxkB,EAAEykB,cAAcxS,SAElB9L,KAAK2V,KAAK9b,EAAE8P,YAIZ9P,EAAEsjB,SAEJ,OAGF,GAAItjB,aAAawkB,MAAQxkB,aAAaub,QAEpC,OAGFpV,KAAKod,MAAMzV,GAAK9N,GACjB,KAGN,KAKM0kB,QAAQve,KAAKzB,IAFP,CAAEwN,YAAY,EAAMyS,WAAW,EAAMC,SAAS,IAI7Dze,KAAK2V,MACN,EACD,QAAAnB,GACExU,KAAKhD,SAASnD,GAAMqjB,GAAWrjB,EAAE0E,OAEjCyB,KAAK8d,KAAKY,YACX,IEnKY,MAAMC,GACnB,WAAA7e,GACEE,KAAK4e,aAAe,IAAI1a,GACzB,CAED,GAAA2a,CAAIC,GACF,MAAMC,EARW3jB,KAAKC,SAASV,SAAS,IAAIW,MAAM,GAUlD,OADA0E,KAAK4e,aAAarhB,IAAIwhB,EAAKD,GACpBC,CACR,CAED,KAAAC,CAAMD,GACJ,OAAO/e,KAAK4e,aAAa1c,OAAO6c,EACjC,CAED,SAAME,CAAIC,GACR,IAAI/f,GAAS,EAEb,MAAMggB,EAAc1f,MAAMC,KAAKM,KAAK4e,aAAaQ,UAE3C7I,EAAO8I,UACXlgB,IACIA,EAAQggB,EAAY1e,cAChB0e,EAAYhgB,GAAO+f,EAAS3I,EACnC,QAGGA,GACP,EC3BH,MAAM+I,GAAcC,GAAQ,SAAS7Y,KAAK6Y,IAAQ,SAAS7Y,KAAK6Y,GAEnDC,GAAS,IAAItb,IACbub,GAAYJ,MAAOE,EAAKG,KACnC,IAAIC,EAAQJ,EAEZ,IAAKD,GAAWC,GAAM,CACpB,MAAM/M,EAAI,IAAIoN,IAAIL,GAClBI,EAAQD,EAAOtlB,SAAS,WAAamlB,EAAM,GAAG/M,EAAEqN,SAASrN,EAAEsN,UAC5D,CAED,IAAIC,EAAWP,GAAOliB,IAAIqiB,GAErBI,IACHA,EAAWpmB,MAAMgmB,GACjBH,GAAOjiB,IAAIoiB,EAAOI,IAKpB,aAFmBA,GAEP/D,OAAO,EAGRgE,GAAY,CAAA,EAEnBC,GAAa,CAAC5f,EAAMgF,MACZ2a,GAAU3f,KAAU2f,GAAU3f,GAAQ,IAAIse,KAClDE,IAAIxZ,EAAQ,EAGLwZ,GAAM,CAACxe,EAAMgF,KACpBhF,aAAgB0B,WAClBsD,EAAUhF,EACVA,EAAO,CAAC,KAAM,QAGZA,aAAgBZ,MAClBY,EAAKrD,SAASqD,IACZ4f,GAAW5f,EAAMgF,EAAQ,IAK7B4a,GAAW5f,EAAMgF,EAAQ,EAG3BwZ,GAAI,CAAC,MAAO,OAAOQ,MAAOa,EAAK3J,KAC7B,IAAK2J,EAAIjjB,OAAQ,CACf,MAAMsiB,IAAEA,EAAGG,OAAEA,GAAWQ,EAClB1N,EAAI,IAAIoN,IAAIL,GAEZY,EAAUb,GAAWC,GAC3B,IACMY,GAAWT,EAAOtlB,SAAS,WAC7B8lB,EAAIjjB,aAAemjB,OAAOb,GAE1BW,EAAIjjB,aAAemjB,OAAO,GAAG5N,EAAEqN,SAASrN,EAAEsN,WAE7C,CAAC,MAAO7lB,GACP,MAAMsC,EAAMlC,EACV,cACA,CACEklB,IAAKW,EAAIG,SAAWd,GAEtBtlB,GAOF,MAJIkmB,GACF3jB,QAAQC,KAAKF,EAAK2jB,GAGd3jB,CACP,CACF,OAEKga,GAAM,IAGdsI,GAAI,CAAC,MAAO,OAAQ,QAAQQ,MAAOa,EAAK3J,KACtC,IAAK2J,EAAIjjB,OAAQ,CACf,MAAMsiB,IAAEA,EAAGG,OAAEA,GAAWQ,EAExB,IAAII,EACJ,IACEA,QAAab,GAAUF,EAAKG,EAC7B,CAAC,MAAOzlB,GACP,MAAMI,EAAO,YAAa,CAAEklB,OAAOtlB,EACpC,CAED,IAAK,UAAUyM,KAAK4Z,EAAKC,QACvB,MAAMlmB,EAAO,mBAAoB,CAC/BklB,MACAgB,OAAQD,EAAKC,SAIjBL,EAAIjjB,aAAeqjB,EAAKvG,MACzB,OAEKxD,GAAM,IAGdsI,GAAI,QAAQQ,MAAOa,EAAK3J,KACtB,IAAK2J,EAAIjjB,OAAQ,CACf,MAAMsiB,IAAEA,EAAGG,OAAEA,GAAWQ,EAExBA,EAAIjjB,aAAewiB,GAAUF,EAAKG,GAAQ9lB,MAAMC,GAAMA,EAAEC,QACzD,OAEKyc,GAAM,IAGdsI,GAAI,QAAQQ,MAAOa,EAAK3J,KACtB,IAAK2J,EAAIjjB,OAAQ,CACf,MAAMsiB,IAAEA,EAAGG,OAAEA,GAAWQ,EAElB9a,QAAaqa,GAAUF,EAAKG,GAAQ9lB,MAAMC,GAAMA,EAAE2mB,gBAElDC,QAAeC,YAAYC,QAAQvb,GACnCwb,EAAW,IAAIF,YAAYG,SAASJ,GAE1CP,EAAIjjB,OAAS2jB,EAASE,OACvB,OAEKvK,GAAM,IAGdsI,GAAI,OAAOQ,MAAOa,EAAK3J,KACrB,IAAK2J,EAAIjjB,OAAQ,CACf,MAAMsiB,IAAEA,EAAG7T,QAAEA,EAAOgU,OAAEA,GAAWQ,EAEjC,GAAIxU,EAAS,CACX,MAAMqV,EAAOriB,SAASC,cAAc,QACpCoiB,EAAKvD,IAAM,aACXuD,EAAKxD,KAAOgC,EAEZ,MAAMtM,EAAOvH,EAAQ0O,cAQrB,IAAIrX,EANAkQ,IAASvU,SACXuU,EAAKgK,KAAKpe,OAAOkiB,GAEjB9N,EAAKjG,YAAY+T,GAInBrV,EAAQmD,iBACN,eACC9L,EAAKlJ,IACJknB,EAAKvX,SACLkC,EAAQgD,oBAAoB,eAAgB3L,EAAE,EAGxD,MACMmd,EAAIjjB,aAAewiB,GAAUF,EAAKG,GAAQ9lB,MAAMC,GAAMA,EAAEkgB,QAE3D,OAEKxD,GAAM,IC9JP,MAAMyK,GAAW,CAAA,EAgCjB,MAAM9gB,GAAO,CAAC+gB,EAAYC,KAC/B,GAAID,EAAWhP,WAAW,YAAcgP,EAAWhP,WAAW,YAC5D,OAAOgP,EAGT,MAAO1B,KAAQG,GAAUuB,EAAWloB,MAAM,KAE1C,IAAIooB,EAAU5B,EAEd,GAAI,KAAK7Y,KAAK6Y,GAAM,CAClB,MAAO6B,KAAU/f,GAAQke,EAAIxmB,MAAM,KAEnC,IAAIioB,GAASI,GAGX,MAAM/mB,EAAO,WAAY,CACvBgG,KAAM+gB,EACN7B,IAAK0B,IAJPE,EAAU,CAACH,GAASI,GAAOvmB,QAAQ,MAAO,OAAQwG,GAAMwF,KAAK,IAOhE,CAED,GAAwB,oBAAbwa,SAA0B,CACnC,MAAMC,EAAOJ,EAAU,IAAItB,IAAIsB,EAASG,SAAS9D,MAAQ8D,SAAS9D,KAIlE4D,EAFkB,IAAIvB,IAAIuB,EAASG,GAEf/D,IACrB,CAED,OAAImC,EAAOjf,OACF,GAAG0gB,KAAWzB,EAAO7Y,KAAK,OAG5Bsa,CAAO,EClEHI,GAASne,OAAO,UAkBhBoe,GAAQnC,MAAOE,EAAKxf,KAC/B,MAAM0hB,EAAU,IAAI7B,IAAIL,IAClBO,SAAEA,GAAa2B,EAErB,IAAI3lB,EACAukB,EAAU,KAEdtgB,EAAK2f,QACH3f,EAAK2f,OAAO1iB,SAASnD,IACf,QAAQ6M,KAAK7M,GACfiC,EAAOjC,EAAEgB,QAAQ,UAAW,MACnB,YAAY6L,KAAK7M,KAC1BwmB,EAAUxmB,EAAEgB,QAAQ,cAAe,IACpC,IAGAiB,IACHA,EAAOgkB,EAASxkB,MAAgD,GAAxCwkB,EAAS4B,YAAY,KAAO,IAAO,KAG7D,MAAMxB,EAAM,CACVX,MACAtiB,OAAQ,KACRojB,aACGtgB,GAGC4hB,EAAM3B,GAAUlkB,GAEtB,GAAI6lB,QACIA,EAAI1C,IAAIiB,OACT,CACL,MAAMjjB,QAAetD,MAAM4lB,GACrBqC,EAAc3kB,EAAO4kB,QAAQvkB,IAAI,gBAEjCwkB,EAAkB,CACtB,CAAC,yBAA0B,MAC3B,CAAC,mBAAoB,QACrB,CAAC,YAAa,QACd,CAAC,WAAY,QACbC,MAAMloB,GAAM+nB,EAAYxnB,SAASP,EAAE,MAErC,IAAImoB,EACAF,IACFE,EAAShC,GAAU8B,EAAgB,KAGjCE,QACIA,EAAO/C,IAAIiB,GAEjBA,EAAIjjB,OAASA,CAEhB,CAED,GAAI8C,GAAQA,EAAK2L,QAAS,CACxB,MAAMA,QAAEA,GAAY3L,EACpB2L,EAAQ6V,KAAU,EAClB,MAAMtS,EAAQ,IAAI3D,MAAM,QACxBI,EAAQL,cAAc4D,EACvB,CAED,OAAIlP,EAAK2f,QAAU3f,EAAK2f,OAAOtlB,SAAS,QAC/B8lB,EAGFA,EAAIjjB,MAAM,EAGJ,SAASglB,GAAGC,EAAMniB,GAC/B,MArFiB,EAACmiB,EAAMniB,KACnBmiB,IACHA,EAAO,CACL3C,IAAK7gB,SAAS2iB,SAAS9D,OAGb4E,IACZ,IAAK5C,KAAQG,GAAUyC,EAAKppB,MAAM,KAElC,MAAMqpB,EAAQliB,GAAKqf,EAAK2C,EAAK3C,KAE7B,OAAOiC,GAAMY,EAAO,CAAE1C,YAAW3f,GAAO,GA0EnCsiB,CAAWH,EAAMniB,EAC1B,CAEA1G,OAAO4L,iBAAiBgd,GAAI,CAC1BpD,IAAK,CACHnjB,MAAOmjB,IAETyD,MAAO,CACLhlB,IAAG,KACM,IAAK0jB,QC/FlB,MAAMuB,WAAmBxO,YACvB,WAAAjU,IAAeuB,GACbJ,SAASI,GAETrB,KAAKuhB,KAAU,EAEfloB,OAAO4L,iBAAiBjF,KAAM,CAC5BwiB,OAAQ,CACNllB,IAAK,IAAM0C,KAAKuhB,OAIpBvhB,KAAKod,OACN,CAED,KAAAA,GACE,GAAIpd,KAAKyiB,WAAaziB,KAAK+L,WAAWvO,eAAe,SACnD,OAGF,IAAIklB,EAAM1iB,KAAK8J,aAAa,OAE5B,IAAK4Y,EACH,OAGF1iB,KAAKyiB,UAAYC,EAEJT,QAAGxa,EAAW,CACzBiE,QAAS1L,MAGX2iB,CAAKD,GAELrpB,OAAO4L,iBAAiBjF,KAAM,CAC5B0iB,IAAK,CACHvlB,cAAc,EACdzB,MAAOgnB,IAGZ,CAED,iBAAAvO,GACE,MAAMlF,EAAQ,IAAI2T,YAAY,aAC9B3T,EAAMgE,KAAOjT,KAAK6iB,MAAQ7iB,KAAKoa,cAC/Bpa,KAAKqL,cAAc4D,EACpB,CAED,oBAAAsF,GACE,MAAMtF,EAAQ,IAAI2T,YAAY,gBAC9B3T,EAAMgE,KAAOjT,KAAK6iB,aACX7iB,KAAK6iB,MACZ7iB,KAAKqL,cAAc4D,EACpB,CAED,wBAAAyF,CAAyBrU,EAAMe,EAAUuT,GACvC,GAAa,QAATtU,GACF,GAAIsU,GAAyB,OAAbvT,EACdpB,KAAKod,aACA,GAAIpd,KAAKyiB,WAAarhB,GAAYuT,IAAa3U,KAAKyiB,UAGzD,MAFAziB,KAAKoM,aAAa,MAAOpM,KAAKyiB,WAExBpoB,EAAO,gBAAiB,CAC5BoU,IAAKzO,KAAK8L,QAAQhT,oBAGJ,UAATuH,GAAiC,OAAbsU,GAC7B3U,KAAKod,OAER,CAED,6BAAWxI,GACT,MAAO,CAAC,MAAO,QAChB,EAGH,MAAMkO,WAAWP,GACf,WAAAziB,IAAeuB,GACbJ,SAASI,EACV,EAGH,MAAM+R,GAAQ,KACZ0B,eAAeC,OAAO,cAAewN,IACrCzN,eAAeC,OAAO,MAAO+N,IAC7BvG,OAAO7N,oBAAoB,OAAQ0E,GAAM,EAGf,aAAxB1U,SAASmW,WACXzB,KAEAmJ,OAAO1N,iBAAiB,OAAQuE,IC3FlC6O,GAAGc,OHCY1D,eAAsBtf,GACnC,MAAMuiB,MAAEA,GAAUviB,EA0BlB,OAxBIuiB,GACFjpB,OAAO6L,QAAQod,GAAOtlB,SAAQ,EAAEqD,EAAMH,MACpC,IAAK,OAAOwG,KAAKrG,GACf,MAAMhG,EAAO,0BAA2B,CACtCgG,SAIJ,GAAK2gB,GAAS3gB,GAUZ,MAAMhG,EAAO,gBAAiB,CAC5BgG,SAVF,GAAK,MAAMqG,KAAKxG,GAGd,MAAM7F,EAAO,oBAAqB,CAChCgG,OACAH,SAJF8gB,GAAS3gB,GAAQH,CAWpB,KAGE,CACT,EG5BA+hB,GAAG/hB,KAAOA,GACV7G,OAAOuG,OAAOqiB,IAEd1F,OAAO0F,GAAKA,GCDL,MAAMe,GAAc9iB,GAEpB,SAAS+iB,GAAU1kB,EAAK2B,GAC7BZ,EAAUf,EAAK,gBAAgBvB,SAASuC,IACtC,CAAC,OAAQ,OAAOvC,SAASqD,IACvB,MAAMtC,EAAMwB,EAAGuK,aAAazJ,GAExB,KAAKqG,KAAK3I,IAIVA,IAAQ,qBAAqB2I,KAAK3I,IACpCwB,EAAG6M,aAAa/L,EAAM2iB,GAAYjlB,EAAKmC,GACxC,GACD,IAGJZ,EAAUf,EAAK,YAAYvB,SAASuC,IAClC0jB,GAAU1jB,EAAGX,QAASsB,EAAK,GAE/B,CAEO,SAASgjB,GAAqBtkB,EAASsB,GAC5C,MAAMuI,EAAW/J,SAASC,cAAc,YAcxC,OAbA8J,EAASI,UAAYjK,EAErBqkB,GAAUxa,EAAS7J,QAASsB,GAG5BZ,EAAUmJ,EAAS7J,QAAS,SAAS5B,SAASmmB,IAC5C,MAAM/K,EAAO+K,EAAQta,UAErBsa,EAAQta,UAAYuP,EAAKvd,QAAQ,gBAAgB,CAACuoB,EAAUC,IACnD,OAAOL,GAAYK,EAASnjB,OACnC,IAGGuI,EAASI,SAClB,CAEO,MAAMya,GAAUlgB,OAAO,aAEjBmgB,GAAelE,MAAOqD,IACjC,MAAMC,EAAOV,GAAG,CACd1C,IAAKmD,IAEDc,EAAY,GAClB,IAAI1Q,EAEA2Q,EACAC,EAFAC,EAAUjB,EAId,OAAa,CACX,IACE,IAAIkB,EAAUD,EACd,MAAOE,GAAeF,EAAQ5qB,MAAM,KAC9B+qB,EAAa,IAAIlE,IAAIiE,GACvB,MAAMnd,KAAKod,EAAWhE,YACxB8D,GAAW,UAGb9Q,QAAiB6P,EAAKiB,EACvB,CAAC,MAAO3pB,GACP,IAAIsC,EAEFA,EADEknB,EACIppB,EACJ,kBACA,CACE2d,OAAQyL,EACRM,QAASJ,GAEX1pB,GAGII,EACJ,mBACA,CACEklB,IAAKoE,GAEP1pB,GAGJypB,EAAWnnB,EAEXC,QAAQvC,MAAMypB,EACf,CAED,GAAIA,EAAU,CACZF,EAAUrZ,QAAQ,CAChBuY,MACAY,WACArpB,MAAOypB,IAET,KACD,CAOD,GALAF,EAAUrZ,QAAQ,CAChBuY,IAAKiB,EACL7Q,cAGGA,EAASlR,OACZ,MAGF6hB,EAAYE,EACZA,EAAUX,GAAYlQ,EAASlR,OAAQ+hB,EACxC,CAED,OAAOH,CAAS,EAGLQ,GAAa,CAACtB,EAAK5P,KAE9B,MAAMmR,EAAUvlB,SAASC,cAAc,OAEvCslB,EAAQpb,UAAY,gBAAgB6Z,mCAEpC,MAAMwB,EAAavc,GAAKsc,EAAQrc,SAAS,IAWzC,OATA3L,GAASojB,UACF6E,EAAWC,sBACRC,GAAeF,GAGvBA,EAAWC,eAAerR,GAC1BoR,EAAWlY,KAAK,kBAAmB,KAAK,IAGnCkY,CAAU,EAINE,GAAkBC,IAC7B,IAAIA,EAAKC,UAIT,OAAO,IAAIjoB,SAASC,IAClB,MAAM0G,EAAQuhB,aAAY,KACpBF,EAAKC,YACPE,cAAcxhB,GACd1G,IACD,GACA,IAAI,GACP,ECjJEmoB,GAAY3c,EAAcI,OAChCJ,EAAcI,OAAUrO,IACtB4qB,IAAaA,GAAU5qB,GAEvB,MAAMiR,KAAEA,EAAIzK,KAAEA,EAAInB,OAAEA,GAAWrF,GAEzBknB,KAAEA,GAASrO,GAAEC,WAEnB,GAAa,SAAT7H,EAEE5L,EAAO+V,MAAQ8L,GACjBrO,GAAExT,GACC8R,IAAI,KACJhU,SAASnD,GAAMknB,EAAKlnB,UAEpB,GACI,SAATwG,GACS,YAATyK,GACyB,KAAzB5L,EAAO8M,KAAK,SACZ,CACA,MAAM0Y,EAAMxlB,EAAOob,QAAQvT,OAAS7H,EAEpC,GAAIwlB,EAAIC,eACN,OAGFD,EAAIC,eAAiB1oB,GAAS,KAC5B,MAAMgZ,KAAEA,GAAS/V,EAEb+V,GAAqB,WAAbA,EAAKxG,KACfwU,GAAUyB,EAAInmB,IAAK0W,EAAKyN,KAGtB3B,GACFrO,GAAEgS,GACC1T,IAAI,KACJhU,SAASnD,GAAMknB,EAAKlnB,YAElB6qB,EAAIC,cAAc,GAE5B,GAGI,MAAMC,GAAYjoB,IACvB,MAAMoR,EAAO2E,GAAE/V,GAGfoR,EAAKa,GAAG,SAAU/U,IAChB,GAAIA,EAAEgrB,YACJ,OAGF,MAAMC,EAAOpS,GAAE7Y,EAAEqF,QAGjB,IAAIiB,EAFQ,CAAC2kB,KAASA,EAAKxK,SAEHyH,MAAMloB,GAAgB,MAAVA,EAAE4U,MAKtC,GAJItO,IACFA,EAAgBA,EAAc5B,MAG3B4B,EACH,OAIF,IADkBA,EAAc2J,aAAa,YAC5B3J,EAAc2J,aAAa,aAIxC3J,EAAc4L,WAAWvO,eAAe,SAC1C,GAAIuQ,EAAKgX,IAAK,CACZ,GAAIlrB,EAAEmrB,SAAWnrB,EAAEorB,SACjB,OAGF,GAAIprB,EAAEqrB,iBACJ,OAGFrrB,EAAEsrB,iBAGF,IAAIC,GAAY,EAOhB,GANAvrB,EAAEsrB,eAAiB,KACjBC,GAAY,CAAI,EAGlBvrB,EAAEgrB,aAAc,EAEc,MAA1B1kB,EAAc2L,QAAiB,CACjC,MAAMuZ,EAAallB,EAAc2J,aAAa,eAE9C1N,YAAW,KACT,MAAMkpB,EAAYD,GAAcllB,EAAcod,KAC9C+H,IAAcF,GAAarX,EAAKgX,IAAIQ,KAAKD,EAAU,GAEtD,CACT,MACQ9oB,QAAQC,KAAKpC,EAAO,iBAAkBsC,EAEzC,GACD,ECxGE6oB,GAAqBnG,MAAOphB,EAAKwnB,EAAMC,GAAQ,KACnD,MAAMC,EAAO,IAAIC,KAAK,CAAC3nB,GAAM,UAAW,CAAEnC,KAAM2pB,IAEhD,IAAKC,EACH,OAAO9F,IAAIiG,gBAAgBF,GAa7B,aAVqB,IAAItpB,SAASC,IAChC,MAAMwpB,EAAK,IAAIC,WAEfD,EAAGE,OAAUnsB,IACXyC,EAAQzC,EAAEqF,OAAOjC,OAAO,EAG1B6oB,EAAGG,cAAcN,EAAK,GAGX,EAMTO,GAAkB7G,MACtB8G,EACAC,EACAC,EACAC,EACAC,KAEA,MAAMC,EAAgBF,EAAcvtB,MAAM,MAE1C,IAAI0tB,EAAW,GAEf,IAAK,IAAIriB,EAAI,EAAGA,GAAKmiB,EAAWniB,IAC9BqiB,GAAY,IAGd,IAAIC,EAAiB,EACjBC,EAAiB,EAErB,IAAK,IAAIC,EAAQR,EAAqB,EAAGQ,EAAQP,EAAmBO,IAAS,CAC3E,MAAM1nB,EAASsnB,EAAcI,IAAU,GAEvC,IAAIC,EAAS,GAEbpnB,MAAMC,KAAKR,GAAQlC,SAAQ,CAACnD,EAAGitB,KAC7B,MAAMC,EAAa,KAAKC,GAAUJ,EAAQF,KAAkBM,GAC1DF,EAAQH,KAGLE,EAGHA,GAAU,IAAIE,IAFdF,EAASE,EAKXL,EAAiBE,EACjBD,EAAiBG,CAAK,IAGxBL,GAAY,GAAGI,IAChB,CAED,MAAMI,EAAiB9tB,KAAKa,UAAU,CAACssB,IACpCzrB,QAAQ,MAAO,IACfA,QAAQ,MAAO,IAEZoD,EAAM,oCACKkoB,EAAStrB,QAAQ,OAAQ,iCACpBosB,yBACLR,MAEjB,aAAajB,GAAmBvnB,EAAK,mBAAmB,EA0DpDipB,GAAY,IAAIhjB,IAEfmb,eAAe8H,GAAQvoB,EAAS2gB,EAAK6H,GAAS,GACnD,IAAIC,EAAYH,GAAU5pB,IAAIiiB,GAC9B,GAAI8H,EACF,OAAOA,EAGT,IAAIC,EAAU5U,GAAE6U,UAEhB,MAAMC,EAAS9U,GAAE,yBACjB8U,EAAOpP,KAAOxZ,EACd,MAAM6oB,EAAUD,EAAO9U,EAAE,SAEnB6F,EAAaiP,EAAO9U,EAAE,YAAY0U,EAAS,OAAS,gBACpDM,EAAWnP,EAAW7F,EAAE,UAE9BgV,GAAYA,EAASle,SAMrB,IAAI/K,EAAO,KAHO8Z,EAAWH,KAC1Bvd,QAAQ,0BAA2B,IACnCkS,SAIDtO,EAAO8Z,EAAWH,KACfvd,QAAQ,OAAQ,IAChBA,QAAQ,KAAM,OACdA,QAAQ,QAAS,QAEhBysB,IACF7oB,OAtFoB4gB,OAAO5gB,EAAM6nB,EAAeH,KACpD,IAAIwB,EAASlpB,EAGTmpB,EAAsBtB,EAE1B,MAAMkB,EAAS9oB,SAASC,cAAc,YACtC6oB,EAAO3e,UAAYpK,EAEnB,MAAMopB,EAAWL,EAAO5oB,QAAQe,iBAAiB,SAEjD,IAAK,IAAI9F,KAAK4F,MAAMC,KAAKmoB,GAAW,CAClC,MAAMC,EAAejuB,EAAEgP,WACjBwN,UAAEA,GAAcxc,EAGtB,IAAI0sB,EAAY,EAGhB,MAAMwB,EAAWH,EAAoB7uB,MAAMsd,GAGrC+P,EAAqB2B,EAAS,GAAGhvB,MAAM,MAAM0H,OAAS,EAGtD4lB,EACJD,EAAqB0B,EAAa/uB,MAAM,MAAM0H,OAAS,EAGzD,IAAIunB,EAAY,GAChB,IAAK,IAAI5jB,EAAI,EAAGwC,EAAMyP,EAAUtd,MAAM,MAAM0H,OAAS,EAAG2D,EAAIwC,EAAKxC,IAC/D4jB,GAAa,KAEfJ,EAAsB,CAACG,EAAS,GAAIC,EAAWD,EAAS,IAAIlhB,KAAK,IAEjE,MAQMohB,EAAe,8BARU/B,GAC7BC,EACAC,EACAC,EACAC,EACAC,OAKFoB,EAASA,EAAO9sB,QACdwb,EACA,GAAGA,EAAUxb,QAAQ,WAAY,QAAQotB,YAE5C,CAED,OAAON,CAAM,EAmCIO,CAAkBzpB,EAAMG,EAAS2gB,IAGhD9gB,EAAO,gDAAkDA,GAI3D,MAAM0pB,EAAgB,2BACAf,EAAS,WAAa,kBAC1CA,GAAUK,EAAU,yBAAyBA,EAAQ1N,SAAW,+BAC1Ctb,OAExB,IAAI2pB,EAAgB,GAChBV,IACFU,EAAgBV,EAAStP,KACtBrf,MAAM,MACNoQ,KAAKvK,IACJ,MAAMypB,EAAYzpB,EAAQmO,OAE1B,MAAI,iBAAiBrG,KAAK2hB,GAEjBzpB,EAAQ/D,QAAQ,qBAAqB,CAACoQ,EAAMqd,IAC1C,IAAItF,GAAYsF,EAAS/I,QAG7B3gB,CAAO,IAEfiI,KAAK,MAGV,MAAM0hB,EAAc,GAAGJ,OACvBC,IAEA,IAAIH,EAAe,GAEnB,GAAIX,EAAS,CACX,MAAMd,EAAgB5nB,EAAQ7F,MAAM,MAG9BqtB,EAAqBI,EAAcgC,WACtCC,GAAuC,aAAvBA,EAAY1b,SAIzBsZ,EAAoBG,EAAcgC,WACrCC,GAAuC,eAAvBA,EAAY1b,SAG/Bkb,EAAe,8BAA8B/B,GAC3C3G,EACA6G,EACAC,EACAznB,EACAupB,EAAcpvB,MAAM,MAAM0H,SAE7B,CAED,MAAMioB,EAAe,GAAGH,MAAgBN,IAElCU,EAAYhwB,UAAUwB,UAAUC,SAAS,WAU/C,OARAitB,EAAY7B,GACVkD,EACA,mBACAC,GAGFzB,GAAU3pB,IAAIgiB,EAAK8H,GAEZA,CACT,CAEA,MAAMuB,GACJ,mEAMF,SAAS5B,GAAUtrB,GACjB,IAAImtB,EAAU,GACVC,EANN,SAAqBptB,GACnB,OAAOA,EAAQ,EAAoB,IAAdA,GAAS,GAAwB,GAAdA,GAAS,EACnD,CAIYqtB,CAAYrtB,GAEtB,EAAG,CACD,IAAIstB,EAAc,GAANF,EACZA,KAAS,EACLA,EAAM,IACRE,GAAS,IAEXH,GAAWD,GAAOI,EACtB,OAAWF,EAAM,GAEf,OAAOD,CACT,CCjPA,MAEMI,GAAO7lB,OAAO,QAEpB/J,OAAOoE,eAAeiV,GAAG,OAAQ,CAC/BhX,MAAOutB,KAGThH,GAAGpD,IAAI,CAAC,OAAQ,QAAQQ,MAAOa,EAAK3J,KAClC,MAAQtZ,OAAQ2B,EAAO8gB,OAAEA,GAAWQ,EAEpC,GACEthB,GACA,qBAAqB8H,KAAK9H,KACzB8gB,EAAOtlB,SAAS,gBACjB,CACA,IACE,MAAMmlB,QAAY4H,GAAQvoB,EAASshB,EAAIX,KACvCW,EAAIjjB,aAAeglB,KAAK,GAAG1C,iBAAmBW,EAAIX,MACnD,CAAC,MAAOtlB,GACP,MAAMI,EACJ,mBACA,CACEklB,IAAKW,EAAIX,KAEXtlB,EAEH,CACDimB,EAAIgJ,cAAgBtqB,CACrB,OAEK2X,GAAM,IAGd0L,GAAGpD,IAAI,CAAC,KAAM,QAAQQ,MAAOa,EAAK3J,KAChC,MAAQtZ,OAAQksB,EAAU5J,IAAEA,EAAGc,QAAEA,GAAYH,EAC7C,GAA0B,iBAAfiJ,GAA2BA,EAAWrtB,OAASmtB,GAExD,kBADM1S,IAIR,MAAM6S,QAAqBC,GAAWF,EAAY9I,GAAWd,GAE7D,IAAI+J,EAAUF,EAAa3qB,KAE3B,IAAK,OAAOiI,KAAK4iB,GAAU,CAEvBA,EADEA,EACQtG,GAAYsG,EAAS/J,GAErBA,EAAI1kB,QAAQ,WAAY,SAGpC,IACEuuB,EAAa3qB,WAAa9E,MAAM2vB,GAAS1vB,MAAMC,GAAMA,EAAEkgB,QACxD,CAAC,MAAO9f,GACP,MAAMsC,EAAMlC,EACV,iBACA,CACEklB,IAAKc,GAAWd,EAChB+J,WAEFrvB,GAGF,MADAkM,KAAK6I,KAAK,QAAS,CAAE5J,KAAM,CAAEnL,MAAOsC,KAC9BA,CACP,CACF,CAED2jB,EAAIjjB,OAASmsB,QAEP7S,GAAM,IAGdna,YAAW,KAETsW,GAAEc,SAAS,CACT/E,IAAK,SACLuE,MAAO,CACL0P,IAAK,MAEPtd,KAAM,CACJmkB,YAAa,MAEfznB,MAAO,CACL,SAAM4gB,CAAIA,GACR,IAAKA,EACH,OAGF,IAAKA,EAAIzQ,WAAW,QAAU,cAAcvL,KAAKgc,GAG/C,OAFAA,EAAMM,GAAYN,QAClB1iB,KAAK0iB,IAAMA,GAIb,GAAI1iB,KAAKwpB,WAAY,CACnB,GAAIxpB,KAAKwpB,aAAe9G,EACtB,MAAM5nB,MACJ,iFAGJ,MACD,CAID,GAFAkF,KAAKwpB,WAAa9G,EAEd1iB,KAAKypB,WAAazpB,KAAKgM,KAAK,mBAC9B,OAGF,MAAMwX,QAAkBD,GAAab,GAErC,GAAI1iB,KAAKypB,UACP,OAGF,MAAMvqB,EAASskB,EAAUzc,MAazB,GAXAyc,EAAUxmB,SAAQ,CAACnD,EAAGuK,KACpB,MAAMslB,EAAa1F,GAAWnqB,EAAE6oB,IAAK7oB,EAAEiZ,UAEvC,GAAI9S,KAAK4B,OACP5B,KAAKkc,KAAKwN,OACL,EACa1pB,KAAK2pB,eAAiB3pB,KAAK2pB,aAAe,KAClD5oB,KAAK2oB,EAChB,KAGCxqB,EAAOokB,UAAYA,GAAS,CAC9B,MAAMsG,EAAcC,GAClBnH,EACAxjB,EACAc,MAAM+kB,KAAK+E,SAASC,MAGtB/pB,KAAKmkB,eAAe,CAClBroB,KAAMmtB,GACNxqB,KAAMmrB,GAElB,MACU5pB,KAAKmkB,eAAejlB,EAAO4T,SAE9B,GAEH,QAAAuB,GAGE,MAAM2V,EAAYhqB,KAAK2pB,aACnBK,IACFA,EAAUhtB,SAASqnB,IACjBrkB,KAAKkc,KAAKmI,EAAK,WAEVrkB,KAAK2pB,cAGV3pB,KAAKiqB,qBACHjqB,KAAKypB,UAAUpV,UACjBrU,KAAKypB,UAAUpV,SAAS1Y,KAAKqE,aAExBA,KAAKiqB,mBAEf,EACD,QAAAzV,GACE,MAAMiV,UAAEA,GAAczpB,KAElBypB,GAAaA,EAAUjV,UACzBiV,EAAUjV,SAAS7Y,KAAKqE,KAE3B,EACDpD,MAAO,CACL,oBAAMunB,CAAerR,GACnB,MAAM4P,IAAEA,GAAQ1iB,KA8BhB,GA5BI8S,EAAS1N,MAEX/L,OAAO+G,KAAK0S,EAAS1N,MAAMpI,SAASqD,IAClC,GAAIA,KAAQL,KACV,MAAM3F,EAAO,mBAAoB,CAC/BqoB,MACAvU,WAAY,OACZ9N,QAEH,IAIDyS,EAASlW,OACXvD,OAAO+G,KAAK0S,EAASlW,OAAOI,SAASqD,IAC/BA,KAAQL,MACVxD,QAAQC,KACN/B,EAAW,mBAAoB,CAC7BgoB,MACAvU,WAAY,QACZ9N,SAEFyS,EAEH,IAID9S,KAAKypB,UAAW,CAClB,MAAMltB,EAAMlC,EAAO,mBAAoB,CAAEqoB,QAEzC,MADAlmB,QAAQC,KAAKF,EAAKyD,MACZzD,CACP,CAQD,GANAyD,KAAKypB,UAAY3W,EAEbA,EAASoX,YACXlqB,KAAKmqB,WAAarX,EAASoX,YAGxBpX,GAAYA,EAAShX,OAASmtB,GAAM,CACvC,MAAM1sB,EAAMlC,EAAO,kBAAmB,CAAEqoB,QAIxC,MAHAlmB,QAAQC,KAAKF,EAAKyD,MAClBA,KAAKgP,KAAK,QAAS,CAAE5J,KAAM,CAAEnL,MAAOsC,KACpCyD,KAAKoqB,SAAS7tB,GACRA,CACP,CAED,MAAMkM,EAAW/J,SAASC,cAAc,YACxC8J,EAASI,UAAYqa,GAAqBpQ,EAASrU,KAAMikB,GACzD,MAAMha,EAAQ8D,GAAQ/D,GAEtB,IACEoK,GAAc,CACZC,WACAvU,IAAKyB,KAAKzB,IACVkK,WACAC,SAEH,CAAC,MAAOzO,GACP,MAAMsC,EAAMlC,EAAO,cAAe,CAAEqoB,OAAOzoB,GAC3CuC,QAAQvC,MAAMsC,GACdC,QAAQC,KAAKF,EAAKyD,KACnB,OAEKqqB,GAAarqB,KAAM8S,EAAS0P,QAElCoC,GAAS5kB,KAAKia,QAEdja,KAAKgP,KAAK,eAEVhP,KAAKsqB,YAELtqB,KAAKupB,YAAc,EAEnB,MAAMxE,IAAEA,GAAQ/kB,KACZ+kB,IAAQA,EAAIwF,YACdtuB,GAAS,KACP8oB,EAAIwF,WAAa,CAAC,IAIlBvqB,KAAKzB,IAAI6X,YACPtD,EAASuB,UACXvB,EAASuB,SAAS1Y,KAAKqE,MAGzBA,KAAKiqB,mBAAqB,CAE7B,EACD,IAAAO,GACExqB,KAAK+kB,IAAIyF,MACV,EACD,IAAAjF,CAAK7C,GACH1iB,KAAK+kB,IAAIQ,KAAKvC,GAAYN,EAAK1iB,KAAK0iB,KACrC,EACD,OAAA7nB,CAAQ6nB,GACN1iB,KAAK+kB,IAAIlqB,QAAQmoB,GAAYN,EAAK1iB,KAAK0iB,KACxC,EACD,aAAIwH,GACF,MAAMnF,IAAEA,EAAGoF,WAAEA,GAAenqB,MAEtBkqB,UAAEA,GAAcnF,GAAK+E,SAAW,CAAA,EAEtC,OAtROjuB,EAsRM,IAAKquB,KAAeC,GAAc,CAAA,GAtRhChxB,KAAKC,MAAMD,KAAKa,UAAU6B,IAAnC,IAACA,CAuRR,EACD,aAAIquB,CAAUnsB,GACZiC,KAAKmqB,WAAapsB,CACnB,GAGH,KAAAqV,GACEpT,KAAKskB,UAAY,IAAIjoB,SAAQ,CAACC,EAASwG,KACrC9C,KAAKsqB,UAAY,YACRtqB,KAAKsqB,iBACLtqB,KAAKoqB,SACZ9tB,GAAS,EAEX0D,KAAKoqB,SAAW,YACPpqB,KAAKsqB,iBACLtqB,KAAKoqB,SACZtnB,GAAQ,CACT,GAEJ,GACD,IAGG,MAAMunB,GAAehL,MAAO1iB,EAAO6lB,KACxC,MAAMvI,EAAStd,EAAM4B,IAAI2b,WAEzB,GAAID,EAAQ,CACV,MACMwQ,EADUnrB,EAAU2a,EAAQ,mBACd9Q,KACjB5J,GACC,IAAIlD,SAASquB,IACXnrB,EAAGsP,iBAAiB,QAAShV,IAC3B6wB,GAAK,GACL,MAIMprB,EAAU2a,EAAQ,QAE1Bjd,SAAS+jB,IACI,eAAbA,EAAKvD,KACPiN,EAAI1pB,KACF,IAAI1E,SAASquB,IACX,IAAIpuB,EAAU,KACZkoB,cAAcxhB,GACd+d,EAAKrS,oBAAoB,OAAQpS,GACjCykB,EAAKrS,oBAAoB,QAASpS,GAClCouB,GAAK,EAEP,MAAM1nB,EAAQuhB,aAAY,KACnBxD,EAAKpX,YACRrN,GACD,GACA,KAECykB,EAAK4J,MACPruB,KAEAykB,EAAKlS,iBAAiB,OAAQvS,GAC9BykB,EAAKlS,iBAAiB,QAASvS,GAChC,IAGN,UAGGD,QAAQ2U,IAAIyZ,EACnB,CAEGjI,GACFA,EAAO7mB,KAAKgB,EACb,EAGU0sB,GAAahK,MAAO8J,EAAY5J,KAC3C,IAAIqL,EAAgB,CAAA,EAEpB,MAAQC,QAASxd,GAAgB8b,EAE3B2B,EAAa7I,GAAG,CACpB1C,QAGEzhB,EAAWuP,GACbud,QAAsBvd,EAAY,CAChCsV,KAAMmI,EACNvL,MACA,SAAIwL,GACF,MAAMC,EAAS,IAAIpL,IAAIL,GACvB,OAAOlmB,OAAO4xB,YAAYxrB,MAAMC,KAAKsrB,EAAOE,aAAahmB,WAC1D,IAEMmI,aAAuBhU,SAChCuxB,EAAgB,IAAKvd,IASvB,MANiB,CACfzQ,MAAO,CAAE,KACNusB,KACAyB,EAGU,EAGJf,GAAiB,CAACnH,EAAKxjB,EAAQ6qB,KAC1C,IAAIH,EAeJ,OAZEA,EADEG,EACYA,EAAK,CACjBrH,MACAzoB,MAAOiF,EAAOjF,QAGF,yCACZiF,EAAOjF,MAAMW,OAASsE,EAAOjF,MAAMU,YAElCE,QAAQ,MAAO,QACfA,QAAQ,KAAM,kBAGZ+uB,CAAW,ECzZduB,GAAO/nB,OAAO,aACPgoB,GAAiBhoB,OAAO,QAErC/J,OAAOoE,eAAeiV,GAAG,OAAQ,CAC/BhX,MAAOyvB,KAGT,MAAME,GAAa,CAAA,EAEnBpJ,GAAGpD,IAAI,CAAC,OAAQ,QAAQQ,MAAOa,EAAK3J,KAClC,MAAQtZ,OAAQ2B,EAAO8gB,OAAEA,GAAWQ,EAEpC,GACEthB,GACA,0BAA0B8H,KAAK9H,KAC9B8gB,EAAOtlB,SAAS,gBACjB,CACA,IACE,MAAMmlB,QAAY4H,GAAQvoB,EAASshB,EAAIX,KAAK,GAC5CW,EAAIjjB,aAAeglB,KAAK,GAAG1C,iBAAmBW,EAAIX,MACnD,CAAC,MAAOhjB,GACP,MAAMlC,EACJ,mBACA,CACEklB,IAAKW,EAAIX,KAEXhjB,EAEH,CACD2jB,EAAIgJ,cAAgBtqB,CACrB,OAEK2X,GAAM,IAGd0L,GAAGpD,IAAI,CAAC,KAAM,QAAQQ,MAAOa,EAAK3J,KAChC,MAAQtZ,OAAQksB,EAAU5J,IAAEA,EAAGc,QAAEA,GAAYH,EAC7C,GAA0B,iBAAfiJ,GAA2BA,EAAWrtB,OAASqvB,GAExD,YADA5U,IAIF,IAAIqU,EAAgB,CAAA,EAEpB,MAAQC,QAASxd,GAAgB8b,EAE3BjpB,EAAOmgB,GAAWd,EAEpBzhB,EAAWuP,GACbud,QAAsBvd,EAAY,CAChCsV,KAAMV,GAAG,CACP1C,IAAKrf,IAEPqf,IAAKrf,IAEEmN,aAAuBhU,SAChCuxB,EAAgB,IAAKvd,IAGvB,MAAMoB,IAAEA,EAAGhQ,KAAEA,GAAS,IAAK0qB,KAAeyB,GAE1C,IAAI9e,EAAU2C,EACd,MAAM6c,EAAYprB,EAAKhC,MAAM,+BAExB4N,GACCwf,IACFxf,EAAUzN,EAAWitB,EAAU,KAInC,MAAMC,EAAWF,GAAWvf,GAC5B,GAAIyf,EAAU,CACZ,GAAIrrB,IAASqrB,EACX,MAAMlxB,EAAO,kBAAmB,CAC9BgG,KAAMyL,IAKV,kBADMyK,GAEP,CAED8U,GAAWvf,GAAW5L,EAEtB,IAAIsrB,EACFC,EAAc,GAEZ,OAAO/kB,KAAKjI,IACd+sB,EAAUtrB,EACVurB,EAAchtB,GACI,KAATA,IAKP+sB,EAAUxI,GAHPvkB,GACmB,GAAG6sB,EAAU,UAEPprB,GAG9BurB,QAAoB9xB,MAAM6xB,GAAS5xB,MAAMC,GAAMA,EAAEkgB,UAGnD,MAAM2R,EAAe,IAChBvC,KACAyB,GAGCe,EAAWD,EAAatY,OACxBoP,OAAEA,GAAWkJ,EACnBA,EAAatY,MAAQiM,kBAAmBhe,GACtCsqB,GAAYA,EAASjoB,MAAM1D,KAAMqB,GACjCmhB,GAAU6H,GAAarqB,KAAMwiB,GAC7BxiB,KAAKia,QAAU2K,GAAS5kB,KAAKia,OACjC,EAEE,MAAM2R,EAAaF,EAAa1X,QAChC0X,EAAa1X,QAAU,YAAa3S,GAClCrB,KAAKorB,IAAkBlrB,EACvB0rB,GAAcA,EAAWjwB,KAAKqE,QAASqB,EAC3C,EAEE,MAAMwqB,EAAU3I,GAAqBuI,EAAavrB,GAAQsrB,GAE1D9Y,GAAEc,SAAS,IACNkY,EACHjd,IAAK3C,EACLrN,KAAMotB,UAGFtV,GAAM,IC5Hd,MAAMuV,GAAU,WACVC,GAAW,YAEXC,GAAa3M,OAASqD,MAAKqC,UAC/B,MAAMkH,QAAEA,EAAOlC,KAAEA,GAAShF,EAAI+E,SAAW,CAAA,EAEzC,IAAIoC,EACJ,GAAID,EAAS,CAGX,GAFAC,EAAYxc,GAAWuc,MAElBC,EAAW,CACd,MAAM3vB,EAAMlC,EAAO,mBAEnB,MADAmC,QAAQC,KAAKF,EAAK0vB,GACZ1vB,CACP,CAEDwoB,EAAIhkB,KAAKmrB,EACV,CAED,MAAMC,EAAe,GACrB,CACE,MAAMpI,QAAEA,GAAYgB,EACpB,GAAIhB,EAAS,CACXoI,EAAaprB,KAAKgjB,GAClB,IAAK,IAAIM,KAAQN,EAAQzJ,QAAS,CAChC,GAAiB,WAAb+J,EAAK5V,IACP,MAGF0d,EAAahiB,QAAQka,EACtB,CACF,CACF,CAED,MAAM+H,QAAqB7I,GAAab,GAExC,IAAI2J,EAAYtH,EAEhB,MAAMuH,EAAgB,GAChBC,EAAa,GACnB,IAAI5gB,EAqCA6gB,EAASC,EAjCTrlB,GAAS,EAuEb,OAtEAglB,EAAapvB,SAAQ,CAACnD,EAAGsF,KACvB,MAAM4kB,EAAUoI,EAAahtB,GAE7B,GAAKiI,EAAL,CAKA,IAAK2c,GAAWA,EAAQrB,MAAQ7oB,EAAE6oB,IAIhC,OAHAtb,GAAS,EACTmlB,EAAWxrB,KAAKlH,QAChB8R,EAAMoY,GAIRuI,EAAcvrB,KAAKgjB,GAEnBsI,EAAYtI,CAXX,MAFCwI,EAAWxrB,KAAKlH,EAaC,IAIjBsyB,EAAa1rB,OAAS2rB,EAAa3rB,SAAWkL,GAChDwgB,EAAajrB,MAAK,CAACrH,EAAGsF,KACpB,MAAM4kB,EAAUqI,EAAajtB,GAE7B,IAAK4kB,GAAWA,EAAQrB,MAAQ7oB,EAAE6oB,IAEhC,OADA/W,EAAM9R,GACC,CACR,IAML0yB,EAAWvvB,SAAS0vB,IAClB,MAAQpJ,QAASqJ,GAAYD,EAE7B,IAAIrI,EACJ,GAAIsI,EAAS,CACX,MAAM/C,EAAcC,GAAe6C,EAAShK,IAAKgK,EAAU3C,GAE3D1F,EAAOL,GAAW0I,EAAShK,IAAK,CAC9B5mB,KAAM4W,GAAEuW,KACRxqB,KAAMmrB,GAEd,MACMvF,EAAOL,GAAW0I,EAAShK,IAAKgK,EAAS5Z,UAG3C,GAAK0Z,EAAL,CAKA,IAAKC,EAGH,OAFAD,EAAQzrB,KAAKsjB,QACboI,EAAYpI,GAIdoI,EAAU1rB,KAAKsjB,GACfoI,EAAYpI,CATX,MAFCmI,EAAUnI,CAWI,IAGdmI,GACFH,EAAUtrB,KAAKyrB,GAGjBN,GAAaA,EAAU1iB,SAEhB,CAAEua,QAASyI,EAAS7gB,MAAKihB,QAASN,EAAe,EAIpDO,GAAmB,CAAClwB,EAAOiwB,EAAS9wB,KACxC,GAAI8wB,GAAWA,EAAQnsB,OAAQ,CAC7B,MAAMsjB,QAAEA,GAAYpnB,EACpBiwB,EAAQ5vB,SAASqnB,IAEf,MAAMyI,aAAEA,GAAiBzI,EAAKoF,UAE1BqD,GACFA,EAAanxB,KAAK0oB,EAAM,CAAEvoB,OAAMioB,WACjC,GAEJ,GAGHrR,GAAEc,SAAS,CACT/E,IAAK,QACLhQ,KAAM,wHACNuU,MAAO,CACL0P,IAAK,MAEPtd,KAAM,CACJ0mB,CAACA,IAAU,GACXvB,WAAY,MAGdzoB,MAAO,CACL,SAAM4gB,CAAI3kB,GACR,GAAIiC,KAAKwpB,WAAY,CACnB,GAAIxpB,KAAKwpB,aAAezrB,EACtB,MAAM1D,EAAO,kBAEf,MACD,CAED,IAAK0D,EACH,OAGFiC,KAAKwpB,WAAazrB,EAElB,IAAIgvB,EAAUhvB,GACVA,GAAQA,EAAIkU,WAAW,OAAU,cAAcvL,KAAK3I,KACtDgvB,EAAU/J,GAAYjlB,IAGxB,MAAM4kB,EAAOV,KAEPkH,QAAmBxG,EAAKoK,GAE1B5D,EAAW6D,eACbhtB,KAAK+rB,IAAY,IAGnB,MAAMjZ,QAAiBuW,GAAWF,EAAY4D,GAU9C,GARA/sB,KAAK8pB,QAAUhX,EAEf9S,KAAKtD,OAAOoW,EAASlW,OAEjBkW,EAASM,OACXN,EAASM,MAAMzX,KAAKqE,OAGlBA,KAAKitB,iBAIJjtB,KAAK0S,EAAE,YAAc1S,KAAKktB,WAAapa,EAASqa,KAAM,CACzD,MAAMC,EAAU,IAAIxN,IAAI9M,EAASqa,KAAMJ,GAASxP,KAChDvd,KAAKe,KAAK,gBAAgBqsB,eAC3B,CACF,GAEHxwB,MAAO,CACL,aAAMywB,CAAQC,EAAQ,GACpB,IAAKttB,KAAK+rB,IAAW,CACnB,MAAMxvB,EAAMlC,EAAO,iBAEnB,YADAmC,QAAQC,KAAKF,EAAKyD,KAEnB,CAEDstB,EAAQA,EAAQttB,KAAK+rB,IAAUtrB,OAAS6sB,EAAQttB,KAAK+rB,IAAUtrB,OAE/D,MAAM8sB,EAAiBvtB,KAAK+rB,IAAU1sB,QAAQiuB,GAE9C,GAAKC,EAAe9sB,OAQpB,OAAOT,KAAKwtB,UAAU,CACpB1xB,KAAM,UACN4mB,IAAK6K,EAAe,GAAG7K,IACvB6K,iBACAD,UAZF,CACE,MAAM/wB,EAAMlC,EAAO,iBACnBmC,QAAQC,KAAKF,EAAK,CAChBwoB,IAAK/kB,MAGR,CAQF,EACD,UAAMwqB,CAAK8C,EAAQ,GACjB,IAAKttB,KAAK8rB,IAASrrB,OAAQ,CACzB,MAAMlE,EAAMlC,EAAO,cAInB,YAHAmC,QAAQC,KAAKF,EAAK,CAChBwoB,IAAK/kB,MAGR,CAED,MAAMytB,EAAaztB,KAAK0tB,SAElBC,SAAEA,GAAa3tB,KAGrBstB,EAAQA,EAAQttB,KAAK8rB,IAASrrB,OAAS6sB,EAAQttB,KAAK8rB,IAASrrB,OAE7D,MAAMmtB,EAAa5tB,KAAK8rB,IAASzsB,QAAQiuB,GAAO,GAEhD,IACEvJ,QAASM,EACT1Y,IAAKkiB,EAAcjB,QACnBA,SACQZ,GAAW,CACnBtJ,IAAKkL,EAAWlL,IAChBqC,IAAK/kB,QAGF2tB,GAAYtJ,SACTyJ,GAAY,CAChBzJ,OACA/pB,IAAK,aAILuzB,IACFA,EAAiBE,GAAaF,IAGhC,MAAMG,EAASP,EAAWnyB,OAAO,EAAIgyB,GAEjCttB,KAAK+rB,KACP/rB,KAAK+rB,IAAUhrB,QAAQitB,GAGzBhuB,KAAKgP,KAAK,gBAAiB,CACzB5J,KAAM,CAAE/E,KAAM,OAAQitB,QAAOW,SAAUD,KAGzCnB,GAAiB7sB,KAAM4sB,EAAS,SAE3Be,GAAYE,SACTK,GAAa,CACjB7J,KAAMwJ,EACNvzB,IAAK,SAILuzB,GACFA,EAAerkB,QAElB,EACD,eAAMgkB,CAAUjzB,GACd,IAAIuB,KAAEA,EAAI4mB,IAAEA,GAAQnoB,EAEpB,MAAMozB,SAAEA,GAAa3tB,MACb+jB,QAASoK,GAAenuB,KAEhC0iB,EAAMM,GAAYN,GAElB0L,GAAUpuB,KAAM0iB,GAEXyL,IACHnuB,KAAKktB,UAAYxK,GAGnB,IACEqB,QAASM,EACT1Y,IAAKkiB,EAAcjB,QACnBA,SACQZ,GAAW,CACnBtJ,MACAqC,IAAK/kB,OAGP,IAAKqkB,EACH,QAGGsJ,GAAYtJ,SACTyJ,GAAY,CAChBzJ,OACA/pB,IAAK,SAILuzB,IACFA,EAAiBE,GAAaF,IAGhC,MAAMQ,EAAa,CAAEhuB,KAAMvE,EAAM4mB,OAYjC,GAVa,SAAT5mB,GAA4B,YAATA,GACrBqyB,GAAcnuB,KAAK8rB,IAAS/qB,KAAK,CAAE2hB,IAAKyL,EAAWzL,MAGxC,SAAT5mB,GACE2D,MAAMuG,QAAQhG,KAAK+rB,OACrB/rB,KAAK+rB,IAAY,IAIR,YAATjwB,EAAoB,CACtB,MAAMyxB,eAAEA,GAAmBhzB,EACrB+zB,EAAcf,EAAejyB,MAAM,GAAGyU,UAC5C/P,KAAK8rB,IAAS/qB,QAAQutB,GACtBD,EAAWf,MAAQ/yB,EAAQ+yB,KAC5B,CAEDttB,KAAKgP,KAAK,gBAAiB,CACzB5J,KAAMipB,IAGRxB,GAAiB7sB,KAAM4sB,EAAS9wB,GAE5BqyB,GAAcN,IACXF,SACGO,GAAa,CACjB7J,KAAMwJ,EACNvzB,IAAK,aAGTuzB,EAAerkB,SAElB,EACD,IAAA+b,CAAK7C,GACH,OAAO1iB,KAAKwtB,UAAU,CAAE1xB,KAAM,OAAQ4mB,OACvC,EACD,OAAA7nB,CAAQ6nB,GACN,OAAO1iB,KAAKwtB,UAAU,CAAE1xB,KAAM,UAAW4mB,OAC1C,EACD,WAAIqB,GACF,OAAO/jB,KAAKgR,IAAI,UACbjB,UACAgS,MAAMsC,IACL,IAAInlB,EAASmlB,EACb,KAAsB,WAAfnlB,EAAOuP,KAAkB,CAC9B,GAAIvP,EAAOkG,KAAKmpB,YACd,OAAO,EAETrvB,EAASA,EAAO0C,MACjB,CAED,OAAO,CAAI,GAEhB,EACD,WAAI8rB,GACF,IAAI3J,QAAEA,GAAY/jB,KAElB,IAAK+jB,EACH,MAAO,GAUT,MAPgB,IACX/jB,KAAK8rB,IACR,CACEpJ,IAAKqB,EAAQrB,KAKlB,EACD,WAAIgL,CAAQc,GACVA,EAAWA,EAASrlB,KAAKtP,IACvBu0B,GAAUpuB,KAAMnG,EAAE6oB,KAEX,CAAEA,IAAK7oB,EAAE6oB,QAGlB1iB,KAAKitB,eAAiB,EAEtBjtB,KAAKoY,KAAO,GAEZ,MAAMqW,EAAiBD,EAASlzB,QAE1BozB,EAAgBD,EAAe1nB,MAErC/G,KAAK8rB,IAASrrB,OAAS,EACvBT,KAAK8rB,IAAS/qB,QAAQ0tB,GAEtBzuB,KAAKe,KAAK,CACR0N,IAAK,SACLiU,IAAKgM,EAAchM,KAEtB,KAKL,MAAM0L,GAAY,CAACrJ,EAAKrC,KACtB,MAAMiM,EAAS5J,GAAK+E,SAAS6E,OAI7B,GAFe,IAAI/O,IAAI8C,GAEZ7C,SAAWwB,SAASxB,SAAW8O,EAAQ,CAChD,MAAMpyB,EAAMlC,EAAO,wBAEnB,MADAmC,QAAQC,KAAKF,EAAKwoB,EAAIxmB,IAAKwmB,GAAK+E,SAC1BvtB,CACP,CAED,GAAIoyB,EAAQ,CACV,MAAM1xB,EAAS0xB,EAAOjM,GAEtB,IAAe,IAAXzlB,EAAiB,CACnB,MAAMV,EAAMlC,EACV,sBACA,CAAEqoB,OACFzlB,aAAkBnC,MAAQmC,OAASwK,GAGrC,MADAjL,QAAQC,KAAKF,EAAKwoB,GACZxoB,CACP,CACF,GAGGuxB,GAAczO,OAASgF,OAAM/pB,UAC5B+pB,EAAKC,iBAEFF,GAAeC,GAGvB,MAAM6F,UAAEA,GAAc7F,EAEhBuK,EAAc1E,EAAU5vB,GAE1Bs0B,IACFvK,EAAK9R,IAAM,IACN8R,EAAK9R,OACLqc,GAGLC,IAAe,KACbxK,EAAK9R,IAAM,IACN8R,EAAK9R,IACRuc,WAAY,kBACR5E,EAAUnG,SAAW,GAC1B,IAEJ,EAGGmK,GAAe,EAAG7J,OAAM/pB,SAC5B,IAAI+B,SAASC,IACX,MAAMsyB,EAAcvK,EAAK6F,UAAU5vB,GAE/Bs0B,EACFC,IAAe,KACbxK,EAAKvV,IAAI,gBAAiBxS,GAE1B+nB,EAAK9R,IAAM,IACN8R,EAAK9R,IACRuc,WAAY,kBACTF,EACJ,IAGHtyB,GACD,IAGCuyB,GAAkBptB,GACtBstB,uBAAsB,KACpB3yB,WAAWqF,EAAM,EAAE,IAGjBssB,GAAgBF,IACpBA,EAAetb,IAAM,CACnByc,SAAU,WACVzT,MAAO,GAAGsS,EAAetS,UACzBC,OAAQ,GAAGqS,EAAerS,YAE5BqS,EAAezoB,KAAKmpB,YAAc,EAE3BV,GC9fHoB,GAAUvc,GAAErP,GAAG2I,KAErB,SAASA,MAAQ3K,GACf,IAAKhB,EAAM3E,EAAOnB,GAAW8G,EAEzBvD,EAAWpC,KACbA,EAAQA,KAGV,MAAMuZ,KAAEA,GAASjV,KAEjB,GAAIiV,GAAQ,CAAC,OAAQ,OAAO7a,SAASiG,IAAS,MAAMqG,KAAKhL,GAAQ,CAC/D,MAAMwzB,KAAEA,GAASja,EAEjB,GAAIia,EAAM,CACR,MAAM3R,KAAEA,GAAS,IAAIqC,IAAIlkB,EAAOwzB,GAEhC,OAAOD,GAAQtzB,KAAKqE,KAAMK,EAAMkd,EACjC,CACF,CAED,OAAO0R,GAAQtzB,KAAKqE,QAASqB,EAC/B,CAEA2K,GAAKzB,OAAS0kB,GAAQ1kB,OAEtBmI,GAAErP,GAAG3G,OAAO,CACV,OAAIqoB,GACF,IAAI7lB,EAASc,KAEb,KAAOd,GAAqB,UAAXA,GAAoB,CACnC,GAAmB,WAAfA,EAAOuP,IAAkB,CAC3B,MAAMxR,EAASiC,EAAOob,QAAQyH,MAAMxiB,GAAkB,UAAXA,EAAGkP,MAE9C,GAAIxR,EAAQ,CACViC,EAASjC,EACT,KACD,CACF,CAID,GAFAiC,EAASA,EAAO+V,MAEX/V,EACH,KAEH,CAED,OAAOA,CACR,EACD,QAAIgwB,GAEF,OAAOlvB,KAAKorB,KAAmBprB,KAAK0iB,KAAO,IAC5C,EACD1W,UCnDF,MAAMmjB,GAAgB,CAAA,EAEhB1wB,GAAO,sDAEP2wB,GAAYhsB,OAAO,aACnBisB,GAAWjsB,OAAO,YAExB/J,OAAOoE,eAAeiV,GAAG,kBAAmB,CAC1ChX,MAAM2E,GACG8uB,GAAc9uB,KAKzBqS,GAAErP,GAAGisB,YAAc,SAAUjvB,GAC3B,IAAIoD,EAAQ,KAaZ,OAXAzD,KAAKgP,KAAK,kBAAmB,CAC3B5J,KAAM,CACJmqB,OAAQ,cACRlvB,OACA,QAAAnE,CAASgD,GACPuE,EAAQvE,CACT,GAEH4b,UAAU,IAGLrX,CACT,EAEAiP,GAAE,QAAQ9D,GAAG,mBAAoB/U,IAC/B,MAAMwG,KAAEA,EAAImvB,SAAEA,EAAQD,OAAEA,GAAW11B,EAAEuL,KAE/BqqB,EAAqBN,GAAc9uB,GAEzC,GAAe,gBAAXkvB,EAAJ,CAKA,GAAIE,EAIF,OAHAA,EAAmBL,IAAW3hB,IAAI+hB,GAClCA,EAASH,IAAYI,OACrBD,EAASE,WAOX,GAHEP,GAAc9uB,GAAQ,KAGpBmvB,GAA6B,eAAjBA,EAAS/gB,IAAsB,CAC7C,IAAIkhB,GAAU,EAGdt2B,OAAO+G,KAAKovB,EAAS7rB,IAAO3G,SAAS1C,IAC/Bs1B,GAAYx1B,SAASE,KAGzBk1B,EAASl1B,QAAOmN,EAEhBkoB,GAAU,EAAI,IAGZA,GACFnzB,QAAQC,KAAK/B,EAAW,cAAe,CAAE2F,KAAMmvB,EAASnvB,OAASnB,OAEpE,CA5BA,MAFCrF,EAAEuL,KAAKlJ,SAASuzB,EA8BjB,IAGH,MAAMI,GAAc,CAElB,OAAAnuB,CAAQouB,GACF9vB,KAAKqvB,KAAarvB,KAAKqvB,MAAcS,IAIrC9vB,KAAKqvB,KACPrvB,KAAK+vB,SASH/vB,KAAKK,MACPL,KAAKgP,KAAK,kBAAmB,CAC3B5J,KAAM,CACJ/E,KAAML,KAAKK,KACXmvB,SAAUxvB,MAEZ8a,UAAU,IAGf,EACD,MAAAiV,GACmB/vB,KAAKqvB,IACbD,IAAWltB,OAAOlC,MAC3BA,KAAKqvB,IAAY,IAClB,GAGGW,GAAc,CAClB,IAAA3vB,GAEOL,KAAKiwB,SAKVzzB,QAAQC,KACN/B,EAAW,sBAAuB,CAChC+Y,SAAU,KAAKzT,KAAKyO,UAEtBzO,KAAKzB,KAGPyB,KAAK0B,WAXH1B,KAAKiwB,QAAU,CAYlB,GAGGL,GAAc,CAClB,MACA,OACA,QACA,QACA,KACA,cACA,WAGIM,GAAkB,CACtBzhB,IAAK,aACPhQ,KAAEA,GACAuU,MAAO,CACL3S,KAAM,MAERyB,MAAO,IACFkuB,IAELpzB,MAAO,IACFizB,GACH,aAAIM,GACF,MAAO,IAAI1wB,MAAMC,KAAKM,KAAKovB,KAC5B,EACD,YAAIU,GACF,OAAO9vB,KAAKqvB,GACb,EACD,QAAAK,GAEE1vB,KAAKmwB,UAAUnzB,SAASnD,GAAMA,EAAE61B,YACjC,EACD,YAAAU,CAAa/vB,EAAM3E,EAAO20B,GACxB,GAAIA,QAAyB5oB,IAAfzH,KAAKK,IAAsC,OAAfL,KAAKK,GAAgB,CAC7D,GAAI3E,QAAuC,CAEzC,IAAI40B,EAAiBtwB,KAAK8vB,SAC1B,KAAO,MAACp0B,GAA0C40B,KAChD50B,EAAQ40B,EAAejwB,KAIvBiwB,EAAiBA,EAAeR,QAEnC,CAED9vB,KAAKovB,IAAWpyB,SAASwyB,IAEnBA,EAASY,aACXZ,EAASY,aAAa/vB,EAAM3E,GAExB8zB,EAASnvB,KAAU3E,IACrB8zB,EAASnvB,GAAQ3E,EAEpB,GAEJ,CACF,GAEH,KAAA0X,GACEpT,KAAKovB,IAAa,IAAIvpB,IAEtB7F,KAAK4O,GAAG,mBAAoB/U,IAC1B,GAAIA,EAAEqF,SAAWrF,EAAEsG,cAEjB,OAGF,MAAME,KAAEA,EAAImvB,SAAEA,EAAQD,OAAEA,GAAW11B,EAAEuL,KAErC,GAAI/E,GAAQL,KAAKK,OAASA,GAAmB,gBAAXkvB,EAIhC,OAFA11B,EAAEuL,KAAKlJ,SAAS8D,WAChBnG,EAAEghB,kBAIAxa,GAAQL,KAAKK,OAASA,IACxBL,KAAKovB,IAAW3hB,IAAI+hB,GACpBA,EAASH,IAAYrvB,KAGrBnG,EAAEghB,kBAEF2U,EAASE,WACV,IAGH1vB,KAAK8B,OAAOjI,IACV,GAAIA,EAAEqF,SAAWc,MAAmB,QAAXnG,EAAEiC,KAAgB,CAEzC,MAAMuE,KAAEA,EAAI3E,MAAEA,GAAU7B,EAEnB+1B,GAAYx1B,SAASiG,IACxBL,KAAKowB,aAAa/vB,EAAM3E,EAAO,EAElC,IAEJ,EACD,QAAA2Y,GAEE,MAAM0E,EAAc,GAcpB,GAbAtZ,MAAMC,KAAKM,KAAKzB,IAAIwN,YAAY/O,SAASyF,IACvC,MAAMpC,KAAEA,EAAI3E,MAAEA,GAAU+G,EAEnBmtB,GAAYx1B,SAASiG,KACxBL,KAAKhC,EAAkBqC,IAAS3E,EAChCqd,EAAYhY,KAAKV,GAClB,IAEH0Y,EAAY/b,SAASqD,GAASL,KAAKzB,IAAI4M,gBAAgB9K,KAEvDL,KAAK0B,UAGD1B,KAAK0S,EAAE,QAAS,CAElB,MAAMnU,IAAEA,GAAQyB,KAChBP,MAAMC,KAAKnB,EAAIqJ,UAAU5K,SAASuzB,GAChCC,GAAgBD,EAASvwB,OAE5B,CACF,GAGH0S,GAAEc,SAAS,CACT/E,IAAK,kBACLuE,MAAO,CACL3S,KAAM,MAERyB,MAAO,CACL,IAAAzB,GAEE,IAAKL,KAAKiwB,QAER,YADAjwB,KAAKiwB,QAAU,GAIjB,MAAM1zB,EAAMlC,EAAO,4BAA6B,CAC9CgG,KAAML,KAAKK,OAKb,MAFA7D,QAAQC,KAAKF,EAAKyD,KAAKzB,KAEjBhC,CACP,GAEHK,MAAO,CACL,OAAA8E,GAEC,EACDguB,SAAUQ,GAAgBtzB,MAAM8yB,SAChCU,aAAcF,GAAgBtzB,MAAMwzB,aACpC,aAAID,GACF,MAAO,IAAI1wB,MAAMC,KAAKM,KAAKovB,KAC5B,GAEH,KAAAhc,GACE8c,GAAgB9c,MAAMzX,KAAKqE,KAC5B,EACD,QAAAqU,GACE,GAAI8a,GAAcnvB,KAAKK,MAAO,CAC5B,MAAM9D,EAAMlC,EAAO,sBAAuB,CAAEgG,KAAML,KAAKK,OAQvD,MAPA7D,QAAQC,KACNF,EACA,SACA4yB,GAAcnvB,KAAKK,MACnB,aACAL,KAAKzB,KAEDhC,CACP,CAED,MAAMk0B,EAAyC,OAA7BtB,GAAcnvB,KAAKK,MAErC8uB,GAAcnvB,KAAKK,MAAQL,KAEvBywB,GAEFD,GAAgB9xB,SAASgyB,KAAM1wB,MAGjCkwB,GAAgB7b,SAAS1Y,KAAKqE,KAC/B,EACD,QAAAwU,GACM2a,GAAcnvB,KAAKK,QAAUL,OAC/BmvB,GAAcnvB,KAAKK,MAAQ,KAC3BL,KAAKovB,IAAWpyB,SAASnD,IACvBA,EAAEk2B,SACFl2B,EAAE61B,UAAU,IAGjB,IAGHhd,GAAEc,SAAS0c,IAcX,MAAMM,GAAkB,CAACjyB,EAAKoyB,EAAcC,GAAW,KACrD,GAAoB,oBAAhBryB,EAAIuN,QAAR,CAEO,GAAoB,eAAhBvN,EAAIuN,SAA4C,eAAhBvN,EAAIuN,QAA0B,CACvE,MAAMiC,EAAO2E,GAAEnU,GACf,GAAIwP,EAAK1N,OAASswB,EAAatwB,KAI7B,OAFA0N,EAAKrM,QAAQivB,QACb5iB,EAAK2hB,UAGR,KAAM,IAAoB,SAAhBnxB,EAAIuN,SAAsB8kB,EAAU,CAC7C,MAAMC,EAAWtyB,EAAIuL,aAAa,SAAW,GACvCmL,EAAO1W,GAAK6b,eAAenF,KAQjC,YAPAxV,MAAMC,KAAKuV,EAAKrN,UAAU5K,SAASnD,KACZA,EAAEiQ,aAAa,SAAW,MAC1B+mB,GAEnBL,GAAgB32B,EAAG82B,EACpB,GAGP,CAAapyB,EAAI2b,YAEbza,MAAMC,KAAKnB,EAAI2b,WAAWtS,UAAU5K,SAASuzB,GAC3CC,GAAgBD,EAASI,GAAc,IAE1C,CAGDlxB,MAAMC,KAAKnB,EAAIqJ,UAAU5K,SAASuzB,GAChCC,GAAgBD,EAASI,IAJ1B,CAKA,EAGHje,GAAEc,SAAS,CACT/E,IAAK,aACPhQ,KAAEA,GACAuU,MAAO,CACL3S,KAAM,MAERyB,MAAO,IACFkuB,IAELpzB,MAAO,IACFizB,GACH,YAAIC,GACF,OAAO9vB,KAAKqvB,GACb,EAED,QAAAK,GACE,MAAMtqB,EAAO,CAAA,EACPhF,EAAO,GAEb,IAAI0vB,SAAEA,GAAa9vB,KACnB,KAAO8vB,GACLz2B,OAAO+G,KAAK0vB,EAASnsB,IAAO3G,SAAS1C,IACvB,QAARA,GAAyB,SAARA,SAIHmN,IAAdrC,EAAK9K,IAAoC,OAAd8K,EAAK9K,KAClC8K,EAAK9K,GAAOw1B,EAASx1B,GACrB8F,EAAKW,KAAKzG,IACX,IAGHw1B,EAAWA,EAASA,SAItBz2B,OAAO+G,KAAKJ,KAAK2D,IAAO3G,SAAS1C,IAC3Bs1B,GAAYx1B,SAASE,IAAQ8F,EAAKhG,SAASE,KAI/C0F,KAAK1F,QAAOmN,EAAS,IAIvB,IAAK,IAAKnN,EAAKoB,KAAUrC,OAAO6L,QAAQE,GACtCpF,KAAK1F,GAAOoB,CAEf,GAEH,KAAA0X,GAEE,MAAM0d,EAAa9wB,KAAK+wB,eAAiB13B,OAAO+lB,OAAOpf,KAAKzB,IAAIwN,YAC7D5C,KAAKtP,GAAMA,EAAEwG,OACbmC,QAAQ3I,IAAO+1B,GAAYx1B,SAASP,KAGvCmG,KAAK8B,OAAOjI,IACV,GAAIA,EAAEqF,SAAWc,MAAmB,QAAXnG,EAAEiC,KAAgB,CACzC,MAAMmY,EAAW5V,EAAWxE,EAAEwG,MAE1BywB,EAAU12B,SAAS6Z,KACL,OAAZpa,EAAE6B,YAA8B+L,IAAZ5N,EAAE6B,MACxBsE,KAAKzB,IAAI4M,gBAAgB8I,GAEzBjU,KAAKzB,IAAI6N,aAAa6H,EAAUpa,EAAE6B,OAGvC,IAEJ,EACD,QAAA2Y,GACErU,KAAK0B,SACN,IC1bH,MAAMsvB,GAwIN,WACE,IAEE,MAAM3E,EAAY3tB,SAASC,cAAc,OACnCsyB,EAAQvyB,SAASC,cAAc,OAGrC0tB,EAAUra,MAAMkf,QAAU,+MAU1BD,EAAMjf,MAAMkf,QAAU,4CAKtB,MAAMlf,EAAQtT,SAASC,cAAc,SACrCqT,EAAMhI,YAAc,6KASpBqiB,EAAU8E,GAAK,2BACfF,EAAME,GAAK,uBACX9E,EAAUrf,YAAYikB,GACtBvyB,SAAS0yB,gBAAgBpkB,YAAYgF,GACrCtT,SAAS0yB,gBAAgBpkB,YAAYqf,GAGrC,MAAMgF,EAAc9U,OACjBrK,iBAAiB+e,GACjBK,WAAWl3B,SAAS,kBAMvB,OAHAsE,SAAS0yB,gBAAgBvnB,YAAYmI,GACrCtT,SAAS0yB,gBAAgBvnB,YAAYwiB,GAE9BgF,CACR,CAAC,MAAO90B,GAEP,OADAC,QAAQvC,MAAMsC,IACP,CACR,CACH,CA5L4Bg1B,GAG5B7e,GAAEc,SAAS,CACT/E,IAAK,YACLhQ,KAAM,kDACN2G,KAAM,CAAE,EACRxI,MAAO,CACL,kBAAA40B,GAEOxxB,KAAKyxB,UACRzxB,KAAKyxB,QAAU/e,GAAE,mBACjB1S,KAAKgY,OAAOhY,KAAKyxB,UAGnB,MAAM3J,EAAe9nB,KAAK0xB,iBAGpB1e,EAAQvT,MAAMC,KAAKM,KAAKzB,IAAIwN,YAElC/L,KAAKyxB,QAAQrZ,KAAO,cAAcpF,EAC/B7J,KAAK6C,GAAS,WAAWA,EAAK3L,SAAS2L,EAAKtQ,WAC5CmL,KAAK,aAAaihB,KAGrB9nB,KAAKoY,KAAO,EACb,EACD,UAAAuZ,GACM3xB,KAAK4xB,SAAWZ,KAKpBhxB,KAAKoY,KAAO,kBACVpY,KAAK0xB,mCAGP1xB,KAAK4xB,SAAU,EAChB,EACD,aAAAC,GACO7xB,KAAK4xB,UAAWZ,KAIrBhxB,KAAKoY,KAAO,GAEZpY,KAAK4xB,SAAU,EAChB,GAEH,QAAAvd,GAEOrU,KAAK0xB,mBACR1xB,KAAK0xB,iBAAmB1xB,KAAK0S,EAAE,SAASqH,KACxC/Z,KAAKoY,KAAO,IAGV4Y,GACFhxB,KAAKwxB,qBAELM,GAAUrkB,IAAIzN,KAEjB,EACD,QAAAwU,GACMwc,GACEhxB,KAAKyxB,UACPzxB,KAAKyxB,QAAQjoB,SACbxJ,KAAKyxB,QAAU,MAGjBK,GAAU5vB,OAAOlC,KAEpB,IAGH,MAAM8xB,GAAY,IAAIjsB,IACtB,CACE,IAAI7C,EAAQ,KACZ,MAAM+uB,EAAiB1S,UACrBljB,aAAa6G,GACb,IAAK,MAAMgvB,KAAMF,GAAW,CAC1B,MAAM70B,EAASwC,MAAMC,KAAKsyB,EAAGzzB,IAAIwN,YAAYkmB,OAAOp4B,GACpCqY,iBAAiB8f,EAAGzzB,KAAK4T,iBAAiB,KAAKtY,EAAEwG,UAE9CxG,EAAE6B,QAGjBgX,GAAEwf,WAAWC,aAET,IAAI91B,SAASC,GAAYF,WAAWE,EAASoW,GAAEwf,WAAWC,SAG9Dl1B,EACF+0B,EAAGL,aAEHK,EAAGH,eAEN,CAED7uB,EAAQ5G,WAAW21B,EAAgBrf,GAAEwf,WAAWE,MAAQ,IAAI,EAGzDpB,IAEH50B,YAAW,KACT21B,GAAgB,GACf,KAGL14B,OAAO4L,iBAAiByN,GAAG,CAEzBwf,WAAY,CACVx2B,MAAK,KACCs1B,KAKJjC,uBAAsB,KACpBgD,GAAgB,KAGX,MAKRf,KAEHte,GAAEwf,WAAWC,MAAQ,EAEzB,CChIA,MAAME,GAAoB5a,IACxB,MAAM6a,EAAe,CAAC7a,GAGtB,GAAuB,QAAnBA,EAAYhJ,IAAe,CAC7B,IAAIyM,EAAQqX,GAAS9a,EAAYlB,MACjC+b,EAAavxB,QAAQma,EACzB,MAAS,GAAuB,aAAnBzD,EAAYhJ,IAAoB,CACzC,IAAIyM,EAAQqX,GAAS9a,EAAYlB,MACjC+b,EAAavxB,QAAQma,GACrB,IAAIG,EAAQmX,GAAS/a,EAAYvB,MACjCoc,EAAanoB,WAAWkR,EACzB,CAGD,MAAMoX,EAAUH,EAAa,GACV,QAAfG,EAAQhkB,KACVtS,aAAas2B,EAAQC,gBACrBD,EAAQC,eAAiBt2B,YAAW,KAElC,IAAIu2B,EAAkB,KACtB,IAAK,IAAIvuB,EAAI,EAAGA,EAAIkuB,EAAa7xB,OAAQ2D,IAAK,CAC5C,MAAM7E,EAAK+yB,EAAaluB,GACxB,GAAc,QAAV7E,EAAGkP,KAA2B,aAAVlP,EAAGkP,KACzB,GAAIlP,EAAG7D,MAAO,CACZi3B,EAAkBpzB,EAClB,KACD,OAGDozB,EAAkBpzB,CAErB,CAGGozB,IACFC,GAAcD,GACdA,EAAgB3mB,KAAK,UAAW,KAIlCsmB,EAAat1B,SAASuC,IAChBA,IAAOozB,IACTpzB,EAAGyM,KAAK,UAAW,MACnB6mB,GAAatzB,GACd,GACD,GACD,IAGH/C,QAAQvC,MAAM,iCAAkCq4B,EACjD,EAIGM,GAAiBnb,IACrB,GAAIA,EAAYP,WAEd,OAGF,MAAMja,EAAS4Z,GAAcY,EAAYlZ,KAEzC,IAAKtB,EACH,OAGF,MAAMiC,OAAEA,EAAMkG,KAAEA,EAAIsD,MAAEA,GAAUzL,EAEhCwa,EAAYW,KAAOX,EAAYI,aAE/B3P,EAAO,CAAEhJ,SAAQkG,OAAMsD,UAEvB+O,EAAYP,YAAa,EAGzBO,EAAYzI,KAAK,WAAY,CAC3BE,SAAS,GACT,EAIE2jB,GAAgBpb,IACfA,EAAYP,aAKjBO,EAAYlZ,IAAI0R,YAAYjT,SAASuC,GAAOuY,GAAUvY,KAGtDkY,EAAYW,KAAO,GAEnBX,EAAYP,YAAa,EAAK,EAI1Bqb,GAAYhc,IAChB,MAAM2E,EAAQ,GACd,KAAO3E,IAAsB,cAAbA,EAAK9H,KAAoC,WAAb8H,EAAK9H,OAC/CyM,EAAMna,KAAKwV,GACK,UAAZA,EAAK9H,MAGT8H,EAAOA,EAAKA,KAEd,OAAO2E,CAAK,EAIRsX,GAAYtc,IAChB,MAAMmF,EAAQ,GACd,KAAOnF,IAAqB,QAAZA,EAAKzH,KAA6B,aAAZyH,EAAKzH,OACzC4M,EAAMlR,QAAQ+L,GACE,QAAZA,EAAKzH,MAGTyH,EAAOA,EAAKA,KAEd,OAAOmF,CAAK,EAGRyX,GAAc,SAAUn2B,GACxBA,EAAM,GAAG6T,GAAG,wBACd7T,EAAMkb,aAAelb,EAAM,GAAGyb,KAAKrL,OAEnCpQ,EAAMkb,aAAelb,EAAMyb,KAAKrL,OAElCpQ,EAAMyb,KAAO,EACf,EAEM3Z,GAAO,uDAEbiU,GAAEc,SAAS,CACT/E,IAAK,OACLhQ,QACA2G,KAAM,CACJ1J,MAAO,MAEToG,MAAO,CACL,KAAApG,GACE22B,GAAiBryB,KAClB,GAEH,OAAAgU,GACE8e,GAAY9yB,KACb,IAGH0S,GAAEc,SAAS,CACT/E,IAAK,YACLhQ,QACA2G,KAAM,CACJ1J,MAAO,MAEToG,MAAO,CACL,KAAApG,GACE22B,GAAiBryB,KAClB,GAEH,OAAAgU,GACE8e,GAAY9yB,KACb,IAGH0S,GAAEc,SAAS,CACT/E,IAAK,SACLhQ,QACA,OAAAuV,GACE8e,GAAY9yB,KACb,ICxKH0S,GAAEc,SAAS,CACT/E,IAAK,SACLhQ,KAAM,uDACN2G,KAAM,CACJ1J,MAAO,MAETkB,MAAO,CACL,WAAAm2B,GACE,MAAM9zB,EAAMe,KAAKtE,MACXiR,EAAW3M,KAAKgM,KAAK,QAE3B,IACG/M,IACAA,EAAIwB,QACJT,KAAKgzB,eAAiBhzB,KAAKgzB,gBAAkBrmB,EAO9C,YAJAlN,MAAMC,KAAKM,KAAKzB,IAAI0R,YAAYjT,SAASnD,IACvCie,GAAUje,GACVA,EAAE2P,QAAQ,IAKd,MAAMpE,KAAEA,EAAIlG,OAAEA,EAAMwJ,MAAEA,EAAQ,CAAE,GAAKmO,GAAc7W,KAAKzB,KAElDsS,EAAU7Q,KAAKgM,KAAK,aAAe,MAEzC,IAAIuM,EAAa7P,EAAMiE,GAEvB,IAAK4L,EAAY,CAEf,IAAIvY,KAAK6X,aAGP,MAAM,IAAI/c,MAAM,gCAAkC6R,GAFlD4L,EAAa7F,GAAE,aAAa1S,KAAK6X,2BAA2BtZ,GAI/D,CAID,GAFAyB,KAAKgzB,cAAgBrmB,GAEhB3M,KAAKS,OAAQ,CAEhB,MAAM+O,EAAO9Q,SAAS+Q,yBAGtB,IAAK,IAAIrL,EAAI,EAAGwC,EAAM3H,EAAIwB,OAAQ2D,EAAIwC,EAAKxC,IAAK,CAC9C,MAAM3B,EAAOxD,EAAImF,GAEX2J,EAAOiL,GACXvW,EACAiG,EACA6P,EACAnT,EAAK6T,OAAS7T,EACdhB,EACAyM,GAGFrB,EAAKxC,YAAYe,EAAKxP,IACvB,CAGD,YADAyB,KAAKzB,IAAIyO,YAAYwC,EAEtB,CAED,MAAMyjB,EAAY,CAACp5B,EAAGuK,KACpB,MAAM9J,EAAMT,EAAEgX,GAEd,OAAIvW,QACET,EAAE6I,IACG7I,EAAE6I,IAGJ,GAAG0B,KAAKvK,IAGVS,CAAG,EAIN44B,EAAaj0B,EAAIkK,IAAI8pB,GAErBE,EAAe1zB,MAAMC,KAAKM,KAAKzB,IAAIqJ,UAGzC,IAAK,IAAIxD,EAAI,EAAGA,EAAI+uB,EAAa1yB,OAAQ2D,IAAK,CAC5C,MAAMvK,EAAIs5B,EAAa/uB,GACjBgvB,EAAev5B,EAAE4R,cAEjB4nB,EAAgBJ,EAAUG,EAAa9Z,MAAOlV,GAG/C8uB,EAAW94B,SAASi5B,KACvBx5B,EAAE2P,SACFsO,GAAUje,GAEb,CAED,MAAM+N,SAAEA,GAAa5H,KAAKzB,IAG1B,IAAI+0B,EAAU,GACd,MAAMC,EAAiB,KACrBD,EAAU7zB,MAAMC,KAAKkI,GAAUuB,KAAI,CAACtP,EAAGuK,IACrC6uB,EAAUp5B,EAAE4R,cAAc6N,MAAOlV,IAClC,EAEHmvB,IAEA,MAAMC,EAASxzB,KAAKzB,IAGpB,IAAK,IAAI6F,EAAI,EAAGwC,EAAM3H,EAAIwB,OAAQ2D,EAAIwC,EAAKxC,IAAK,CAC9C,MAAM3B,EAAOxD,EAAImF,GAEXqvB,EAASR,EAAUxwB,EAAM2B,GAGzBjF,EAAQm0B,EAAQl0B,QAAQq0B,GAE9B,GAAIt0B,GAAS,EAAG,CAEd,MAAM4O,EAAOpG,GAAKC,EAASzI,IAGvByI,EAASxD,KAAO2J,EAAKxP,MACvBi1B,EAAO5pB,aAAamE,EAAKxP,IAAKqJ,EAASxD,IACvCmvB,KAIExlB,EAAKqL,OAAOE,QAAU7W,IACxBsL,EAAKqL,OAAOE,MAAQ7W,GAElBsL,EAAKqL,OAAOI,SAAWpV,IACzB2J,EAAKqL,OAAOI,OAASpV,EAEjC,KAAe,CAEL,MAAM2J,EAAOiL,GACXvW,EACAiG,EACA6P,EACAnT,EAAK6T,OAAS7T,EACdhB,EACAyM,GAGF2iB,EAAO5pB,aAAamE,EAAKxP,IAAKqJ,EAASxD,IACvCmvB,GACD,CACF,CACF,GAEH,KAAAngB,GACEpT,KAAKmC,WAAWtI,IACVA,EAAEoG,YAAY,UAEhBD,KAAK+yB,aACN,GAEJ,EACD,QAAA1e,GACMrU,KAAKtE,OACPsE,KAAK+yB,aAER,EACD,OAAA/e,GACE,IAAI0f,EAAa,GAGfA,EADE1zB,KAAK,GAAGwQ,GAAG,wBACAxQ,KAAK,GAAGoY,KAAKrL,OAEb/M,KAAKoY,KAAKrL,OAIzB,MACM0e,EADO/Y,GAAE,kBAAkBghB,sBACRn1B,IAAIK,QAAQgJ,SAAS,GAE9C,GACE6jB,EAAY7jB,SAASnH,OAAS,GACG,IAAhCgrB,EAAY7jB,SAASnH,QAAgBgrB,EAAY5iB,UAAUkE,OAC5D,CACA,MAAMxQ,EAAMlC,EAAO,oBACnBmC,QAAQC,KAAKF,EAAKyD,KAAKzB,IAAK,CAC1BK,QAASoB,KAAKoY,KAAKrL,SAGrB2mB,EAAa,mCAAmCA,SACjD,CAED1zB,KAAK6X,aAAe6b,EAEpB1zB,KAAKoY,KAAO,EACb,IAIH,MAAMub,GAAkB7rB,EAAcE,aACtCF,EAAcE,aAAgBnO,IAC5B85B,GAAgB95B,GAChB,MAAM4O,SAAEA,EAAQC,MAAEA,GAAU7O,EAC5B+5B,GAASnrB,GACTpP,OAAO+lB,OAAO1W,GAAO1L,SAASyB,GAASm1B,GAASn1B,IAAM,EAIxD,MAAMo1B,GAAe,CAAC,SAAU,OAAQ,YAAa,UAExCD,GAAYnrB,IACVhJ,MAAMC,KACjB+I,EAAS7J,QAAQe,iBAAiBk0B,GAAahtB,KAAK,OAMjD7J,SAASnD,IACZ,MAAMi6B,EAAaj6B,EAAEgP,UACrBhP,EAAEgP,UAAY,wBAAwBirB,eACtCF,GAAS/5B,EAAE+N,SAAS,GAAG,GACvB,ECvNJ8K,GAAEqhB,QADc,eACIl5B,QAAQ,UAAW,IAEvC,IAAIysB,IAAU,EAEd,IACE,MAAM0M,EAAU,oBAAAt1B,UAAA,oBAAA2iB,SAAA4S,QAAA,OAAAC,cAAAC,YAAA5W,KAAA,oBAAA7e,SAAA2iB,SAAA9D,KAAA6W,GAAA,WAAAA,EAAAtoB,QAAA1N,eAAAg2B,EAAA1R,KAAA,IAAA9C,IAAA,aAAAlhB,SAAAwiB,SAAA3D,KAChB+J,GAAU0M,EAAQ55B,SAAS,SAC7B,CAAE,MAAOmC,GACP+qB,IAAU,CACZ,CAEAjuB,OAAOoE,eAAeiV,GAAG,YAAa,CACpCpV,IAAK,IAAMgqB,KAGS,oBAAX/K,SACTA,OAAO7J,EAAIA,IAGbrZ,OAAOoE,eAAe/E,WAAY,MAAO,CACvCgD,MAAOgX"}