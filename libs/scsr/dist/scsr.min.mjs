//! ofa.js - v4.3.24 https://github.com/kirakiray/ofa.js  (c) 2018-2023 YAO
(()=>{async function t(){const t=$("o-app");$("o-app template[page]")?.remove();let e=!1;window.addEventListener("hashchange",(r=>{if(e){const e=new URL(location.href),{routers:r}=t;history.replaceState({routerMode:1,ignore:1,routers:r.map((t=>({src:t.src})))},"",e.hash)}})),t.on("page-loaded",(t=>{const{_defaults:e}=$(t.target);if("string"==typeof e.title){const t=$("head title");t&&(t.text=e.title)}})),history?.state?.routerMode||t.push(`<o-page src="${location.pathname}"></o-page>`),function({app:t,getStateUrl:e,fixStateUrl:r}){let o,n,s,a,i;history.state&&history.state.routerMode&&(t.routers=history.state.routers),t.on("router-change",(r=>{let i="pushState";const{name:c,delta:l,src:h}=r.data||{};switch(c){case"replace":i="replaceState";case"goto":const{routers:r}=t,{pathname:c,search:u}=new URL(h,location.href);if(n)return void(n=null);const p=e?e(c,u,i):`#${c}${u}`;a&&(i="replaceState",a=null),history[i]({routerMode:1,routers:r.map((t=>({src:t.src})))},"",p);break;case"back":if(s)return void(s=null);o=1,history.go(-l)}})),window.addEventListener("popstate",i=e=>{const{state:i}=e;if(o)return void(o=null);if(!i){if(r){const e=r();if(e)return a=1,void t.goto(e);if(!1===e)return}return s=1,void t.back(t.routers.length-1)}if(!i.routerMode||i.ignore)return;const{routers:c}=i,{routers:l}=t;if(c.length<l.length)s=1,t.back(l.length-c.length);else if(c.length>l.length){const e=c.slice(),r=e.pop();if(e.length>l.length){const r=e.slice(t._history.length);t._history.push(...r)}n=1,t.goto(r.src)}else JSON.stringify(c)!==JSON.stringify(l)&&console.error("o-router error occurred")})}({app:t,getStateUrl:(t,e)=>`${t}${e}`,fixStateUrl(t){if(new URL(location.href).hash)return e=!0,setTimeout((()=>e=!1)),!1}})}"complete"===document.readyState?t():$(window).one("load",(()=>{t()}))})();
//# sourceMappingURL=scsr.min.mjs.map
