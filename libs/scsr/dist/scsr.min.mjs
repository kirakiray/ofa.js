//! ofa - v4.0.0 https://github.com/kirakiray/ofa.js  (c) 2018-2023 YAO
(()=>{async function t(){const t=$("o-app");$("o-app template[page]").remove(),t.on("page-loaded",(t=>{const{_defaults:e}=$(t.target);if("string"==typeof e.title){const t=$("head title");t&&(t.text=e.title)}})),t.push(`<o-page src="${location.pathname}"></o-page>`),function(t,e){history.state&&history.state.routerMode&&(t.routers=history.state.routers);let o,r,s,n=0;t.on("router-change",(s=>{let a="pushState";switch(s.name){case"replace":a="replaceState";case"goto":const{routers:c}=t,{pathname:l,search:i}=new URL(s.src,location.href);if(o)return void(o=null);const h=e?e(l,i,a):`#${l}${i}`;history[a]({routerMode:1,routers:c.map((t=>({tag:t.tag,src:t.src})))},"",h);break;case"back":if(r)return void(r=null);n=1,history.go(-s.delta)}})),window.addEventListener("popstate",s=e=>{const{state:s}=e;if(n)return void(n=0);if(!s)return r=1,void t.back(t.routers.length-1);const{routers:a}=s,{routers:c}=t;if(a.length<c.length)r=1,t.back(c.length-a.length);else if(a.length>c.length){const e=a.slice(),r=e.pop();if(e.length>c.length){const o=e.slice(t._history.length);t._history.push(...o)}o=1,t.goto(r.src)}else console.error("o-router error occurred")})}(t,((t,e)=>`${t}${e}`))}"complete"===document.readyState?t():$(window).one("load",(()=>{t()}))})();
//# sourceMappingURL=scsr.min.mjs.map
