//! ofa.js - v4.2.4 https://github.com/kirakiray/ofa.js  (c) 2018-2023 YAO
!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";(()=>{async function e(){const e=$("o-app");$("o-app template[page]").remove();let t=!1;window.addEventListener("hashchange",(r=>{if(t){const t=new URL(location.href),{routers:r}=e;history.replaceState({routerMode:1,ignore:1,routers:r.map((e=>({src:e.src})))},"",t.hash)}})),e.on("page-loaded",(e=>{const{_defaults:t}=$(e.target);if("string"==typeof t.title){const e=$("head title");e&&(e.text=t.title)}})),e.push(`<o-page src="${location.pathname}"></o-page>`),function({app:e,getStateUrl:t,fixStateUrl:r}){let o,n,s,a,i;history.state&&history.state.routerMode&&(e.routers=history.state.routers),e.on("router-change",(r=>{let i="pushState";switch(r.name){case"replace":i="replaceState";case"goto":const{routers:c}=e,{pathname:l,search:u}=new URL(r.src,location.href);if(n)return void(n=null);const h=t?t(l,u,i):`#${l}${u}`;a&&(i="replaceState",a=null),history[i]({routerMode:1,routers:c.map((e=>({src:e.src})))},"",h);break;case"back":if(s)return void(s=null);o=1,history.go(-r.delta)}})),window.addEventListener("popstate",i=t=>{const{state:i}=t;if(o)return void(o=null);if(!i){if(r){const t=r();if(t)return a=1,void e.goto(t);if(!1===t)return}return s=1,void e.back(e.routers.length-1)}if(!i.routerMode||i.ignore)return;const{routers:c}=i,{routers:l}=e;if(c.length<l.length)s=1,e.back(l.length-c.length);else if(c.length>l.length){const t=c.slice(),r=t.pop();if(t.length>l.length){const r=t.slice(e._history.length);e._history.push(...r)}n=1,e.goto(r.src)}else JSON.stringify(c)!==JSON.stringify(l)&&console.error("o-router error occurred")})}({app:e,getStateUrl:(e,t)=>`${e}${t}`,fixStateUrl(e){if(new URL(location.href).hash)return t=!0,setTimeout((()=>t=!1)),!1}})}"complete"===document.readyState?e():$(window).one("load",(()=>{e()}))})()}));
//# sourceMappingURL=scsr.min.js.map
