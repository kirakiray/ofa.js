//! ofa.js - v4.1.6 https://github.com/kirakiray/ofa.js  (c) 2018-2023 YAO
!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";(()=>{async function t(){const t=$("o-app");$("o-app template[page]").remove(),t.on("page-loaded",(t=>{const{_defaults:e}=$(t.target);if("string"==typeof e.title){const t=$("head title");t&&(t.text=e.title)}})),t.push(`<o-page src="${location.pathname}"></o-page>`),function({app:t,getStateUrl:e,fixStateUrl:o}){let r,n,a,s,i;history.state&&history.state.routerMode&&(t.routers=history.state.routers),t.on("router-change",(o=>{let i="pushState";switch(o.name){case"replace":i="replaceState";case"goto":const{routers:c}=t,{pathname:l,search:u}=new URL(o.src,location.href);if(n)return void(n=null);const p=e?e(l,u,i):`#${l}${u}`;s&&(i="replaceState",s=null),history[i]({routerMode:1,routers:c.map((t=>({tag:t.tag,src:t.src})))},"",p);break;case"back":if(a)return void(a=null);r=1,history.go(-o.delta)}})),window.addEventListener("popstate",i=e=>{const{state:i}=e;if(r)return void(r=null);if(!i){if(o){const e=o(location.href);if(e)return s=1,void t.goto(e)}return a=1,void t.back(t.routers.length-1)}const{routers:c}=i,{routers:l}=t;if(c.length<l.length)a=1,t.back(l.length-c.length);else if(c.length>l.length){const e=c.slice(),o=e.pop();if(e.length>l.length){const o=e.slice(t._history.length);t._history.push(...o)}n=1,t.goto(o.src)}else console.error("o-router error occurred")})}({app:t,getStateUrl:(t,e)=>`${t}${e}`})}"complete"===document.readyState?t():$(window).one("load",(()=>{t()}))})()}));
//# sourceMappingURL=scsr.min.js.map
