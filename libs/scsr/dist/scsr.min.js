//! ofa.js - v4.4.16 https://github.com/kirakiray/ofa.js  (c) 2018-2024 YAO
!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";const t="http://127.0.0.1:5793/errors",e={};globalThis.navigator&&navigator.language&&fetch(`${t}/${navigator.language.toLowerCase()}.json`).catch((()=>fetch(`${t}/default.json`))).then((t=>t.json())).catch((t=>(console.error(t),{}))).then((t=>{Object.assign(e,t)})),"undefined"!=typeof document&&document.currentScript&&document.currentScript.attributes.hasOwnProperty("debug"),new Set;function o({app:t,getStateUrl:e,fixStateUrl:o}){let r,n,a,s,i;history.state&&history.state.routerMode&&(t.routers=history.state.routers),t.on("router-change",(o=>{let i="pushState";const{name:c,delta:l,src:u}=o.data||{};switch(c){case"replace":i="replaceState";case"goto":const{routers:o}=t,{pathname:c,search:h,origin:g}=new URL(u,location.href);if(n)return void(n=null);let d="";d=e?e(c,h,i):location.origin===g?`#${c}${h}`:`#${g}${c}${h}`,s&&(i="replaceState",s=null),history[i]({routerMode:1,routers:o.map((t=>({src:t.src})))},"",d);break;case"back":if(a)return void(a=null);r=1,history.go(-l)}})),window.addEventListener("popstate",i=e=>{const{state:i}=e;if(r)return void(r=null);if(!i){if(o){const e=o();if(e)return s=1,void l(t,(()=>t.goto(e)));if(!1===e)return}return a=1,void l(t,(()=>t.back(t.routers.length-1)))}if(!i.routerMode||i.ignore)return;const{routers:c}=i,{routers:u}=t;if(c.length<u.length)a=1,l(t,(()=>t.back(u.length-c.length)));else if(c.length>u.length){const e=c.slice(),o=e.pop();if(e.length>u.length){const o=e.slice(t._history.length);t._history.push(...o)}n=1,l(t,(()=>t.goto(o.src)))}else JSON.stringify(c)!==JSON.stringify(u)&&console.error("o-router error occurred")});const c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=(t,e)=>{c&&(t._noanime=!0),e(),c&&(t._noanime=!1)};return i}(()=>{async function t(){const t=$("o-app");$("o-app template[page]")?.remove();let e=!1;window.addEventListener("hashchange",(o=>{if(e){const e=new URL(location.href),{routers:o}=t;history.replaceState({routerMode:1,ignore:1,routers:o.map((t=>({src:t.src})))},"",e.hash)}})),t.on("page-loaded",(t=>{const{_defaults:e}=$(t.target);if("string"==typeof e.title){const t=$("head title");t&&(t.text=e.title)}})),history?.state?.routerMode||t.push(`<o-page src="${location.pathname}${location.search}"></o-page>`),o({app:t,getStateUrl:(t,e)=>`${t}${e}`,fixStateUrl(t){if(new URL(location.href).hash)return e=!0,setTimeout((()=>e=!1)),!1}})}"complete"===document.readyState?t():$(window).one("load",(()=>{t()}))})()}));
//# sourceMappingURL=scsr.min.js.map
