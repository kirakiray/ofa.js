//! ofa.js - v4.6.0 https://github.com/kirakiray/ofa.js  (c) 2018-2025 YAO
const e="https://ofajs.github.io/ofa-errors/errors",t={load_fail:"Load {url} failed",load_fail_status:"Load {url} failed, status code: {status}",load_module:"Load module failed, module address: {url}",no_alias:"No alias found: {name}, so '{url}' request is invalid",config_alias_name_error:"Error in setting alias, must start with '@'",alias_already:"Alias ​​'{name}' already exists",alias_relate_name:"Alias ​​cannot be configured with relative address, '{name}': '{path}'",failed_to_set_data:"Error in setting attribute value {key}",failed_to_get_data:"Error in getting {key}",nexttick_thread_limit:"nextTick exceeds thread limit, may have an infinite loop, please try to repair or optimize the function",not_func:"The callback parameter of the {name} method must be a Function",not_found_func:"The '{name}' method was not found on the target {tag}. Please define the '{name}' method on the 'proto' of the component {tag}",invalid_key:"The parameters for registering the '{compName}' component are incorrect. The '{name}' on '{targetName}' is already occupied. Please change '{name}' to another name.",xhear_wrap_no_parent:"The target element has no parent element, the warp method cannot be used",xhear_unwrap_has_siblings:"The target element contains adjacent nodes, the unwrap method cannot be used",xhear_reander_err:"Failed to render the tag '{tag}'",xhear_register_exists:"The component '{name}' already exists, and this component cannot be registered repeatedly",xhear_register_err:"Error in registering the '{tag}' component",xhear_validate_tag:"The registered component name '{str}' is incorrect. For the Web Components naming rules, please refer to: https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define#valid_custom_element_names ",xhear_tag_noline:"The registered component name '{str}' is incorrect and contains at least one '-' character; Web Components For naming rules, please refer to: https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define#valid_custom_element_names ",xhear_regster_data_noset:"Error in registering component {tag}, custom data cannot have data of type 'Set' or 'Map'",xhear_regster_data_nofunc:"Registration component {tag} error, functions cannot appear in custom data, please put the function in 'proto'; or change '{key}' to '_{key}'",xhear_fakenode_unclose:"This is an unclosed FakeNode; use the wrong attribute name: {name}",xhear_fill_tempname:"Fill component template '{name}' not found",xhear_eval:"Template syntax '{name}' error, expression {name}:{arg0}=\"{arg1}\"",xhear_listen_already:"An old listener already exists, and this element is rendering incorrectly. ",xhear_dbfill_noname:"Only fill components with the 'name' attribute can be rendered in the fill component",xhear_temp_exist:"Template '{name}' already exists",xhear_sync_no_options:"Direct use of the 'sync' method is not allowed, it is only used for template rendering",xhear_sync_object_value:"Cannot use 'sync' to synchronize values ​​of Object type, target {targetName}",loading_nothing:"Loading function has no return content",app_src_change:"The app element that has been initialized cannot modify the src attribute",no_cross_access_func:"To jump to a page across domains, you must set the access function",access_return_error:"Jumping to {src} is not allowed",load_comp_module:"Error loading component module, wrong module address: {url}",comp_registered:"Component '{tag}' has been registered, and the component cannot be registered again","inject-link-rel":"The rel attribute value of the link element in the inject-host component can only be 'stylesheet'","use-data-inject":"Please do not use data() on the style element in the inject-host, because it will cause serious performance crisis",load_page_module:"Loading page module {url} failed",page_no_defaults:"The current page ({src}) has been rendered and cannot be rendered again",not_page_module:"{src} is not a page module and cannot be set as the src of the page component",page_failed:"Loading page failed: {src}",fetch_temp_err:"Page module {url} failed to load template {tempSrc}",page_wrap_fetch:"Page {before} failed to get the parent page ({current})",context_change_name:"Changing the 'name' of {compName} may cause performance issues, please avoid changing this property",no_provider:"The consumer named '{name}' was not captured by the corresponding provider",page_invalid_key:"The registration parameters of page {src} are incorrect. '{name}' on '{targetName}' is already taken. Please change '{name}' to another name.",root_provider_exist:"An exception occurred in the root provider named '{name}'. The root provider component can only appear once",root_provider_name_change:"An exception occurred in the root provider named '{name}'. The root provider component cannot change the 'name' attribute",change_lm_src:"{tag} element changes 'src' attribute invalid, this attribute can only be set once.",error_no_owner:"This data is incorrect, the owner has not registered this object",circular_data:"An object with a circular reference",fill_type:"'value' of 'x-fill' must be of type Array, the current value is of type {type}",fill_key_duplicates:"The key in the fill component is repeated",render_el_error:"Rendering element failed, rendering error is {expr}",temp_multi_child:"The template element can only contain one child element. If multiple child elements appear, the child elements will be repackaged in a <div> element",temp_wrap_child:"The template '{tempName}' contains {len} child elements, which have been wrapped in a div element with the attribute '{wrapName}'.",app_noback:"This is already the first page, and the 'back' operation cannot be performed again",invalidated_inject_host:"This element will be invalidated in 'inject-host'",olink_out_app:"The element of [olink] is only allowed in o-app",app_noforward:"This is the last page, you can no longer perform the 'forward' operation",need_forwards:"The target o-app does not allow forward operations, please add the '_forwards' attribute to the target; or in the app config file, add 'export const allowForward = true' ",watchuntil_timeout:"watchUntil timed out, target value not monitored"};if(globalThis.navigator&&navigator.language){let a=navigator.language.toLowerCase().split("-")[0];"zh"===a&&"zh-cn"!==navigator.language.toLowerCase()&&(a="zhft"),(async()=>{if(!globalThis.localStorage)return;if(globalThis.navigator&&!navigator.onLine)return;if(localStorage["ofa-errors"]){const e=JSON.parse(localStorage["ofa-errors"]);Object.assign(t,e)}const n=localStorage["ofa-errors-time"];if(!n||Date.now()>Number(n)+3e5){const n=await fetch(`${e}/${a}.json`).then((e=>e.json())).catch((()=>null));n?(localStorage["ofa-errors"]=JSON.stringify(n),localStorage["ofa-errors-time"]=Date.now()):n=await fetch(`${e}/en.json`).then((e=>e.json())).catch((e=>null)),Object.assign(t,n)}})()}globalThis.navigator&&navigator.userAgent.includes("Safari")&&navigator.userAgent.includes("Chrome");function a({app:e,getStateUrl:t,fixStateUrl:a}){let n,o,r,i,s;history.state&&history.state.routerMode&&(e.routers=history.state.routers),e.on("router-change",(a=>{let s="pushState";const{name:l,delta:c,src:h}=a.data||{};switch(l){case"replace":s="replaceState";case"goto":const{routers:a}=e,{pathname:l,search:d,origin:p}=new URL(h,location.href);if(o)return void(o=null);let m="";m=t?t(l,d,s):location.origin===p?`#${l}${d}`:`#${p}${l}${d}`,i&&(s="replaceState",i=null),history[s]({routerMode:1,routers:a.map((e=>({src:e.src})))},"",m);break;case"back":if(r)return void(r=null);n=1,history.go(-c)}})),window.addEventListener("popstate",s=t=>{const{state:s}=t;if(n)return void(n=null);if(!s){if(a){const t=a();if(t)return i=1,void c(e,(()=>e.goto(t)));if(!1===t)return}return r=1,void c(e,(()=>e.back(e.routers.length-1)))}if(!s.routerMode||s.ignore)return;const{routers:l}=s,{routers:h}=e;if(l.length<h.length)r=1,c(e,(()=>e.back(h.length-l.length)));else if(l.length>h.length){const t=l.slice(),a=t.pop();if(t.length>h.length){const a=t.slice(e._history.length);e._history.push(...a)}o=1,c(e,(()=>e.goto(a.src)))}else JSON.stringify(l)!==JSON.stringify(h)&&console.error("o-router error occurred")});const l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),c=(e,t)=>{l&&(e._noanime=!0),t(),l&&(e._noanime=!1)};return s}const n=`f-${Math.random().toString(32).slice(2)}`;$.register({tag:"o-router",temp:"<style>:host{display:block;width:100%;height:100%;overflow:hidden}::slotted(o-app){width:100%;height:100%}</style><slot></slot>",attrs:{fixBody:null},watch:{fixBody(e){if(null!==e){const e=document.createElement("style");e.setAttribute(n,""),e.innerHTML="html,body{margin:0;padding:0;width:100%;height:100%;}",document.head.append(e)}else{const e=document.head.querySelector(n);e&&e.remove()}}},attached(){const e=this.$("o-app");!history.state&&window.location.hash&&(e.$("o-page")?.remove(),e.goto(location.hash.replace("#",""))),this._popstateFunc=a({app:e,fixStateUrl(){const e=new URL(location.href);if(e.hash)return e.hash.replace("#","")}})},detached(){this._popstateFunc&&window.removeEventListener("popstate",this._popstateFunc)}}),$.extensions.link=e=>{if(""===e.attr("olink")){const t=e.attr("href");let a;try{a=new URL(t)}catch(e){return}if(!/^#\//.test(a.hash)){e.attr("origin-href",t);const a=new URL(t);e.attr("href",`${location.origin}${location.pathname}#${a.pathname}`)}}};
//# sourceMappingURL=router.min.mjs.map
