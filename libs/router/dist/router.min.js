//! ofa - v4.0.0 https://github.com/kirakiray/ofa.js  (c) 2018-2023 YAO
!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";new Set;const t=`f-${Math.random().toString(32).slice(2)}`;$.register({tag:"o-router",temp:"<style>:host{display:block;width:100%;height:100%;overflow:hidden}::slotted(o-app){display:block;width:100%;height:100%}</style><slot></slot>",attrs:{fixBody:null},watch:{fixBody(e){if(null!==e){const e=document.createElement("style");e.setAttribute(t,""),e.innerHTML="html,body{margin:0;padding:0;width:100%;height:100%;}",document.head.append(e)}else{const e=document.head.querySelector(t);e&&e.remove()}}},attached(){this._popstateFunc=function(t){history.state&&history.state.routerMode&&(t.routers=history.state.routers),!history.state&&window.location.hash&&(t.$("o-page")?.remove(),t.goto(location.hash.replace("#","")));let e,o,r,s=0;return t.on("router-change",(r=>{let n="pushState";switch(r.name){case"replace":n="replaceState";case"goto":const{routers:i}=t,{pathname:a,search:c}=new URL(r.src,location.href);if(e)return void(e=null);history[n]({routerMode:1,routers:i},"",`#${a}${c}`);break;case"back":if(o)return void(o=null);s=1,history.go(-r.delta),console.log("back => ",r)}})),window.addEventListener("popstate",r=r=>{const{state:n}=r;if(s)return void(s=0);if(!n)return o=1,void t.back(t.routers.length-1);const{routers:i}=n,{routers:a}=t;if(i.length<a.length)o=1,t.back(a.length-i.length);else if(i.length>a.length){const o=i.slice(),r=o.pop();if(o.length>a.length){const e=o.slice(t._history.length);t._history.push(...e)}e=1,t.goto(r.src)}else console.error("o-router error occurred")}),r}(this.$("o-app"))},detached(){this._popstateFunc&&window.removeEventListener("popstate",this._popstateFunc)}})}));
//# sourceMappingURL=router.min.js.map
